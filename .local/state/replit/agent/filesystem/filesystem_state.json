{"file_contents":{"src/App.tsx":{"content":"import { Switch, Route, Redirect } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport NotFound from \"@/pages/not-found\";\nimport Landing from \"@/pages/Landing\";\nimport Home from \"@/pages/Home\";\nimport CustomerApp from \"@/pages/CustomerApp\";\nimport RestaurantDashboard from \"@/pages/RestaurantDashboard\";\nimport DriverApp from \"@/pages/DriverApp\";\nimport BusinessHub from \"@/pages/BusinessHub\";\nimport AdminDashboard from \"@/pages/AdminDashboard\";\nimport Checkout from \"@/pages/Checkout\";\nimport Login from '@/pages/Login';\nimport RegisterPage from \"./pages/RegisterPage\";\n\ninterface PrivateRouteProps {\n  component: React.FC;\n  allowedRoles?: Array<\"customer\" | \"driver\" | \"restaurant\" | \"admin\">;\n}\n\nfunction PrivateRoute({ component: Component, allowedRoles }: PrivateRouteProps) {\n  const { user, isAuthenticated, isLoading } = useAuth();\n\n  if (isLoading) return <div>Loading...</div>;\n  if (!isAuthenticated) return <Redirect to=\"/login\" />;\n\n  // Role check\n  if (allowedRoles && user && !allowedRoles.includes(user.role)) {\n    return (\n      <div className=\"min-h-screen flex flex-col items-center justify-center\">\n        <h1 className=\"text-3xl font-bold text-red-600\">Unauthorized</h1>\n        <p className=\"text-muted-foreground mt-2\">\n          You do not have access to this portal.\n        </p>\n      </div>\n    );\n  }\n\n  return <Component />;\n}\n\nfunction AppRouter() {\n  return (\n    <Switch>\n      {/* Public routes */}\n      <Route path=\"/\" component={Landing} />\n      <Route path=\"/login\" component={Login} />\n      <Route path=\"/register\" component={RegisterPage} />\n      <Route path=\"/business-hub\" component={BusinessHub} />\n\n      {/* Private routes with role guards */}\n      <Route path=\"/home\" component={() => <PrivateRoute component={Home} />} />\n      <Route path=\"/customer\" component={() => <PrivateRoute component={CustomerApp} allowedRoles={[\"customer\", \"admin\"]} />} />\n      <Route path=\"/restaurant\" component={() => <PrivateRoute component={RestaurantDashboard} allowedRoles={[\"restaurant\", \"admin\"]} />} />\n      <Route path=\"/driver\" component={() => <PrivateRoute component={DriverApp} allowedRoles={[\"driver\", \"admin\"]} />} />\n      <Route path=\"/admin\" component={() => <PrivateRoute component={AdminDashboard} allowedRoles={[\"admin\"]} />} />\n      <Route path=\"/checkout\" component={Checkout} />\n\n      {/* Fallback 404 */}\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <AppRouter />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":2882},"ZimFeast/drivers/models.py":{"content":"from django.db import models\nfrom django.conf import settings\nfrom django.contrib.auth import get_user_model\nimport uuid\nfrom django.utils import timezone\n\nUser = get_user_model()\n\nclass Driver(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name=\"driver_profile\")\n    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)\n    license_number = models.CharField(max_length=50)\n    license_photo = models.ImageField(upload_to=\"drivers/license_photos/\")\n    vehicle_details = models.JSONField()\n    vehicle_photo = models.ImageField(upload_to=\"drivers/vehicle_photos/\")\n    is_online = models.BooleanField(default=False)\n    lat = models.FloatField(null=True, blank=True)\n    lng = models.FloatField(null=True, blank=True)\n\n    def __str__(self):\n        return f\"{self.user.email} - {'Online' if self.is_online else 'Offline'}\"\n\nclass DriverReject(models.Model):\n    driver = models.ForeignKey(Driver, on_delete=models.CASCADE)\n    order_id = models.CharField(max_length=100)\n    reason = models.CharField(max_length=255, blank=True)\n    rejected_at = models.DateTimeField(auto_now_add=True)\n\nclass DriverOrderStatus(models.Model):\n    driver = models.ForeignKey(Driver, on_delete=models.CASCADE, related_name=\"current_order\")\n    order = models.OneToOneField(\"orders.Order\", on_delete=models.CASCADE, related_name=\"assigned_driver_status\")\n    status = models.CharField(max_length=50, choices=[\n        (\"pending\", \"Pending\"),\n        (\"accepted\", \"Accepted\"),\n        (\"delivering\", \"Delivering\"),\n        (\"completed\", \"Completed\"),\n        (\"cancelled\", \"Cancelled\")\n    ], default=\"pending\")\n    assigned_at = models.DateTimeField(auto_now_add=True)\n    completed_at = models.DateTimeField(null=True, blank=True)\n\n    def __str__(self):\n        return f\"{self.driver.user.email} - {self.status}\"\n\nclass DriverFinance(models.Model):\n    driver = models.ForeignKey(\"Driver\", on_delete=models.CASCADE, related_name=\"finances\")\n    date = models.DateField(default=timezone.localdate)\n    today_deliveries = models.IntegerField(default=0)\n    today_earnings = models.DecimalField(max_digits=10, decimal_places=2, default=0)\n    rating_sum = models.DecimalField(max_digits=5, decimal_places=2, default=0)\n    rating_count = models.IntegerField(default=0)\n    hours_online = models.DecimalField(max_digits=5, decimal_places=2, default=0)\n    last_updated = models.DateTimeField(auto_now=True)\n\n    @property\n    def average_rating(self):\n        return self.rating_sum / self.rating_count if self.rating_count > 0 else 0\n\n    def reset_if_new_day(self):\n        today = timezone.localdate()\n        if self.date != today:\n            self.date = today\n            self.today_deliveries = 0\n            self.today_earnings = 0\n            self.rating_sum = 0\n            self.rating_count = 0\n            self.hours_online = 0\n            self.save()\n    \nclass DriverRating(models.Model):\n    driver = models.ForeignKey(\"Driver\", on_delete=models.CASCADE, related_name=\"ratings\")\n    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)  # who gave the rating\n    rating = models.DecimalField(max_digits=3, decimal_places=2)  # e.g., 4.5\n    comment = models.TextField(blank=True, null=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n\n    def __str__(self):\n        return f\"{self.driver.user.email} - {self.rating}\"","size_bytes":3412},"src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"ZimFeast/restaurants/views.py":{"content":"import logging\nimport requests\nfrom django.shortcuts import get_object_or_404\nfrom django.db.models import F\nfrom django.utils import timezone\nfrom rest_framework.decorators import (\n    api_view,\n    permission_classes,\n    parser_classes,\n)\nfrom rest_framework.permissions import IsAuthenticated, AllowAny\nfrom rest_framework.parsers import MultiPartParser, FormParser\nfrom rest_framework.response import Response\nfrom rest_framework import status\n\nfrom geopy.distance import geodesic\n\nfrom asgiref.sync import async_to_sync\nfrom channels.layers import get_channel_layer\n\nfrom .models import (\n    Restaurant,\n    MenuItem,\n    RestaurantDashboard,\n    CuisineType,\n    CategoryType,\n)\nfrom .serializers import (\n    RestaurantSerializer,\n    RestaurantCreateSerializer,\n    RestaurantExternalAPISerializer,\n    MenuItemSerializer \n)\n\nfrom .pagination import NearbyRestaurantCursorPagination\n\nlogger = logging.getLogger(__name__)\nchannel_layer = get_channel_layer()\n\n@api_view([\"POST\"])\n@permission_classes([IsAuthenticated])\ndef create_restaurant(request):\n    serializer = RestaurantCreateSerializer(data=request.data, context={\"request\": request})\n    if serializer.is_valid():\n        restaurant = serializer.save()\n        return Response(RestaurantSerializer(restaurant).data, status=status.HTTP_201_CREATED)\n    return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n\n@api_view([\"PUT\", \"PATCH\"])\n@permission_classes([IsAuthenticated])\ndef update_restaurant(request, restaurant_id):\n    restaurant = get_object_or_404(Restaurant, id=restaurant_id, owner=request.user)\n    partial = request.method == \"PATCH\"\n    serializer = RestaurantCreateSerializer(\n        restaurant, data=request.data, partial=partial, context={\"request\": request}\n    )\n    if serializer.is_valid():\n        restaurant = serializer.save()\n        return Response(RestaurantSerializer(restaurant).data)\n    return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n\n# Create a new cuisine\n@api_view(['POST'])\n@permission_classes([AllowAny])\ndef create_cuisine(request):\n    \"\"\"\n    Creates a new cuisine.\n    Expects JSON body: {\"name\": \"Italian\"}\n    \"\"\"\n    name = request.data.get('name')\n    if not name:\n        return Response({\"error\": \"Name is required.\"}, status=status.HTTP_400_BAD_REQUEST)\n\n    # Check if cuisine already exists\n    if CuisineType.objects.filter(name=name).exists():\n        return Response({\"error\": \"Cuisine already exists.\"}, status=status.HTTP_400_BAD_REQUEST)\n\n    cuisine = CuisineType.objects.create(name=name)\n    return Response({\"id\": cuisine.id, \"name\": cuisine.name}, status=status.HTTP_201_CREATED)\n\n# List all cuisines\n@api_view(['GET'])\n@permission_classes([IsAuthenticated])\ndef list_cuisines(request):\n    \"\"\"\n    Returns all cuisines with their IDs, or None if no cuisines exist.\n    \"\"\"\n    cuisines = CuisineType.objects.all().order_by('id')\n    if not cuisines.exists():\n        return Response(None, status=status.HTTP_200_OK)  # Return None if empty\n\n    data = [{\"id\": c.id, \"name\": c.name} for c in cuisines]\n    return Response(data, status=status.HTTP_200_OK)\n\n# Create a new category\n@api_view(['POST'])\n@permission_classes([AllowAny])\ndef create_category(request):\n    \"\"\"\n    Creates a new cuisine.\n    Expects JSON body: {\"name\": \"Italian\"}\n    \"\"\"\n    name = request.data.get('name')\n    if not name:\n        return Response({\"error\": \"Name is required.\"}, status=status.HTTP_400_BAD_REQUEST)\n\n    # Check if cuisine already exists\n    if CategoryType.objects.filter(name=name).exists():\n        return Response({\"error\": \"Cuisine already exists.\"}, status=status.HTTP_400_BAD_REQUEST)\n\n    category = CategoryType.objects.create(name=name)\n    return Response({\"id\": category.id, \"name\": category.name}, status=status.HTTP_201_CREATED)\n\n# List all cuisines\n@api_view(['GET'])\n@permission_classes([IsAuthenticated])\ndef list_categories(request):\n    \"\"\"\n    Returns all cuisines with their IDs, or None if no cuisines exist.\n    \"\"\"\n    category = CategoryType.objects.all().order_by('id')\n    if not category.exists():\n        return Response(None, status=status.HTTP_200_OK)  # Return None if empty\n\n    data = [{\"id\": c.id, \"name\": c.name} for c in category]\n    return Response(data, status=status.HTTP_200_OK)\n\n@api_view([\"POST\"])\n@permission_classes([IsAuthenticated])\ndef add_external_api(request, restaurant_id):\n    restaurant = get_object_or_404(Restaurant, id=restaurant_id, owner=request.user)\n    serializer = RestaurantExternalAPISerializer(data=request.data)\n    if serializer.is_valid():\n        serializer.save(restaurant=restaurant)\n        out = serializer.data.copy()\n        out.pop(\"api_key\", None)\n        return Response(out, status=status.HTTP_201_CREATED)\n    return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n\n@api_view([\"POST\"])\n@permission_classes([IsAuthenticated])\n@parser_classes([MultiPartParser, FormParser])\ndef add_menu_item(request):\n    # Get the restaurant belonging to the authenticated user\n    restaurant = get_object_or_404(Restaurant, owner=request.user)\n\n    serializer = MenuItemSerializer(data=request.data)\n    if serializer.is_valid():\n        serializer.save(restaurant=restaurant)  # attach restaurant automatically\n        return Response(serializer.data, status=status.HTTP_201_CREATED)\n    return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n\n@api_view([\"GET\"])\n@permission_classes([IsAuthenticated])\ndef get_menu_items(request):\n    \"\"\"\n    Get all menu items for the restaurant belonging to the logged-in user.\n    \"\"\"\n    # Get the restaurant for the logged-in user\n    restaurant = get_object_or_404(Restaurant, owner=request.user)\n\n    # Get all menu items for this restaurant\n    menu_items = MenuItem.objects.filter(restaurant=restaurant).order_by(\"created\")\n\n    # Serialize the menu items\n    serializer = MenuItemSerializer(menu_items, many=True)\n\n    return Response(serializer.data, status=status.HTTP_200_OK)\n\nfrom rest_framework.decorators import api_view, permission_classes\nfrom rest_framework.permissions import IsAuthenticated\nfrom rest_framework.response import Response\nfrom rest_framework import status\nfrom django.shortcuts import get_object_or_404\nfrom .models import MenuItem, Restaurant\n\n@api_view([\"DELETE\"])\n@permission_classes([IsAuthenticated])\ndef delete_menu_item(request, menu_id):\n    \"\"\"\n    Delete a menu item. Only the restaurant owner can delete their own menu items.\n    URL: /api/restaurants/menu/<menu_id>/delete/\n    \"\"\"\n    # Get the menu item or return 404\n    menu_item = get_object_or_404(MenuItem, id=menu_id)\n    \n    # Check if the authenticated user owns the restaurant\n    if menu_item.restaurant.owner != request.user:\n        return Response({\"detail\": \"You do not have permission to delete this menu item.\"}, status=status.HTTP_403_FORBIDDEN)\n    \n    menu_item.delete()\n    return Response({\"detail\": \"Menu item deleted successfully.\"}, status=status.HTTP_204_NO_CONTENT)\n\n@api_view([\"GET\"])\n@permission_classes([AllowAny])\ndef get_restaurant_detail(request, restaurant_id):\n    rest = get_object_or_404(Restaurant, id=restaurant_id)\n    return Response(RestaurantSerializer(rest).data)\n\n@api_view([\"GET\"])\n@permission_classes([AllowAny])\ndef list_nearby_restaurants(request):\n    # Parse optional lat/lng\n    lat_param = request.query_params.get(\"lat\")\n    lng_param = request.query_params.get(\"lng\")\n    try:\n        user_lat = float(lat_param) if lat_param else None\n        user_lng = float(lng_param) if lng_param else None\n    except ValueError:\n        return Response({\"error\": \"lat and lng must be floats\"}, status=400)\n\n    radius_km = float(request.query_params.get(\"radius_km\", 10.0))\n    page_size = int(request.query_params.get(\"page_size\", 10))\n    page = int(request.query_params.get(\"page\", 1))\n\n    # Optional cuisine filter\n    cuisine = request.query_params.get(\"cuisine\", \"\").strip().lower()\n\n    # Start queryset\n    restaurants = Restaurant.objects.all()\n    if cuisine:\n        restaurants = restaurants.filter(cuisines__name__iexact=cuisine)\n\n    nearby = []\n\n    if user_lat is not None and user_lng is not None:\n        user_point = (user_lat, user_lng)\n        for r in restaurants:\n            try:\n                r_point = (r.lat, r.lng)\n                dist = geodesic(user_point, r_point).km\n                if dist <= radius_km:\n                    nearby.append((dist, r))\n            except Exception:\n                continue\n        # Sort by distance\n        nearby.sort(key=lambda x: x[0])\n        restaurant_objs = [r for _, r in nearby]\n    else:\n        # No lat/lng â†’ skip distance filtering\n        restaurant_objs = list(restaurants)\n        nearby = [(None, r) for r in restaurant_objs]\n\n    # Manual pagination\n    start = (page - 1) * page_size\n    end = start + page_size\n    paginated_restaurants = restaurant_objs[start:end]\n\n    # Serialize\n    serialized = []\n    for r in paginated_restaurants:\n        dist = next((d for d, rest in nearby if rest.id == r.id), None)\n        data = RestaurantSerializer(r).data\n        data[\"distance_km\"] = round(dist, 3) if dist is not None else None\n        serialized.append(data)\n\n    return Response({\n        \"count\": len(restaurant_objs),\n        \"page\": page,\n        \"page_size\": page_size,\n        \"results\": serialized\n    })\n\ndef _call_external_api(api_obj, params=None):\n    headers = {}\n    if api_obj.api_key:\n        headers[\"Authorization\"] = f\"Bearer {api_obj.api_key}\"\n    try:\n        resp = requests.get(api_obj.api_url, params=(params or {}), headers=headers, timeout=8)\n        resp.raise_for_status()\n        return resp.json()\n    except requests.RequestException as e:\n        logger.warning(\"External API call failed (%s): %s\", api_obj.api_url, str(e))\n        raise\n\n@api_view([\"GET\"])\n@permission_classes([AllowAny])\ndef get_categories(request, restaurant_id):\n    restaurant = get_object_or_404(Restaurant, id=restaurant_id)\n    ext_category = request.query_params.get(\"ext_category\")\n    api_entry = None\n\n    if ext_category:\n        api_entry = restaurant.external_apis.filter(category__iexact=ext_category).first()\n    if not api_entry:\n        for alt in (\"categories\", \"menu_categories\", \"menu_api\", \"meal_categories\"):\n            api_entry = restaurant.external_apis.filter(category__iexact=alt).first()\n            if api_entry:\n                break\n\n    if api_entry:\n        try:\n            data = _call_external_api(api_entry, params=request.query_params)\n            return Response(data)\n        except Exception:\n            pass\n\n    categories = MenuItem.objects.filter(restaurant=restaurant).values_list(\"category\", flat=True).distinct()\n    return Response({\"categories\": list(categories)})\n\n@api_view([\"GET\"])\n@permission_classes([AllowAny])\ndef get_menu_data(request, restaurant_id):\n    restaurant = get_object_or_404(Restaurant, id=restaurant_id)\n    ext_category = request.query_params.get(\"ext_category\")\n    api_entry = None\n    if ext_category:\n        api_entry = restaurant.external_apis.filter(category__iexact=ext_category).first()\n\n    if not api_entry:\n        for alt in (\"meal_data\", \"menu_api\", \"meals\", \"items\"):\n            api_entry = restaurant.external_apis.filter(category__iexact=alt).first()\n            if api_entry:\n                break\n\n    if api_entry:\n        try:\n            data = _call_external_api(api_entry, params=request.query_params)\n            return Response(data)\n        except Exception:\n            logger.warning(\"External menu API failed for restaurant %s - falling back to DB\", restaurant.id)\n\n    items_qs = MenuItem.objects.filter(restaurant=restaurant)\n    category_filter = request.query_params.get(\"category\")\n    if category_filter:\n        items_qs = items_qs.filter(category__iexact=category_filter)\n    serializer = MenuItemSerializer(items_qs, many=True, context={\"request\": request})\n    return Response(serializer.data)\n\n# -------------------------------\n# Order status updates for dashboard\n# -------------------------------\n\ndef send_dashboard_update(restaurant, dashboard):\n    group_name = f\"restaurant_{restaurant.id}\"\n    async_to_sync(channel_layer.group_send)(\n        group_name,\n        {\n            \"type\": \"restaurant.dashboard.update\",\n            \"dashboard_data\": {\n                \"today_orders\": dashboard.today_orders,\n                \"today_revenue\": float(dashboard.today_revenue),\n                \"today_average_rating\": dashboard.today_average_rating,\n                \"preparing\": dashboard.preparing,\n                \"pending\": dashboard.pending,\n                \"completed\": dashboard.completed,\n            },\n        },\n    )\n\n@api_view([\"POST\"])\n@permission_classes([IsAuthenticated])\ndef mark_order_preparing(request, order_id):\n    from orders.models import Order\n    order = get_object_or_404(Order, id=order_id)\n    restaurant = get_object_or_404(Restaurant, owner=request.user)\n    dashboard, _ = RestaurantDashboard.objects.get_or_create(restaurant=restaurant)\n\n    pending_list = dashboard.pending\n    order_data = next((o for o in pending_list if o[\"order_id\"] == order.id), None)\n    if not order_data:\n        return Response({\"detail\": \"Order not found in pending.\"}, status=status.HTTP_400_BAD_REQUEST)\n\n    dashboard.pending = [o for o in pending_list if o[\"order_id\"] != order.id]\n    dashboard.preparing.append(order_data)\n    dashboard.save()\n\n    order.status = \"preparing\"\n    order.save()\n\n    send_dashboard_update(restaurant, dashboard)\n    return Response({\"detail\": \"Order marked as preparing.\"}, status=status.HTTP_200_OK)\n\n@api_view([\"POST\"])\n@permission_classes([IsAuthenticated])\ndef mark_order_completed(request, order_id):\n    from orders.models import Order\n    order = get_object_or_404(Order, id=order_id)\n    restaurant = get_object_or_404(Restaurant, owner=request.user)\n    dashboard, _ = RestaurantDashboard.objects.get_or_create(restaurant=restaurant)\n\n    preparing_list = dashboard.preparing\n    order_data = next((o for o in preparing_list if o[\"order_id\"] == order.id), None)\n    if not order_data:\n        return Response({\"detail\": \"Order not found in preparing.\"}, status=status.HTTP_400_BAD_REQUEST)\n\n    dashboard.preparing = [o for o in preparing_list if o[\"order_id\"] != order.id]\n    dashboard.completed.append(order_data)\n    dashboard.save()\n\n    order.status = \"completed\"\n    order.delivery_complete_time = order.delivery_complete_time or timezone.now()\n    order.save()\n\n    send_dashboard_update(restaurant, dashboard)\n    return Response({\"detail\": \"Order marked as completed.\"}, status=status.HTTP_200_OK)\n\n\n@api_view(['GET'])\n@permission_classes([AllowAny])  # or AllowAny if public\ndef list_restaurants(request):\n    restaurants = Restaurant.objects.all()\n    serializer = RestaurantSerializer(restaurants, many=True)\n    return Response(serializer.data)","size_bytes":14864},"src/pages/driver-components/AssignedOrderCard.tsx":{"content":"import { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\n\nexport default function AssignedOrderCard({ order }: { order: any }) {\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n      <Card className=\"border-blue-200 bg-blue-50\">\n        <CardHeader>\n          <CardTitle>Order Assigned: #{order.id.slice(-6)}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p>Customer: {order.customerName}</p>\n          <p>Delivery Fee: ${order.deliveryFee}</p>\n          <p>Address: {order.deliveryAddress}</p>\n          <div className=\"flex gap-2 mt-2\">\n            <Button size=\"sm\">Decline</Button>\n            <Button size=\"sm\">Accept</Button>\n            <Button size=\"sm\">Call</Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":917},"ZimFeast/accounts/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.1 on 2025-10-01 09:18\n\nimport django.db.models.deletion\nimport uuid\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        ('auth', '0012_alter_user_first_name_max_length'),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='BlacklistedToken',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('token', models.CharField(max_length=255, unique=True)),\n                ('blacklisted_at', models.DateTimeField(auto_now_add=True)),\n            ],\n        ),\n        migrations.CreateModel(\n            name='CustomUser',\n            fields=[\n                ('password', models.CharField(max_length=128, verbose_name='password')),\n                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),\n                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),\n                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),\n                ('email', models.EmailField(max_length=254, unique=True)),\n                ('first_name', models.CharField(blank=True, max_length=255)),\n                ('last_name', models.CharField(blank=True, max_length=255)),\n                ('phone_number', models.CharField(blank=True, max_length=50)),\n                ('role', models.CharField(choices=[('customer', 'Customer'), ('restaurant', 'Restaurant'), ('driver', 'Driver'), ('admin', 'Admin')], default='customer', max_length=30)),\n                ('is_active', models.BooleanField(default=True)),\n                ('is_staff', models.BooleanField(default=False)),\n                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.group', verbose_name='groups')),\n                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions')),\n            ],\n            options={\n                'abstract': False,\n            },\n        ),\n        migrations.CreateModel(\n            name='Address',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('label', models.CharField(default='home', max_length=100)),\n                ('address_text', models.CharField(max_length=255)),\n                ('lat', models.FloatField()),\n                ('lng', models.FloatField()),\n                ('created', models.DateTimeField(auto_now_add=True)),\n                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='addresses', to=settings.AUTH_USER_MODEL)),\n            ],\n        ),\n    ]\n","size_bytes":3214},"ZimFeast/orders/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.1 on 2025-10-01 09:18\n\nimport django.db.models.deletion\nimport uuid\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        ('restaurants', '0001_initial'),\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='Order',\n            fields=[\n                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),\n                ('created', models.DateTimeField(auto_now_add=True)),\n                ('status', models.CharField(choices=[('created', 'created'), ('paid', 'paid'), ('assigned', 'assigned'), ('out_for_delivery', 'out_for_delivery'), ('delivered', 'delivered'), ('cancelled', 'cancelled')], default='created', max_length=50)),\n                ('restaurant_names', models.TextField()),\n                ('total_fee', models.DecimalField(decimal_places=2, max_digits=10)),\n                ('tip', models.DecimalField(decimal_places=2, default=0, max_digits=8)),\n                ('each_item_price', models.JSONField(default=list)),\n                ('delivery_out_time', models.DateTimeField(blank=True, null=True)),\n                ('delivery_complete_time', models.DateTimeField(blank=True, null=True)),\n                ('external_order_numbers', models.JSONField(default=dict)),\n                ('delivery_fee', models.DecimalField(decimal_places=2, default=0, max_digits=8)),\n                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='customer_orders', to=settings.AUTH_USER_MODEL)),\n                ('driver', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='driver_orders', to=settings.AUTH_USER_MODEL)),\n                ('restaurant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='restaurant_orders', to=settings.AUTH_USER_MODEL)),\n            ],\n        ),\n        migrations.CreateModel(\n            name='OrderItem',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('quantity', models.PositiveIntegerField(default=1)),\n                ('added', models.DateTimeField(auto_now_add=True)),\n                ('menu_item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='restaurants.menuitem')),\n                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cart_items', to=settings.AUTH_USER_MODEL)),\n            ],\n        ),\n    ]\n","size_bytes":2681},"src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"ZimFeast/restaurants/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.1 on 2025-10-01 09:18\n\nimport django.db.models.deletion\nimport uuid\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='CuisineType',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('name', models.CharField(max_length=100, unique=True)),\n            ],\n        ),\n        migrations.CreateModel(\n            name='Restaurant',\n            fields=[\n                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),\n                ('name', models.CharField(max_length=255)),\n                ('phone_number', models.CharField(blank=True, max_length=30)),\n                ('description', models.TextField(blank=True)),\n                ('full_address', models.CharField(max_length=500)),\n                ('lat', models.FloatField()),\n                ('lng', models.FloatField()),\n                ('minimum_order_price', models.DecimalField(decimal_places=2, default=0, max_digits=8)),\n                ('est_delivery_time', models.CharField(blank=True, max_length=50)),\n                ('created', models.DateTimeField(auto_now_add=True)),\n                ('cuisines', models.ManyToManyField(blank=True, to='restaurants.cuisinetype')),\n                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='restaurants', to=settings.AUTH_USER_MODEL)),\n            ],\n        ),\n        migrations.CreateModel(\n            name='RestaurantDashboard',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('today_orders', models.IntegerField(default=0)),\n                ('today_revenue', models.DecimalField(decimal_places=2, default=0, max_digits=10)),\n                ('today_average_rating', models.FloatField(default=3.0)),\n                ('preparing', models.JSONField(default=list)),\n                ('pending', models.JSONField(default=list)),\n                ('completed', models.JSONField(default=list)),\n                ('last_updated', models.DateTimeField(auto_now=True)),\n                ('restaurant', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='dashboard', to='restaurants.restaurant')),\n            ],\n        ),\n        migrations.CreateModel(\n            name='MenuItem',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('name', models.CharField(max_length=255)),\n                ('price', models.DecimalField(decimal_places=2, max_digits=8)),\n                ('description', models.TextField(blank=True)),\n                ('category', models.CharField(max_length=100)),\n                ('prep_time', models.IntegerField(blank=True, help_text='Preparation time in minutes', null=True)),\n                ('available', models.BooleanField(default=True)),\n                ('item_image', models.ImageField(blank=True, null=True, upload_to='menu_items/')),\n                ('created', models.DateTimeField(auto_now_add=True)),\n                ('restaurant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='menu_items', to='restaurants.restaurant')),\n            ],\n            options={\n                'indexes': [models.Index(fields=['restaurant', 'category'], name='restaurants_restaur_741f8f_idx')],\n            },\n        ),\n        migrations.CreateModel(\n            name='RestaurantExternalAPI',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('category', models.CharField(max_length=100)),\n                ('api_url', models.URLField()),\n                ('api_key', models.CharField(blank=True, max_length=255, null=True)),\n                ('restaurant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='external_apis', to='restaurants.restaurant')),\n            ],\n            options={\n                'unique_together': {('restaurant', 'category')},\n            },\n        ),\n    ]\n","size_bytes":4473},"src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"src/pages/restaurant-components/DashboardHeader.tsx":{"content":"import { Button } from \"@/components/ui/button\";\n\ninterface DashboardHeaderProps {\n  restaurantName?: string;\n}\n\nexport default function DashboardHeader({ restaurantName }: DashboardHeaderProps) {\n  return (\n    <header className=\"bg-secondary text-secondary-foreground border-b border-border\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex flex-col lg:flex-row justify-between items-start lg:items-center\">\n        <div>\n          <h1 className=\"text-2xl font-bold mb-2\">{restaurantName || 'Restaurant'} Dashboard</h1>\n          <p className=\"text-secondary-foreground/70\">Manage your restaurant, menu, and orders</p>\n        </div>\n        <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\n          <div className=\"text-right\">\n            <p className=\"text-sm opacity-75\">Status</p>\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\n              <span className=\"text-sm font-medium\">Open</span>\n            </div>\n          </div>\n          <Button className=\"bg-accent text-accent-foreground hover:bg-accent/90\">\n            <i className=\"fas fa-cog mr-2\"></i>Settings\n          </Button>\n        </div>\n      </div>\n    </header>\n  );\n}\n","size_bytes":1260},"ZimFeast/drivers/__init__.py":{"content":"","size_bytes":0},"ZimFeast/orders/migrations/0002_alter_order_driver_alter_order_restaurant.py":{"content":"# Generated by Django 5.2.1 on 2025-10-03 07:12\n\nimport django.db.models.deletion\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('orders', '0001_initial'),\n        ('restaurants', '0001_initial'),\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.AlterField(\n            model_name='order',\n            name='driver',\n            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='driver_orders', to=settings.AUTH_USER_MODEL),\n        ),\n        migrations.AlterField(\n            model_name='order',\n            name='restaurant',\n            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='orders', to='restaurants.restaurant'),\n        ),\n    ]\n","size_bytes":899},"src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"ZimFeast/accounts/models.py":{"content":"from django.db import models\nfrom django.contrib.auth.models import AbstractBaseUser, PermissionsMixin, BaseUserManager\nimport uuid\n\nclass UserManager(BaseUserManager):\n    def create_user(self, email, password=None, **extra):\n        if not email: raise ValueError('Email required')\n        email = self.normalize_email(email)\n        user = self.model(email=email, **extra)\n        user.set_password(password)\n        user.save(using=self._db)\n        return user\n    def create_superuser(self, email, password=None, **extra):\n        extra.setdefault('is_staff', True); extra.setdefault('is_superuser', True)\n        return self.create_user(email, password, **extra)\n\nclass CustomUser(AbstractBaseUser, PermissionsMixin):\n    ROLE_CHOICES = (\n        (\"customer\", \"Customer\"),\n        (\"restaurant\", \"Restaurant\"),\n        (\"driver\", \"Driver\"),\n        (\"admin\", \"Admin\"),\n    )\n    \n    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)\n    email = models.EmailField(unique=True)\n    first_name = models.CharField(max_length=255, blank=True)\n    last_name = models.CharField(max_length=255, blank=True)\n    phone_number = models.CharField(max_length=50, blank=True)\n    role = models.CharField(max_length=30, choices=ROLE_CHOICES, default='customer')\n    is_active = models.BooleanField(default=True)\n    is_staff = models.BooleanField(default=False)\n\n    USERNAME_FIELD = 'email'\n    REQUIRED_FIELDS = []\n\n    objects = UserManager()\n\n    def __str__(self):\n        return self.email\n\nclass Address(models.Model):\n    user = models.ForeignKey(CustomUser, related_name='addresses', on_delete=models.CASCADE)\n    label = models.CharField(max_length=100, default='home')\n    address_text = models.CharField(max_length=255)\n    lat = models.FloatField()\n    lng = models.FloatField()\n    created = models.DateTimeField(auto_now_add=True)\n\n    def __str__(self):\n        return f\"{self.user.email} - {self.label}\"\n\nclass BlacklistedToken(models.Model):\n    token = models.CharField(max_length=255, unique=True)\n    blacklisted_at = models.DateTimeField(auto_now_add=True)\n\n    def __str__(self):\n        return f\"Blacklisted at {self.blacklisted_at}\"","size_bytes":2176},"src/components/Cart.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useLocation } from \"wouter\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Restaurant } from \"@shared/schema\";\nimport { calculateDeliveryFeeFromCoordinates, DEFAULT_DELIVERY_FEE } from \"@shared/deliveryUtils\";\n\ninterface CartItem {\n  id: string;\n  name: string;\n  price: number;\n  quantity: number;\n  restaurantId?: string;\n  restaurantName?: string;\n}\n\ninterface CartProps {\n  isOpen: boolean;\n  onClose: () => void;\n  items: CartItem[];\n  onUpdateQuantity: (id: string, quantity: number) => void;\n  currency: string;\n  userLocation?: {lat: number, lng: number} | null;\n}\n\nexport default function Cart({ isOpen, onClose, items, onUpdateQuantity, currency, userLocation }: CartProps) {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const getCurrencySymbol = (curr: string) => curr === 'USD' ? '$' : 'Z$';\n  \n  // Get unique restaurant IDs from cart items\n  const restaurantIds = Array.from(new Set(items.map(item => item.restaurantId).filter(Boolean) as string[]));\n  \n  // Fetch restaurant data for delivery fee calculation\n  const { data: restaurants } = useQuery<Restaurant[]>({\n    queryKey: ['/api/restaurants'],\n    enabled: restaurantIds.length > 0,\n  });\n  \n  // Calculate delivery fee based on distance to restaurants\n  const getDeliveryFee = (): number => {\n    if (!userLocation || !restaurants || restaurants.length === 0) {\n      return DEFAULT_DELIVERY_FEE; // Default delivery fee when location not available\n    }\n    \n    let maxDeliveryFee = 1.50; // Minimum delivery fee\n    \n    // For each restaurant in the cart, calculate delivery fee and use the highest one\n    restaurantIds.forEach(restaurantId => {\n      const restaurant = restaurants.find(r => r.id === restaurantId);\n      if (restaurant && restaurant.coordinates) {\n        const coords = restaurant.coordinates as {lat: number, lng: number};\n        if (coords.lat && coords.lng) {\n          const fee = calculateDeliveryFeeFromCoordinates(\n            userLocation.lat,\n            userLocation.lng,\n            coords.lat,\n            coords.lng\n          );\n          maxDeliveryFee = Math.max(maxDeliveryFee, fee);\n        }\n      }\n    });\n    \n    return maxDeliveryFee;\n  };\n  \n  const subtotal = items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n  const deliveryFee = getDeliveryFee();\n  const total = subtotal + deliveryFee;\n\n  // Create order mutation\n  const createOrderMutation = useMutation({\n    mutationFn: async () => {\n      if (!userLocation) {\n        throw new Error('Location is required for delivery');\n      }\n\n      // For multiple restaurants, we'll create separate orders for each restaurant\n      // For now, let's handle single restaurant orders (most common case)\n      const firstRestaurantId = restaurantIds[0];\n      if (!firstRestaurantId) {\n        throw new Error('No restaurant selected');\n      }\n\n      const restaurantItems = items.filter(item => item.restaurantId === firstRestaurantId);\n      \n      const orderData = {\n        restaurantId: firstRestaurantId,\n        items: restaurantItems.map(item => ({\n          name: item.name,\n          price: item.price,\n          quantity: item.quantity,\n        })),\n        subtotal: restaurantItems.reduce((sum, item) => sum + (item.price * item.quantity), 0).toString(),\n        deliveryCoordinates: userLocation, // Backend will use this to calculate delivery fee\n        deliveryAddress: 'Current Location', // Could be improved with actual address\n        currency,\n        status: 'pending' as const,\n      };\n\n      const response = await apiRequest('POST', '/api/orders', orderData);\n      return response.json();\n    },\n    onSuccess: (order: any) => {\n      toast({\n        title: \"Order Created\",\n        description: \"Redirecting to payment...\",\n      });\n      \n      // Invalidate orders cache\n      queryClient.invalidateQueries({ queryKey: ['/api/orders'] });\n      \n      // Redirect to checkout with order ID\n      setLocation(`/checkout?orderId=${order.id}`);\n      onClose();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Order Failed\",\n        description: error.message || \"Unable to create order. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleCheckout = () => {\n    if (items.length === 0) return;\n    \n    if (!userLocation) {\n      toast({\n        title: \"Location Required\",\n        description: \"Please enable location access to calculate delivery fee.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (restaurantIds.length > 1) {\n      toast({\n        title: \"Multiple Restaurants\",\n        description: \"Please order from one restaurant at a time.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    createOrderMutation.mutate();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex\">\n      {/* Overlay */}\n      <div \n        className=\"fixed inset-0 bg-black/50\"\n        onClick={onClose}\n      />\n      \n      {/* Sidebar */}\n      <div className=\"ml-auto w-96 bg-white shadow-xl border-l border-border h-full flex flex-col\">\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\n          <h3 className=\"text-xl font-semibold\" data-testid=\"text-cart-title\">Your Cart</h3>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={onClose}\n            data-testid=\"button-close-cart\"\n          >\n            <i className=\"fas fa-times text-xl\"></i>\n          </Button>\n        </div>\n        \n        <div className=\"flex-1 overflow-y-auto p-6\">\n          {items.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <i className=\"fas fa-shopping-cart text-4xl text-muted-foreground mb-4\"></i>\n              <p className=\"text-muted-foreground\" data-testid=\"text-empty-cart\">Your cart is empty</p>\n              <p className=\"text-sm text-muted-foreground mt-2\">Add items from a restaurant to get started</p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {items.map((item) => (\n                <Card key={item.id} className=\"p-4\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <h4 className=\"font-medium\" data-testid={`text-item-name-${item.id}`}>\n                        {item.name}\n                      </h4>\n                      {item.restaurantName && (\n                        <p className=\"text-sm text-muted-foreground\">\n                          {item.restaurantName}\n                        </p>\n                      )}\n                      <p className=\"text-sm font-medium mt-1\" data-testid={`text-item-price-${item.id}`}>\n                        {getCurrencySymbol(currency)}{item.price.toFixed(2)}\n                      </p>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => onUpdateQuantity(item.id, item.quantity - 1)}\n                        data-testid={`button-decrease-${item.id}`}\n                      >\n                        -\n                      </Button>\n                      <span className=\"px-2\" data-testid={`text-quantity-${item.id}`}>\n                        {item.quantity}\n                      </span>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => onUpdateQuantity(item.id, item.quantity + 1)}\n                        data-testid={`button-increase-${item.id}`}\n                      >\n                        +\n                      </Button>\n                    </div>\n                  </div>\n                </Card>\n              ))}\n            </div>\n          )}\n        </div>\n        \n        {items.length > 0 && (\n          <div className=\"border-t border-border p-6\">\n            <div className=\"space-y-2 mb-4\">\n              <div className=\"flex justify-between\">\n                <span>Subtotal</span>\n                <span data-testid=\"text-subtotal\">\n                  {getCurrencySymbol(currency)}{subtotal.toFixed(2)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Delivery Fee</span>\n                <span data-testid=\"text-delivery-fee\">\n                  {getCurrencySymbol(currency)}{deliveryFee.toFixed(2)}\n                </span>\n              </div>\n              <div className=\"flex justify-between font-semibold text-lg border-t pt-2\">\n                <span>Total</span>\n                <span data-testid=\"text-total\">\n                  {getCurrencySymbol(currency)}{total.toFixed(2)}\n                </span>\n              </div>\n            </div>\n            <Button \n              className=\"w-full\" \n              onClick={handleCheckout}\n              disabled={createOrderMutation.isPending}\n              data-testid=\"button-checkout\"\n            >\n              {createOrderMutation.isPending \n                ? 'Creating Order...' \n                : `Proceed to Checkout (${getCurrencySymbol(currency)}${total.toFixed(2)})`\n              }\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":9648},"ZimFeast/accounts/serializers.py":{"content":"from rest_framework import serializers\nfrom .models import CustomUser\n\nclass UserSerializer(serializers.ModelSerializer):\n    password = serializers.CharField(write_only=True)\n\n    class Meta:\n        model = CustomUser\n        fields = [\"id\", \"email\", \"password\", \"first_name\", \"last_name\", 'phone_number', \"role\"]\n\n    def create(self, validated_data):\n        password = validated_data.pop(\"password\")\n        user = CustomUser(**validated_data)\n        user.set_password(password)\n        user.save()\n\n        return user","size_bytes":525},"ZimFeast/payments/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass PaymentsConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'payments'\n","size_bytes":148},"src/pages/business-components/InfoSection.tsx":{"content":"import { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\n\nexport default function InfoSection() {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <i className=\"fas fa-store text-primary\"></i>\n            Restaurant Partners\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <ul className=\"space-y-2 text-sm\">\n            {[\n              \"Reach thousands of hungry customers\",\n              \"Real-time order management\",\n              \"Secure PayNow payment processing\",\n              \"Professional marketing support\",\n            ].map((text, i) => (\n              <li key={i} className=\"flex items-center gap-2\">\n                <i className=\"fas fa-check text-green-500\"></i>{text}\n              </li>\n            ))}\n          </ul>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <i className=\"fas fa-motorcycle text-primary\"></i>\n            Delivery Drivers\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <ul className=\"space-y-2 text-sm\">\n            {[\n              \"Flexible working hours\",\n              \"Weekly cash payments\",\n              \"GPS tracking and navigation\",\n              \"24/7 support team\",\n            ].map((text, i) => (\n              <li key={i} className=\"flex items-center gap-2\">\n                <i className=\"fas fa-check text-green-500\"></i>{text}\n              </li>\n            ))}\n          </ul>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":1701},"src/components/RestaurantCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport type { Restaurant } from \"@shared/schema\";\nimport { calculateDeliveryFeeFromCoordinates, DEFAULT_DELIVERY_FEE } from \"@shared/deliveryUtils\";\n\ninterface RestaurantCardProps {\n  restaurant: Restaurant;\n  currency: string;\n  onAddToCart: (item: any) => void;\n  userLocation?: {lat: number, lng: number} | null;\n}\n\nexport default function RestaurantCard({ restaurant, currency, onAddToCart, userLocation }: RestaurantCardProps) {\n  const getCurrencySymbol = (curr: string) => curr === 'USD' ? '$' : 'Z$';\n  \n  // Calculate delivery fee based on distance\n  const getDeliveryFee = (): string => {\n    if (!userLocation || !restaurant.coordinates) {\n      return DEFAULT_DELIVERY_FEE.toFixed(2); // Default delivery fee when location not available\n    }\n    \n    const coords = restaurant.coordinates as {lat: number, lng: number};\n    if (!coords.lat || !coords.lng) {\n      return DEFAULT_DELIVERY_FEE.toFixed(2); // Default when restaurant coordinates invalid\n    }\n    \n    const fee = calculateDeliveryFeeFromCoordinates(\n      userLocation.lat,\n      userLocation.lng,\n      coords.lat,\n      coords.lng\n    );\n    \n    return fee.toFixed(2);\n  };\n  \n  const handleViewMenu = () => {\n    // In a real app, this would navigate to restaurant menu page\n    // For now, we'll simulate adding a sample item to cart\n    const coords = restaurant.coordinates as {lat: number, lng: number} | undefined;\n    onAddToCart({\n      id: `${restaurant.id}-sample`,\n      name: \"Sample Dish\",\n      price: parseFloat(getDeliveryFee()),\n      restaurantId: restaurant.id,\n      restaurantName: restaurant.name,\n      restaurantLat: coords?.lat,\n      restaurantLng: coords?.lng\n    });\n  };\n\n  return (\n    <Card className=\"overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer\">\n      <div className=\"w-full h-48 bg-gray-200 flex items-center justify-center\">\n        {restaurant.imageUrl ? (\n          <img \n            src={restaurant.imageUrl} \n            alt={restaurant.name}\n            className=\"w-full h-full object-cover\"\n          />\n        ) : (\n          <i className=\"fas fa-utensils text-4xl text-gray-400\"></i>\n        )}\n      </div>\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h3 className=\"font-semibold text-lg\" data-testid={`text-restaurant-name-${restaurant.id}`}>\n            {restaurant.name}\n          </h3>\n          <Badge className=\"bg-primary text-primary-foreground\">\n            <i className=\"fas fa-star mr-1\"></i>\n            {restaurant.rating || '4.5'}\n          </Badge>\n        </div>\n        <p className=\"text-muted-foreground text-sm mb-2\" data-testid={`text-cuisine-${restaurant.id}`}>\n          {restaurant.cuisineType.charAt(0).toUpperCase() + restaurant.cuisineType.slice(1).replace('_', ' ')} â€¢ {restaurant.description || 'Great food'}\n        </p>\n        <div className=\"flex items-center justify-between\">\n          <span className=\"text-sm text-muted-foreground\">\n            {restaurant.estimatedDeliveryTime || 30}-{(restaurant.estimatedDeliveryTime || 30) + 10} min\n          </span>\n          <span className=\"text-sm font-medium\" data-testid={`text-delivery-fee-${restaurant.id}`}>\n            {getCurrencySymbol(currency)}{getDeliveryFee()} delivery\n          </span>\n        </div>\n        <Button \n          className=\"w-full mt-3\"\n          onClick={handleViewMenu}\n          data-testid={`button-view-menu-${restaurant.id}`}\n        >\n          View Menu\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":3710},"ZimFeast/orders/migrations/__init__.py":{"content":"","size_bytes":0},"src/hooks/useWebSocket.ts":{"content":"import { useEffect, useRef } from 'react';\nimport { useAuth } from './useAuth';\n\nexport function useWebSocket(url: string, onMessage: (data: any) => void) {\n  const { user } = useAuth();\n  const wsRef = useRef<WebSocket | null>(null);\n\n  useEffect(() => {\n    if (!user) return;\n\n    const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n    // Fix WebSocket URL construction to handle undefined port\n    let host = window.location.host;\n    \n    // Handle cases where port is undefined or malformed\n    if (host.includes(':undefined') || host.endsWith(':undefined')) {\n      host = window.location.hostname;\n    }\n    \n    // Ensure we have a port for WebSocket connection\n    if (!host.includes(':')) {\n      if (window.location.hostname === 'localhost') {\n        host = `${window.location.hostname}:5000`;\n      } else {\n        // For production/replit environment, use current port or default to 443/80\n        const port = window.location.port || (protocol === \"wss:\" ? \"443\" : \"80\");\n        host = `${window.location.hostname}:${port}`;\n      }\n    }\n    \n    const wsUrl = `${protocol}//${host}${url}`;\n    \n    console.log('Connecting to WebSocket:', wsUrl); // Debug log\n    const ws = new WebSocket(wsUrl);\n    wsRef.current = ws;\n\n    ws.onopen = () => {\n      console.log('WebSocket connected');\n      // Register user for real-time updates\n      ws.send(JSON.stringify({\n        type: 'REGISTER',\n        userId: user.id\n      }));\n    };\n\n    ws.onmessage = (event) => {\n      try {\n        const data = JSON.parse(event.data);\n        onMessage(data);\n      } catch (error) {\n        console.error('Error parsing WebSocket message:', error);\n      }\n    };\n\n    ws.onclose = () => {\n      console.log('WebSocket disconnected');\n    };\n\n    ws.onerror = (error) => {\n      console.error('WebSocket error:', error);\n    };\n\n    return () => {\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n    };\n  }, [user, url, onMessage]);\n\n  return wsRef.current;\n}\n","size_bytes":2008},"src/pages/driver-components/driverApi.ts":{"content":"import { apiRequest } from \"./apiRequest\";\n\nexport async function getDriverStatus(): Promise<{ is_online: boolean }> {\n  return apiRequest<{ is_online: boolean }>(\"GET\", \"/api/drivers/status/\");\n}\n\nexport async function toggleDriverStatus(): Promise<{ is_online: boolean }> {\n  return apiRequest<{ is_online: boolean }>(\"PUT\", \"/api/drivers/status/toggle/\");\n}\n\nexport async function getActiveDriverOrders(): Promise<\n  { id: string; status: string; fee: number; location: string | null }[]> {\n  return apiRequest(\"GET\", \"/api/drivers/active/orders/\");\n}","size_bytes":554},"ZimFeast/restaurants/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"src/pages/customer-components/CartComponent.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { CartItem } from \"./types\";\n\n// Add these for Google Places Autocomplete\nimport usePlacesAutocomplete, {\n  getGeocode,\n  getLatLng,\n} from \"use-places-autocomplete\";\nimport useOnclickOutside from \"react-cool-onclickoutside\";\n\ninterface CartComponentProps {\n  isOpen: boolean;\n  onClose: () => void;\n  items: CartItem[];\n  setItems: React.Dispatch<React.SetStateAction<CartItem[]>>;\n  currency: string;\n  userLocation: { lat: number; lng: number } | null;\n}\n\nexport default function CartComponent({\n  isOpen,\n  onClose,\n  items,\n  setItems,\n  currency,\n  userLocation,\n}: CartComponentProps) {\n  const [, setLocation] = useLocation();\n  const [loading, setLoading] = useState(false);\n\n  const [method, setMethod] = useState<\"delivery\" | \"collection\">(\"collection\");\n  const [deliveryCoords, setDeliveryCoords] = useState<{ lat: number; lng: number } | null>(null);\n\n  // Initialize Google Places Autocomplete\n  const {\n    ready,\n    value,\n    setValue,\n    suggestions: { status, data },\n    clearSuggestions,\n  } = usePlacesAutocomplete({\n    requestOptions: {\n      /* optional: bounds, location bias */\n    },\n    debounce: 300,\n  });\n\n  const ref = useOnclickOutside(() => {\n    clearSuggestions();\n  });\n\n  if (!isOpen) return null;\n\n  const handleCheckout = async () => {\n    if (items.length === 0) return;\n    if (method === \"delivery\" && !deliveryCoords) {\n      alert(\"Please select a delivery address\");\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        alert(\"You must be logged in to place an order\");\n        return;\n      }\n\n      const firstItem = items[0];\n      if (!firstItem.restaurantId || !firstItem.restaurantLat || !firstItem.restaurantLng) {\n        alert(\"Invalid restaurant data in cart. Please try again.\");\n        return;\n      }\n\n      const payload = {\n        restaurant: firstItem.restaurantId,\n        method,\n        restaurant_lat: firstItem.restaurantLat,\n        restaurant_lng: firstItem.restaurantLng,\n        total_fee: items.reduce((acc, item) => acc + item.price * item.quantity, 0),\n        tip: 5.0,\n        items: items.map((item) => ({\n          menu_item_id: item.id,\n          quantity: item.quantity,\n          price: item.price,\n        })),\n        delivery_lat: method === \"delivery\" ? deliveryCoords?.lat : null,\n        delivery_lng: method === \"delivery\" ? deliveryCoords?.lng : null,\n      };\n\n      const res = await fetch(\"/api/orders/create/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!res.ok) {\n        const errorText = await res.text();\n        throw new Error(errorText);\n      }\n\n      const data = await res.json();\n      setLocation(`/checkout?orderId=${data.order.id}`);\n      onClose();\n    } catch (err: any) {\n      console.error(\"Checkout failed:\", err.message);\n      alert(\"Failed to place order: \" + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSelectAddress = async (description: string) => {\n    setValue(description, false);\n    clearSuggestions();\n    try {\n      const results = await getGeocode({ address: description });\n      const { lat, lng } = await getLatLng(results[0]);\n      setDeliveryCoords({ lat, lng });\n    } catch (error) {\n      console.error(\"Error fetching geocode: \", error);\n    }\n  };\n\n  const handleQuantityChange = (id: string, quantity: number) => {\n    if (quantity === 0) {\n      setItems((prev) => prev.filter((item) => item.id !== id));\n    } else {\n      setItems((prev) =>\n        prev.map((item) => (item.id === id ? { ...item, quantity } : item))\n      );\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex justify-end bg-black/40\">\n      <div className=\"bg-white w-96 h-full p-6 overflow-y-auto relative shadow-xl\">\n        <h2 className=\"text-xl font-bold mb-4\">Your Cart</h2>\n\n        {items.length === 0 ? (\n          <p className=\"text-muted-foreground\">Your cart is empty</p>\n        ) : (\n          <ul className=\"space-y-3\">\n            {items.map((item) => (\n              <li key={item.id} className=\"flex justify-between items-center\">\n                <div>\n                  <p className=\"font-medium\">{item.name}</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {currency} {(item.price * item.quantity).toFixed(2)}\n                  </p>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Button\n                    size=\"sm\"\n                    onClick={() =>\n                      handleQuantityChange(item.id, item.quantity - 1)\n                    }\n                  >\n                    -\n                  </Button>\n                  <span>{item.quantity}</span>\n                  <Button\n                    size=\"sm\"\n                    onClick={() =>\n                      handleQuantityChange(item.id, item.quantity + 1)\n                    }\n                  >\n                    +\n                  </Button>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n\n        {/* Delivery / Collection Section */}\n        <div className=\"mt-6\">\n          <p className=\"font-medium mb-2\">Choose Method:</p>\n          <div className=\"flex gap-4 mb-2\">\n            <label className=\"flex items-center gap-2\">\n              <input\n                type=\"radio\"\n                value=\"delivery\"\n                checked={method === \"delivery\"}\n                onChange={() => setMethod(\"delivery\")}\n              />\n              Delivery\n            </label>\n            <label className=\"flex items-center gap-2\">\n              <input\n                type=\"radio\"\n                value=\"collection\"\n                checked={method === \"collection\"}\n                onChange={() => setMethod(\"collection\")}\n              />\n              Collection\n            </label>\n          </div>\n\n          {method === \"delivery\" && (\n            <div ref={ref} className=\"mt-2\">\n              <input\n                type=\"text\"\n                placeholder=\"Enter delivery address\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n                disabled={!ready}\n                className=\"w-full border p-2 rounded mb-2\"\n              />\n              {status === \"OK\" && (\n                <ul className=\"border rounded max-h-40 overflow-y-auto\">\n                  {data.map(({ place_id, description }) => (\n                    <li\n                      key={place_id}\n                      className=\"p-2 hover:bg-gray-200 cursor-pointer\"\n                      onClick={() => handleSelectAddress(description)}\n                    >\n                      {description}\n                    </li>\n                  ))}\n                </ul>\n              )}\n\n              {deliveryCoords && (\n                <div className=\"border h-40 w-full mt-2\">\n                  <iframe\n                    width=\"100%\"\n                    height=\"100%\"\n                    loading=\"lazy\"\n                    referrerPolicy=\"no-referrer-when-downgrade\"\n                    src={`https://www.google.com/maps?q=${deliveryCoords.lat},${deliveryCoords.lng}&hl=es;z=14&output=embed`}\n                  ></iframe>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        <Button\n          onClick={handleCheckout}\n          className=\"mt-6 w-full\"\n          disabled={items.length === 0 || loading}\n        >\n          {loading ? \"Placing order...\" : \"Proceed to Checkout\"}\n        </Button>\n\n        <Button\n          onClick={onClose}\n          variant=\"ghost\"\n          className=\"absolute top-4 right-4 text-lg\"\n        >\n          âœ•\n        </Button>\n      </div>\n    </div>\n  );\n}\n","size_bytes":8029},"src/components/Navbar.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { useLocation } from \"wouter\";\n\nexport default function Navbar() {\n  const [location, setLocation] = useLocation();\n\n  const navigationItems = [\n    { path: '/customer', label: 'Customer App', icon: 'fas fa-shopping-bag' },\n    { path: '/restaurant', label: 'Restaurant Dashboard', icon: 'fas fa-store' },\n    { path: '/driver', label: 'Driver App', icon: 'fas fa-truck' },\n  ];\n\n  return (\n    <nav className=\"bg-white border-b border-border sticky top-0 z-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between h-16\">\n          <div className=\"flex items-center\">\n            <div className=\"flex-shrink-0\">\n              <h1 \n                className=\"text-2xl font-bold text-primary cursor-pointer\"\n                onClick={() => setLocation('/')}\n                data-testid=\"logo-zimfeast\"\n              >\n                ZimFeast\n              </h1>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            {navigationItems.map((item) => (\n              <Button\n                key={item.path}\n                variant={location === item.path ? \"default\" : \"ghost\"}\n                onClick={() => setLocation(item.path)}\n                className=\"text-sm font-medium\"\n                data-testid={`nav-${item.path.slice(1)}`}\n              >\n                <i className={`${item.icon} mr-2`}></i>\n                <span className=\"hidden sm:inline\">{item.label}</span>\n              </Button>\n            ))}\n            <Button\n              variant=\"outline\"\n              onClick={async () => {\n                const token = localStorage.getItem(\"token\");\n                if (!token) return window.location.href = \"/home\";\n\n                try {\n                  const res = await fetch(\"http://127.0.0.1:8000/api/accounts/logout/\", {\n                    method: \"POST\",\n                    headers: {\n                      \"Content-Type\": \"application/json\",\n                      Authorization: `Bearer ${token}`,\n                    },\n                  });\n\n                  if (!res.ok) throw new Error(\"Logout failed\");\n\n                  // Remove token from localStorage\n                  localStorage.removeItem(\"token\");\n\n                  // Redirect to /home\n                  window.location.href = \"/home\";\n                } catch (err: any) {\n                  console.error(err);\n                  alert(err.message || \"Logout failed\");\n                }\n              }}>\n              <i className=\"fas fa-sign-out-alt mr-2\"></i>\n              <span className=\"hidden sm:inline\">Logout</span>\n            </Button>\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n}\n","size_bytes":2770},"src/pages/checkout-components/types.ts":{"content":"export interface Order {\n  id: string;\n  total: string | number;\n  currency: string;\n  items?: { name: string; quantity: number; price: number }[];\n}\n","size_bytes":150},"ZimFeast/accounts/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"ZimFeast/drivers/utils.py":{"content":"# drivers/utils.py\nfrom django.conf import settings\nfrom drivers.models import Driver\nfrom orders.models import Order\nimport googlemaps\n\ngmaps = googlemaps.Client(key=settings.GOOGLE_MAPS_API_KEY)\n\ndef assign_driver(order):\n    \"\"\"\n    Assign the nearest available driver to a given order.\n    Criteria:\n    - Driver is online\n    - Driver has no active orders (not delivering)\n    - Nearest to the restaurant(s) location\n    Returns the Driver object or None if no driver is available.\n    \"\"\"\n    restaurant_coords = (order.delivery_address_lat, order.delivery_address_lng)\n\n    # Get all drivers who are online and not currently delivering an order\n    active_order_driver_ids = Order.objects.filter(status__in=[\"pending\", \"accepted\", \"out_for_delivery\"]).values_list(\"driver_id\", flat=True)\n    available_drivers = Driver.objects.filter(is_online=True).exclude(id__in=active_order_driver_ids)\n\n    if not available_drivers.exists():\n        return None\n\n    nearest_driver = None\n    shortest_distance = float('inf')\n\n    for driver in available_drivers:\n        driver_coords = (driver.lat, driver.lng)\n        # Calculate driving distance using Google Maps Distance Matrix API\n        distance_result = gmaps.distance_matrix(origins=[driver_coords],\n                                                destinations=[restaurant_coords],\n                                                mode=\"driving\")\n        try:\n            distance_meters = distance_result[\"rows\"][0][\"elements\"][0][\"distance\"][\"value\"]\n        except (KeyError, IndexError):\n            continue\n\n        if distance_meters < shortest_distance:\n            shortest_distance = distance_meters\n            nearest_driver = driver\n\n    return nearest_driver\n\n#send order to driver\n","size_bytes":1751},"src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"src/pages/driver-components/EarningsOverview.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n\ninterface EarningsOverviewProps {\n  earnings: {\n    today: number;\n    week: number;\n    month: number;\n    total: number;\n  };\n}\n\nexport default function EarningsOverview({ earnings }: EarningsOverviewProps) {\n  const weekData = [\n    { day: 'Mon', amount: earnings.week / 7, height: 12 },\n    { day: 'Tue', amount: earnings.week / 7, height: 16 },\n    { day: 'Wed', amount: earnings.week / 7, height: 10 },\n    { day: 'Thu', amount: earnings.week / 7, height: 14 },\n    { day: 'Fri', amount: earnings.week / 7, height: 18 },\n    { day: 'Sat', amount: 0, height: 4 },\n    { day: 'Sun', amount: 0, height: 4 },\n  ];\n\n  return (\n    <Card className=\"mt-8\">\n      <CardHeader>\n        <CardTitle>This Week's Earnings</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-7 gap-4\">\n          {weekData.map((data, index) => (\n            <div key={index} className=\"text-center\">\n              <p className=\"text-xs text-muted-foreground mb-2\">{data.day}</p>\n              <div className=\"bg-muted h-20 rounded-lg flex items-end justify-center\">\n                <div className={`w-4 rounded-t bg-primary`} style={{ height: `${data.height * 4}px` }} />\n              </div>\n              <p className=\"text-sm font-medium mt-2\">${data.amount.toFixed(2)}</p>\n            </div>\n          ))}\n        </div>\n        <div className=\"mt-6 text-center text-sm text-muted-foreground\">\n          Total earnings this week: <span className=\"font-medium text-foreground\">${earnings.week.toFixed(2)}</span>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1665},"src/pages/customer-components/TopRestaurants.tsx":{"content":"import RestaurantCard from \"@/components/RestaurantCard\";\nimport { Restaurant } from \"./types\";\n\ninterface RestaurantGridProps {\n  restaurants: Restaurant[];\n  currency: string;\n  addToCart: (item: any) => void;\n  userLocation: { lat: number; lng: number } | null;\n}\n\nexport default function TopRestaurant({ restaurants, currency, addToCart, userLocation }: RestaurantGridProps) {\n  if (!restaurants || restaurants.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <i className=\"fas fa-search text-4xl text-muted-foreground mb-4\"></i>\n        <p className=\"text-muted-foreground\">No restaurants found</p>\n      </div>\n    );\n  }\n\n  // Split into rows of 5\n  const topRow = restaurants.slice(0, 5);\n  const bottomRow = restaurants.slice(5, 10);\n\n  const renderRow = (row: typeof topRow) => (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-6\">\n      {row.map((r) => (\n        <RestaurantCard\n          key={r.id}\n          restaurant={{\n            ...r,\n            image: r.image ?? \"https://cdn.tictuk.com/feb97cdd-a398-f792-4af6-90ac45d768da/assets/logoDesktopHeader.svg\", // fallback if no image\n          }}\n          currency={currency}\n          onAddToCart={addToCart}\n          userLocation={userLocation}\n        />\n      ))}\n    </div>\n  );\n\n  return (\n    <section className=\"py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <h2 className=\"text-2xl font-bold mb-6\">Top Restaurants</h2>\n        {renderRow(topRow)}\n        {renderRow(bottomRow)}\n      </div>\n    </section>\n  );\n}\n","size_bytes":1593},"ZimFeast/payments/receipt_email.py":{"content":"import logging\nfrom django.conf import settings\nfrom sendgrid import SendGridAPIClient\nfrom sendgrid.helpers.mail import Mail, Email, To, Content\n\nlogger = logging.getLogger(__name__)\n\nSENDGRID_API_KEY = getattr(settings, \"SENDGRID_API_KEY\", None)\nsendgrid_client = None\n\nif SENDGRID_API_KEY:\n    sendgrid_client = SendGridAPIClient(api_key=SENDGRID_API_KEY)\nelse:\n    logger.warning(\"SENDGRID_API_KEY not set - email functionality will be disabled\")\n\n\ndef send_order_receipt(to_email: str, subject: str, html_content: str, text_content: str = None, from_email: str = \"noreply@zimfeast.co.zw\") -> bool:\n    \"\"\"\n    Send an email using SendGrid.\n    Returns True if sent successfully, False otherwise.\n    \"\"\"\n    if not sendgrid_client:\n        logger.warning(\"Email service not configured - skipping email send\")\n        return False\n\n    try:\n        mail = Mail(\n            from_email=Email(from_email),\n            to_emails=To(to_email),\n            subject=subject,\n            html_content=Content(\"text/html\", html_content)\n        )\n        if text_content:\n            mail.add_content(Content(\"text/plain\", text_content))\n\n        response = sendgrid_client.send(mail)\n        if 200 <= response.status_code < 300:\n            logger.info(\"Email sent successfully to %s\", to_email)\n            return True\n        else:\n            logger.error(\"Failed to send email. Status code: %s, Body: %s\", response.status_code, response.body)\n            return False\n\n    except Exception as e:\n        logger.exception(\"SendGrid email error: %s\", e)\n        return False\n\n\ndef generate_order_receipt_html(order: dict, restaurant: dict, receipt: dict) -> str:\n    \"\"\"\n    Generate HTML receipt for an order.\n    `order` is a dict with items, totals, delivery info.\n    `restaurant` is a dict with restaurant info.\n    `receipt` can include confirmationNumber, estimated times.\n    \"\"\"\n    items = order.get(\"items\", receipt.get(\"orderDetails\", {}).get(\"items\", []))\n    items_html = \"\".join([\n        f\"\"\"\n        <tr>\n            <td style=\"padding: 8px; border-bottom: 1px solid #eee;\">{item['name']}</td>\n            <td style=\"padding: 8px; border-bottom: 1px solid #eee; text-align:center;\">{item['quantity']}</td>\n            <td style=\"padding: 8px; border-bottom: 1px solid #eee; text-align:right;\">{order['currency']} {item['price']}</td>\n            <td style=\"padding: 8px; border-bottom: 1px solid #eee; text-align:right;\">{order['currency']} {float(item['price']) * int(item['quantity']):.2f}</td>\n        </tr>\n        \"\"\"\n        for item in items\n    ])\n\n    return f\"\"\"\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <style>\n        body {{ font-family: Arial, sans-serif; line-height: 1.6; color: #333; }}\n        .container {{ max-width: 600px; margin: 0 auto; padding: 20px; }}\n        .header {{ background: #2563eb; color: white; padding: 20px; text-align: center; }}\n        .content {{ padding: 20px; background: #f9f9f9; }}\n        .receipt-box {{ background: white; padding: 20px; border-radius: 8px; margin: 20px 0; }}\n        table {{ width: 100%; border-collapse: collapse; }}\n        th {{ background: #f3f4f6; padding: 12px; text-align: left; border-bottom: 2px solid #ddd; }}\n        .total-row {{ font-weight: bold; background: #f9f9f9; }}\n        .footer {{ text-align: center; padding: 20px; color: #666; font-size: 14px; }}\n      </style>\n    </head>\n    <body>\n      <div class=\"container\">\n        <div class=\"header\">\n          <h1>ðŸ½ï¸ ZimFeast Order Receipt</h1>\n          <p>Thank you for your order!</p>\n        </div>\n        \n        <div class=\"content\">\n          <div class=\"receipt-box\">\n            <h2>Order Details</h2>\n            <p><strong>Order ID:</strong> #{order['id'][-8:].upper()}</p>\n            <p><strong>Restaurant:</strong> {restaurant.get('name')}</p>\n            <p><strong>External Order ID:</strong> {order.get('externalOrderId', 'N/A')}</p>\n            <p><strong>Confirmation Number:</strong> {receipt.get('confirmationNumber', order['id'][-6:].upper())}</p>\n            <p><strong>Order Date:</strong> {order.get('createdAt')}</p>\n            <p><strong>Delivery Address:</strong> {order.get('deliveryAddress')}</p>\n            <p><strong>Phone:</strong> {order.get('customerPhone')}</p>\n          </div>\n\n          <div class=\"receipt-box\">\n            <h3>Items Ordered</h3>\n            <table>\n              <thead>\n                <tr>\n                  <th>Item</th>\n                  <th style=\"text-align:center;\">Qty</th>\n                  <th style=\"text-align:right;\">Price</th>\n                  <th style=\"text-align:right;\">Total</th>\n                </tr>\n              </thead>\n              <tbody>\n                {items_html}\n                <tr class=\"total-row\">\n                  <td colspan=\"3\" style=\"text-align:right;\">Subtotal:</td>\n                  <td style=\"text-align:right;\">{order['currency']} {order['subtotal']}</td>\n                </tr>\n                <tr class=\"total-row\">\n                  <td colspan=\"3\" style=\"text-align:right;\">Delivery Fee:</td>\n                  <td style=\"text-align:right;\">{order['currency']} {order['deliveryFee']}</td>\n                </tr>\n                <tr class=\"total-row\" style=\"font-size:18px; background:#e5e7eb;\">\n                  <td colspan=\"3\" style=\"text-align:right;\">Total:</td>\n                  <td style=\"text-align:right;\">{order['currency']} {order['total']}</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        <div class=\"footer\">\n          <p>Thank you for choosing ZimFeast!</p>\n          <p>Track your order in the app or contact the restaurant directly if needed.</p>\n        </div>\n      </div>\n    </body>\n    </html>\n    \"\"\"\n\n\ndef send_order_receipt(customer_email: str, order: dict, restaurant: dict, receipt: dict) -> bool:\n    \"\"\"\n    Generates the receipt HTML and sends email to customer.\n    \"\"\"\n    html_content = generate_order_receipt_html(order, restaurant, receipt)\n    text_content = f\"\"\"\nOrder Confirmation\n\nOrder ID: #{order['id'][-8:].upper()}\nRestaurant: {restaurant.get('name')}\nTotal: {order['currency']} {order['total']}\nDelivery Address: {order.get('deliveryAddress')}\n\nThank you for your order with ZimFeast!\nTrack your order in the app for real-time updates.\n    \"\"\".strip()\n\n    return send_order_receipt(\n        to_email=customer_email,\n        subject=f\"Order Confirmation - {restaurant.get('name')} - Order #{order['id'][-8:].upper()}\",\n        html_content=html_content,\n        text_content=text_content\n    )\n","size_bytes":6577},"ZimFeast/drivers/migrations/0002_alter_driver_vehicle_details.py":{"content":"# Generated by Django 5.2.1 on 2025-10-07 07:40\n\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('drivers', '0001_initial'),\n    ]\n\n    operations = [\n        migrations.AlterField(\n            model_name='driver',\n            name='vehicle_details',\n            field=models.JSONField(),\n        ),\n    ]\n","size_bytes":371},"src/pages/business-components/global.d.ts":{"content":"interface Window {\n  google: any;\n}\n","size_bytes":36},"ZimFeast/orders/migrations/0004_order_lat_order_lng.py":{"content":"# Generated by Django 5.2.1 on 2025-10-07 10:23\n\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('orders', '0003_orderitem_order'),\n    ]\n\n    operations = [\n        migrations.AddField(\n            model_name='order',\n            name='lat',\n            field=models.FloatField(blank=True, null=True),\n        ),\n        migrations.AddField(\n            model_name='order',\n            name='lng',\n            field=models.FloatField(blank=True, null=True),\n        ),\n    ]\n","size_bytes":541},"shared/geocoding.ts":{"content":"// Shared geocoding utilities for converting addresses to coordinates\n// Uses Google Maps Geocoding API\n\nexport interface Coordinates {\n  lat: number;\n  lng: number;\n}\n\nexport interface GeocodeResult {\n  coordinates: Coordinates;\n  formattedAddress: string;\n}\n\nexport async function geocodeAddress(address: string, apiKey: string): Promise<GeocodeResult | null> {\n  try {\n    const encodedAddress = encodeURIComponent(address);\n    const url = `https://maps.googleapis.com/maps/api/geocode/json?address=${encodedAddress}&key=${apiKey}`;\n    \n    const response = await fetch(url);\n    const data = await response.json();\n    \n    if (data.status === 'OK' && data.results && data.results.length > 0) {\n      const result = data.results[0];\n      return {\n        coordinates: {\n          lat: result.geometry.location.lat,\n          lng: result.geometry.location.lng,\n        },\n        formattedAddress: result.formatted_address,\n      };\n    }\n    \n    console.error('Geocoding failed:', data.status, data.error_message);\n    return null;\n  } catch (error) {\n    console.error('Geocoding error:', error);\n    return null;\n  }\n}\n\n// Reverse geocoding - convert coordinates to address\nexport async function reverseGeocode(lat: number, lng: number, apiKey: string): Promise<string | null> {\n  try {\n    const url = `https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&key=${apiKey}`;\n    \n    const response = await fetch(url);\n    const data = await response.json();\n    \n    if (data.status === 'OK' && data.results && data.results.length > 0) {\n      return data.results[0].formatted_address;\n    }\n    \n    console.error('Reverse geocoding failed:', data.status, data.error_message);\n    return null;\n  } catch (error) {\n    console.error('Reverse geocoding error:', error);\n    return null;\n  }\n}","size_bytes":1818},"src/pages/customer-components/QuickFilters.tsx":{"content":"import { Button } from \"@/components/ui/button\";\n\ninterface QuickFiltersProps {\n  selectedCuisine: string;\n  setSelectedCuisine: (value: string) => void;\n}\n\nexport default function QuickFilters({ selectedCuisine, setSelectedCuisine }: QuickFiltersProps) {\n  return (\n    <section className=\"bg-white border-b border-border\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n        <div className=\"flex space-x-4 overflow-x-auto\">\n          <Button variant={selectedCuisine === \"\" ? \"default\" : \"outline\"} onClick={() => setSelectedCuisine(\"\")}>\n            <i className=\"fas fa-utensils mr-2\"></i>All Restaurants\n          </Button>\n          <Button variant={selectedCuisine === \"fast_food\" ? \"default\" : \"outline\"} onClick={() => setSelectedCuisine(\"fast_food\")}>\n            <i className=\"fas fa-pizza-slice mr-2\"></i>Fast Food\n          </Button>\n          <Button variant={selectedCuisine === \"traditional\" ? \"default\" : \"outline\"} onClick={() => setSelectedCuisine(\"traditional\")}>\n            <i className=\"fas fa-leaf mr-2\"></i>Traditional\n          </Button>\n          <Button variant={selectedCuisine === \"breakfast\" ? \"default\" : \"outline\"} onClick={() => setSelectedCuisine(\"breakfast\")}>\n            <i className=\"fas fa-coffee mr-2\"></i>Breakfast\n          </Button>\n          <Button variant={selectedCuisine === \"pizza\" ? \"default\" : \"outline\"} onClick={() => setSelectedCuisine(\"pizza\")}>\n            <i className=\"fas fa-coffee mr-2\"></i>Pizza\n          </Button>\n          <Button variant={selectedCuisine === \"chinese\" ? \"default\" : \"outline\"} onClick={() => setSelectedCuisine(\"chinese\")}>\n            <i className=\"fas fa-coffee mr-2\"></i>Chinese\n          </Button>\n          <Button variant={selectedCuisine === \"Indian\" ? \"default\" : \"outline\"} onClick={() => setSelectedCuisine(\"Indian\")}>\n            <i className=\"fas fa-coffee mr-2\"></i>Indian\n          </Button>\n          <Button variant={selectedCuisine === \"lunch_pack\" ? \"default\" : \"outline\"} onClick={() => setSelectedCuisine(\"lunch_pack\")}>\n            <i className=\"fas fa-coffee mr-2\"></i>Lunch Pack\n          </Button>\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":2179},"ZimFeast/accounts/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass AccountsConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'accounts'\n","size_bytes":148},"src/pages/BusinessHub.tsx":{"content":"import { useAuth } from \"@/hooks/useAuth\";\nimport { useState } from \"react\";\nimport SignInRequired from \"./business-components/SignInRequired\";\nimport Header from \"./business-components/Header\";\nimport InfoSection from \"./business-components/InfoSection\";\nimport RestaurantForm from \"./business-components/RestaurantForm\";\nimport DriverForm from \"./business-components/DriverForm\";\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\";\n\nexport default function BusinessHub() {\n  const { user, isAuthenticated } = useAuth();\n  const [activeTab, setActiveTab] = useState(\"restaurant\");\n\n  if (!isAuthenticated) return <SignInRequired />;\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header name={user?.first_name} />\n      <div className=\"max-w-4xl mx-auto px-4 py-12\">\n        <InfoSection />\n\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"restaurant\"><i className=\"fas fa-store mr-2\" />Restaurant</TabsTrigger>\n            <TabsTrigger value=\"driver\"><i className=\"fas fa-motorcycle mr-2\" />Driver</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"restaurant\"><RestaurantForm /></TabsContent>\n          <TabsContent value=\"driver\"><DriverForm /></TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n","size_bytes":1379},"ZimFeast/payments/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.1 on 2025-10-01 09:18\n\nimport django.db.models.deletion\nfrom decimal import Decimal\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        ('orders', '0001_initial'),\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='FeastVoucher',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('balance', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('updated_at', models.DateTimeField(auto_now=True)),\n                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='feast_vouchers', to=settings.AUTH_USER_MODEL)),\n            ],\n        ),\n        migrations.CreateModel(\n            name='Payment',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('reference', models.CharField(max_length=100, unique=True)),\n                ('amount', models.DecimalField(decimal_places=2, max_digits=12)),\n                ('method', models.CharField(choices=[('paynow', 'PayNow'), ('voucher', 'FeastVoucher')], max_length=20)),\n                ('status', models.CharField(choices=[('pending', 'Pending'), ('paid', 'Paid'), ('failed', 'Failed')], default='pending', max_length=20)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('order', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='payments', to='orders.order')),\n                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payments', to=settings.AUTH_USER_MODEL)),\n            ],\n        ),\n    ]\n","size_bytes":2068},"src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"src/pages/driver-components/ActiveDeliveries.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Order } from \"./types\";\n\ninterface ActiveDeliveriesProps {\n  activeDeliveries: Order[];\n  assignedOrder: Order | null;\n}\n\nexport default function ActiveDeliveries({activeDeliveries,assignedOrder,}: ActiveDeliveriesProps) {\n  const deliveries = assignedOrder ? [assignedOrder, ...activeDeliveries] : activeDeliveries;\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Active Deliveries</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {deliveries.length === 0 ? (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            No active deliveries\n          </div>\n        ) : (\n          deliveries.map((order) => {\n            // Determine badge text based on status\n            const badgeText =\n              order.status.charAt(0).toUpperCase() + order.status.slice(1);\n\n            return (\n              <div\n                key={order.id}\n                className=\"border-l-4 border-accent pl-4 bg-accent/5 rounded-r-lg p-4\">\n                <div className=\"flex justify-between mb-2 items-center\">\n                  <p className=\"font-medium\">Order #{order.id.slice(-6)}</p>\n                  <Badge className=\"bg-accent text-accent-foreground flex items-center justify-center text-center px-3 py-1\">\n                    {badgeText}\n                  </Badge>\n                </div>\n                <p className=\"text-sm text-muted-foreground mb-2\">\n                  Address: {order.deliveryAddress}\n                </p>\n                <div className=\"flex justify-between items-center\">\n                  <span>Delivery Fee: ${order.deliveryFee}</span>\n                </div>\n              </div>\n            );\n          })\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1934},"ZimFeast/restaurants/serializers.py":{"content":"from rest_framework import serializers\nfrom .models import (\n    CuisineType,\n    Restaurant,\n    RestaurantExternalAPI,\n    MenuItem,\n    CategoryType,\n)\n\nclass CuisineTypeSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = CuisineType\n        fields = [\"id\", \"name\"]\n\nclass CategoryTypeSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = CategoryType\n        fields = [\"id\", \"name\"]\n\n\nclass RestaurantExternalAPISerializer(serializers.ModelSerializer):\n    # keep api_key writeable but do not expose it in responses by default if you want:\n    api_key = serializers.CharField(write_only=True, required=False, allow_null=True)\n\n    class Meta:\n        model = RestaurantExternalAPI\n        fields = [\"id\", \"category\", \"api_url\", \"api_key\"]\n\n\nclass MenuItemSerializer(serializers.ModelSerializer):\n    available = serializers.BooleanField()\n\n    category = serializers.SlugRelatedField(\n        many=True, read_only=True, slug_field=\"name\"\n    )\n\n    class Meta:\n        model = MenuItem\n        fields = [\"id\",\"restaurant\",\"name\",\"price\",\"description\",\"category\",\"prep_time\",\"available\",\"item_image\",\"created\",]\n        read_only_fields = (\"restaurant\", \"created\")\n\n\nclass RestaurantCreateSerializer(serializers.ModelSerializer):\n    # Accept cuisine ids for creation/updating\n    cuisines = serializers.PrimaryKeyRelatedField(\n        many=True, queryset=CuisineType.objects.all(), required=False\n    )\n\n    class Meta:\n        model = Restaurant\n        fields = [\"id\",\"name\",\"phone_number\",\"description\",\"full_address\",\"lat\",\"lng\",\"minimum_order_price\",\"est_delivery_time\",\"cuisines\",]\n\n    def create(self, validated_data):\n        cuisines = validated_data.pop(\"cuisines\", [])\n        owner = self.context[\"request\"].user\n        restaurant = Restaurant.objects.create(owner=owner, **validated_data)\n        if cuisines:\n            restaurant.cuisines.set(cuisines)\n        \n        print(validated_data)\n        return restaurant\n\n    def update(self, instance, validated_data):\n        cuisines = validated_data.pop(\"cuisines\", None)\n        for attr, val in validated_data.items():\n            setattr(instance, attr, val)\n        instance.save()\n        if cuisines is not None:\n            instance.cuisines.set(cuisines)\n        return instance\n\n\nclass RestaurantSerializer(serializers.ModelSerializer):\n    cuisines = CuisineTypeSerializer(many=True, read_only=True)\n    external_apis = RestaurantExternalAPISerializer(many=True, read_only=True)\n    menu_items = MenuItemSerializer(many=True, read_only=True)\n\n    class Meta:\n        model = Restaurant\n        fields = [\n            \"id\",\n            \"name\",\n            \"phone_number\",\n            \"description\",\n            \"full_address\",\n            \"lat\",\n            \"lng\",\n            \"minimum_order_price\",\n            \"est_delivery_time\",\n            \"cuisines\",\n            \"external_apis\",\n            \"menu_items\",\n            \"created\",\n        ]","size_bytes":2966},"src/components/DriverLocationMap.tsx":{"content":"import { useState, useEffect, useRef, useCallback } from \"react\";\nimport { Wrapper, Status } from \"@googlemaps/react-wrapper\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useWebSocket } from \"@/hooks/useWebSocket\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { MapPin, Navigation, Clock, Phone } from \"lucide-react\";\n\ninterface DriverLocationMapProps {\n  orderId: string;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\ninterface DriverLocation {\n  lat: number;\n  lng: number;\n}\n\ninterface DriverLocationData {\n  orderId: string;\n  driverLocation: DriverLocation;\n  lastUpdated: string;\n  route?: {\n    pickupLocation: DriverLocation | null;\n    deliveryLocation: DriverLocation | null;\n    pickupAddress: string;\n    deliveryAddress: string;\n  };\n  eta?: {\n    estimatedArrival: string; // ISO date string\n    durationMinutes: number;\n    distance: string;\n  };\n}\n\ninterface RenderProps {\n  driverLocation?: DriverLocation;\n  deliveryLocation?: DriverLocation;\n  pickupLocation?: DriverLocation;\n  showRoute?: boolean;\n  setEta?: (eta: { estimatedArrival: string; durationMinutes: number; distance: string } | undefined) => void;\n}\n\nconst render = (status: Status, props?: RenderProps) => {\n  switch (status) {\n    case Status.LOADING:\n      return <Skeleton className=\"w-full h-[300px]\" />;\n    case Status.FAILURE:\n      return (\n        <div className=\"flex items-center justify-center h-[300px] bg-muted rounded-lg\">\n          <div className=\"text-center\">\n            <MapPin className=\"w-8 h-8 text-muted-foreground mx-auto mb-2\" />\n            <p className=\"text-muted-foreground\">Unable to load map</p>\n          </div>\n        </div>\n      );\n    case Status.SUCCESS:\n      return <Map {...props} />;\n  }\n};\n\ninterface MapProps {\n  driverLocation?: DriverLocation;\n  deliveryLocation?: DriverLocation;\n  pickupLocation?: DriverLocation;\n  showRoute?: boolean;\n  setEta?: (eta: { estimatedArrival: string; durationMinutes: number; distance: string } | undefined) => void;\n}\n\nfunction Map({ driverLocation, deliveryLocation, pickupLocation, showRoute, setEta }: MapProps) {\n  const mapRef = useRef<HTMLDivElement>(null);\n  const map = useRef<any>(null);\n  const driverMarker = useRef<any>(null);\n  const deliveryMarker = useRef<any>(null);\n  const pickupMarker = useRef<any>(null);\n  const directionsRenderer = useRef<any>(null);\n\n  useEffect(() => {\n    if (mapRef.current && !map.current && typeof window !== 'undefined' && (window as any).google) {\n      // Initialize map centered on Harare, Zimbabwe\n      const google = (window as any).google;\n      map.current = new google.maps.Map(mapRef.current, {\n        center: { lat: -17.8292, lng: 31.0522 },\n        zoom: 13,\n        styles: [\n          {\n            featureType: \"poi\",\n            elementType: \"labels\",\n            stylers: [{ visibility: \"off\" }]\n          }\n        ]\n      });\n    }\n  }, []);\n\n  // Separate effect to handle DirectionsRenderer creation when showRoute becomes true\n  useEffect(() => {\n    if (map.current && showRoute && !directionsRenderer.current && typeof window !== 'undefined' && (window as any).google) {\n      const google = (window as any).google;\n      directionsRenderer.current = new google.maps.DirectionsRenderer({\n        suppressMarkers: true, // We'll use custom markers\n        polylineOptions: {\n          strokeColor: '#3b82f6',\n          strokeWeight: 4,\n          strokeOpacity: 0.8,\n        }\n      });\n      directionsRenderer.current.setMap(map.current);\n    }\n  }, [showRoute]);\n\n  useEffect(() => {\n    if (!map.current || typeof window === 'undefined' || !(window as any).google) return;\n\n    const google = (window as any).google;\n\n    // Update driver marker\n    if (driverLocation) {\n      if (driverMarker.current) {\n        driverMarker.current.setPosition(driverLocation);\n      } else {\n        driverMarker.current = new google.maps.Marker({\n          position: driverLocation,\n          map: map.current,\n          icon: {\n            url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M12 2L2 7v10c0 5.55 3.84 10 9 10s9-4.45 9-10V7L12 2z\"/>\n                <circle cx=\"12\" cy=\"8\" r=\"2\"/>\n                <path d=\"M12 14l-4-2v6h8v-6l-4 2z\"/>\n              </svg>\n            `),\n            scaledSize: new google.maps.Size(32, 32),\n            fillColor: '#3b82f6',\n            fillOpacity: 1,\n            strokeColor: '#ffffff',\n            strokeWeight: 2\n          },\n          title: \"Driver Location\"\n        });\n      }\n\n      // Center map on driver location\n      map.current.setCenter(driverLocation);\n    }\n\n    // Update pickup marker\n    if (pickupLocation) {\n      if (pickupMarker.current) {\n        pickupMarker.current.setPosition(pickupLocation);\n      } else {\n        pickupMarker.current = new google.maps.Marker({\n          position: pickupLocation,\n          map: map.current,\n          icon: {\n            url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z\"/>\n                <path d=\"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9\"/>\n                <path d=\"M12 3v6\"/>\n              </svg>\n            `),\n            scaledSize: new google.maps.Size(32, 32),\n            fillColor: '#22c55e',\n            fillOpacity: 1,\n            strokeColor: '#ffffff',\n            strokeWeight: 2\n          },\n          title: \"Restaurant / Pickup Location\"\n        });\n      }\n    }\n\n    // Update delivery marker\n    if (deliveryLocation) {\n      if (deliveryMarker.current) {\n        deliveryMarker.current.setPosition(deliveryLocation);\n      } else {\n        deliveryMarker.current = new google.maps.Marker({\n          position: deliveryLocation,\n          map: map.current,\n          icon: {\n            url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\"/>\n                <circle cx=\"12\" cy=\"10\" r=\"3\"/>\n              </svg>\n            `),\n            scaledSize: new google.maps.Size(32, 32),\n            fillColor: '#ef4444',\n            fillOpacity: 1,\n            strokeColor: '#ffffff',\n            strokeWeight: 2\n          },\n          title: \"Delivery Location\"\n        });\n      }\n    }\n\n    // Calculate and display route if both pickup and delivery locations are available\n    if (showRoute && pickupLocation && deliveryLocation && directionsRenderer.current) {\n      const directionsService = new google.maps.DirectionsService();\n      \n      directionsService.route({\n        origin: pickupLocation,\n        destination: deliveryLocation,\n        travelMode: google.maps.TravelMode.DRIVING,\n      }, (result: any, status: any) => {\n        if (status === google.maps.DirectionsStatus.OK && result) {\n          directionsRenderer.current.setDirections(result);\n        } else {\n          console.warn('Route calculation failed:', status);\n        }\n      });\n    }\n\n    // Calculate ETA from driver's current location to delivery (separate from route display)\n    if (driverLocation && deliveryLocation && setEta) {\n      const directionsService = new google.maps.DirectionsService();\n      \n      directionsService.route({\n        origin: driverLocation,\n        destination: deliveryLocation,\n        travelMode: google.maps.TravelMode.DRIVING,\n      }, (result: any, status: any) => {\n        if (status === google.maps.DirectionsStatus.OK && result) {\n          // Extract duration and distance for ETA calculation\n          const route = result.routes[0];\n          if (route && route.legs[0]) {\n            const leg = route.legs[0];\n            const durationMinutes = Math.ceil(leg.duration.value / 60); // Convert seconds to minutes\n            const distance = leg.distance.text;\n            \n            // Calculate estimated arrival time from driver's current position\n            const estimatedArrival = new Date(Date.now() + leg.duration.value * 1000).toISOString();\n            \n            setEta({\n              estimatedArrival,\n              durationMinutes,\n              distance\n            });\n          }\n        } else {\n          console.warn('ETA calculation failed:', status);\n          setEta?.(undefined);\n        }\n      });\n    }\n\n    // Fit map to show all markers and route\n    if (driverLocation || pickupLocation || deliveryLocation) {\n      const bounds = new google.maps.LatLngBounds();\n      if (driverLocation) bounds.extend(driverLocation);\n      if (pickupLocation) bounds.extend(pickupLocation);\n      if (deliveryLocation) bounds.extend(deliveryLocation);\n      map.current.fitBounds(bounds);\n    }\n  }, [driverLocation, deliveryLocation, pickupLocation, showRoute]);\n\n  return <div ref={mapRef} className=\"w-full h-[300px] rounded-lg\" data-testid=\"map-driver-location\" />;\n}\n\nexport default function DriverLocationMap({ orderId, isOpen, onClose }: DriverLocationMapProps) {\n  const { user } = useAuth();\n  const [driverLocation, setDriverLocation] = useState<DriverLocation | undefined>();\n  const [lastUpdated, setLastUpdated] = useState<string>(\"\");\n  const [eta, setEta] = useState<{ estimatedArrival: string; durationMinutes: number; distance: string } | undefined>();\n\n  // Fetch initial driver location and route data\n  const { data: locationData, isLoading } = useQuery<DriverLocationData>({\n    queryKey: ['/api/orders', orderId, 'driver-location'],\n    enabled: isOpen && !!orderId,\n    refetchInterval: 30000, // Refetch every 30 seconds as fallback\n  });\n\n  // Memoized WebSocket message handler to prevent connection churn\n  const handleWebSocketMessage = useCallback((data: any) => {\n    if (data.type === 'DRIVER_LOCATION_UPDATE' && data.orderId === orderId) {\n      setDriverLocation(data.location);\n      setLastUpdated(data.timestamp);\n    }\n  }, [orderId]);\n\n  // Set up WebSocket for real-time updates\n  useWebSocket('/ws', handleWebSocketMessage);\n\n  useEffect(() => {\n    if (locationData) {\n      setDriverLocation(locationData.driverLocation);\n      setLastUpdated(locationData.lastUpdated);\n    }\n  }, [locationData]);\n\n  if (!isOpen) {\n    return null;\n  }\n\n  // Get Google Maps API key from environment\n  const apiKey = import.meta.env.VITE_GOOGLE_MAPS_API_KEY;\n\n  if (!apiKey) {\n    return (\n      <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n        <Card className=\"m-4 max-w-md w-full\">\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle>Track Your Driver</CardTitle>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={onClose}\n                data-testid=\"button-close-driver-tracking\"\n              >\n                âœ•\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-center py-8\">\n              <MapPin className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n              <p className=\"text-muted-foreground mb-2\">Maps not configured</p>\n              <p className=\"text-sm text-muted-foreground\">\n                Contact support to enable driver tracking\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n      <Card className=\"m-4 max-w-2xl w-full max-h-[90vh] overflow-auto\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"flex items-center gap-2\">\n              <Navigation className=\"w-5 h-5\" />\n              Track Your Driver\n            </CardTitle>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={onClose}\n              data-testid=\"button-close-driver-tracking\"\n            >\n              âœ•\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Driver Status */}\n          <div className=\"flex items-center justify-between p-3 bg-muted rounded-lg\">\n            <div>\n              <p className=\"font-medium\">Driver Location</p>\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                <Clock className=\"w-4 h-4\" />\n                {lastUpdated ? (\n                  <>Last updated: {new Date(lastUpdated).toLocaleTimeString()}</>\n                ) : (\n                  \"Getting location...\"\n                )}\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <Badge variant={driverLocation ? \"default\" : \"secondary\"} data-testid=\"badge-driver-status\">\n                {driverLocation ? \"Live\" : \"Offline\"}\n              </Badge>\n              {/* ETA Display */}\n              {eta && (\n                <div className=\"mt-1 text-sm\" data-testid=\"eta-display\">\n                  <div className=\"font-medium text-blue-600\">\n                    ETA: {new Date(eta.estimatedArrival).toLocaleTimeString([], { \n                      hour: '2-digit', \n                      minute: '2-digit' \n                    })}\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    {eta.durationMinutes}m â€¢ {eta.distance}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Google Map */}\n          <div className=\"border rounded-lg overflow-hidden\">\n            {isLoading ? (\n              <Skeleton className=\"w-full h-[300px]\" />\n            ) : (\n              <Wrapper \n                apiKey={apiKey} \n                render={(status: Status) => render(status, {\n                  driverLocation,\n                  deliveryLocation: locationData?.route?.deliveryLocation as DriverLocation,\n                  pickupLocation: locationData?.route?.pickupLocation as DriverLocation,\n                  showRoute: !!(locationData?.route?.pickupLocation && locationData?.route?.deliveryLocation),\n                  setEta,\n                })}\n              />\n            )}\n          </div>\n\n          {/* Delivery Timeline */}\n          {eta && (\n            <div className=\"p-4 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800\" data-testid=\"delivery-timeline\">\n              <h3 className=\"font-semibold text-blue-900 dark:text-blue-100 mb-3 flex items-center gap-2\">\n                <Clock className=\"w-4 h-4\" />\n                Delivery Timeline\n              </h3>\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                    <span className=\"text-sm\">Driver departed</span>\n                  </div>\n                  <span className=\"text-xs text-muted-foreground\">Now</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                    <span className=\"text-sm font-medium\">Estimated arrival</span>\n                  </div>\n                  <div className=\"text-right\">\n                    <div className=\"text-sm font-semibold text-blue-600\">\n                      {new Date(eta.estimatedArrival).toLocaleTimeString([], { \n                        hour: '2-digit', \n                        minute: '2-digit' \n                      })}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">\n                      {eta.durationMinutes} min â€¢ {eta.distance}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Location Details */}\n          {driverLocation && (\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div className=\"p-3 bg-muted rounded-lg\">\n                <p className=\"font-medium mb-1\">Latitude</p>\n                <p className=\"text-muted-foreground\">{driverLocation.lat.toFixed(6)}</p>\n              </div>\n              <div className=\"p-3 bg-muted rounded-lg\">\n                <p className=\"font-medium mb-1\">Longitude</p>\n                <p className=\"text-muted-foreground\">{driverLocation.lng.toFixed(6)}</p>\n              </div>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" className=\"flex-1\" data-testid=\"button-call-driver\">\n              <Phone className=\"w-4 h-4 mr-2\" />\n              Call Driver\n            </Button>\n            <Button variant=\"outline\" className=\"flex-1\" data-testid=\"button-refresh-location\">\n              <Navigation className=\"w-4 h-4 mr-2\" />\n              Refresh\n            </Button>\n          </div>\n\n          {!driverLocation && !isLoading && (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <MapPin className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n              <p>Driver location not available</p>\n              <p className=\"text-sm\">Your driver may not have started delivery yet</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":18243},"ZimFeast/payments/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"src/pages/business-components/hooks.ts":{"content":"import { useMutation } from \"@tanstack/react-query\";\nimport { RestaurantRegistration, DriverRegistration } from \"./types\";\n\nasync function postData<T>(url: string, data: T) {\n  const res = await fetch(url, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(data),\n  });\n  if (!res.ok) {\n    const errorData = await res.json().catch(() => ({}));\n    throw new Error(errorData.message || \"Request failed\");\n  }\n  return res.json();\n}\n\nexport function useRegisterRestaurant() {\n  return useMutation({\n    mutationFn: (data: RestaurantRegistration) =>\n      postData(\"http://127.0.0.1:8000/api/restaurants/register\", data),\n  });\n}\n\nexport function useRegisterDriver() {\n  return useMutation({\n    mutationFn: (data: DriverRegistration) =>\n      postData(\"http://127.0.0.1:8000/api/drivers/register\", data),\n  });\n}\n","size_bytes":861},"shared/deliveryUtils.ts":{"content":"// Shared utility functions for delivery fee calculation\n// This ensures consistent calculation across frontend and backend\n\n// Calculate distance between two coordinates using Haversine formula\nexport function calculateDistance(lat1: number, lng1: number, lat2: number, lng2: number): number {\n  const R = 6371; // Earth's radius in kilometers\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLng = (lng2 - lng1) * Math.PI / 180;\n  const a = \n    Math.sin(dLat/2) * Math.sin(dLat/2) +\n    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * \n    Math.sin(dLng/2) * Math.sin(dLng/2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n  return R * c; // Distance in kilometers\n}\n\n// Calculate delivery fee at $0.35 per km with minimum base fee\nexport function calculateDeliveryFee(distance: number): number {\n  const ratePerKm = 0.35;\n  const baseFee = 1.50; // Minimum delivery fee\n  return Math.max(baseFee, distance * ratePerKm);\n}\n\n// Calculate delivery fee from coordinates\nexport function calculateDeliveryFeeFromCoordinates(\n  customerLat: number,\n  customerLng: number,\n  restaurantLat: number,\n  restaurantLng: number\n): number {\n  const distance = calculateDistance(customerLat, customerLng, restaurantLat, restaurantLng);\n  return calculateDeliveryFee(distance);\n}\n\n// Default delivery fee when coordinates are not available\nexport const DEFAULT_DELIVERY_FEE = 3.00;","size_bytes":1404},"src/pages/home-components/types.ts":{"content":"export interface User {\n  firstName?: string;\n  role?: 'admin' | 'customer' | 'restaurant' | 'driver';\n}\n","size_bytes":105},"src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"ZimFeast/accounts/__init__.py":{"content":"","size_bytes":0},"src/lib/driverLocationTracker.ts":{"content":"// Client-side location tracking for drivers\nexport class DriverLocationTracker {\n  private websocket: WebSocket | null = null;\n  private locationTimer: NodeJS.Timeout | null = null;\n  private isTracking = false;\n  private watchId: number | null = null;\n  private lastLocation: { lat: number; lng: number } | null = null;\n\n  constructor(private userId: string) {}\n\n  private async connectWebSocket(): Promise<void> {\n    if (this.websocket?.readyState === WebSocket.OPEN) {\n      return;\n    }\n\n    // Use the current protocol and host for WebSocket connection (consistent with useWebSocket)\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n    let host = window.location.host;\n    \n    // Handle cases where port is undefined or malformed (consistent with useWebSocket)\n    if (host.includes(':undefined') || host.endsWith(':undefined')) {\n      host = window.location.hostname;\n    }\n    \n    // Ensure we have a port for WebSocket connection\n    if (!host.includes(':')) {\n      if (window.location.hostname === 'localhost') {\n        host = `${window.location.hostname}:5000`;\n      } else {\n        const port = window.location.port || (protocol === \"wss:\" ? \"443\" : \"80\");\n        host = `${window.location.hostname}:${port}`;\n      }\n    }\n    \n    const wsUrl = `${protocol}//${host}/ws`;\n    \n    return new Promise((resolve, reject) => {\n      this.websocket = new WebSocket(wsUrl);\n      \n      this.websocket.onopen = () => {\n        console.log('Driver WebSocket connected');\n        // Register the driver for real-time updates (consistent with useWebSocket)\n        this.websocket!.send(JSON.stringify({\n          type: 'REGISTER',\n          userId: this.userId\n        }));\n        resolve();\n      };\n      \n      this.websocket.onerror = (error) => {\n        console.error('WebSocket error:', error);\n        reject(error);\n      };\n      \n      this.websocket.onmessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n          this.handleWebSocketMessage(data);\n        } catch (error) {\n          console.error('Error parsing WebSocket message:', error);\n        }\n      };\n      \n      this.websocket.onclose = () => {\n        console.log('Driver WebSocket disconnected');\n        // Attempt to reconnect after 3 seconds\n        setTimeout(() => {\n          if (this.isTracking) {\n            this.connectWebSocket();\n          }\n        }, 3000);\n      };\n    });\n  }\n\n  private handleWebSocketMessage(data: any) {\n    switch (data.type) {\n      case 'DRIVER_STATUS_UPDATED':\n        console.log('Driver status updated:', data.status);\n        break;\n      case 'ORDER_ASSIGNED':\n        console.log('New order assigned:', data.order);\n        // You can emit custom events or call callbacks here\n        this.onOrderAssigned?.(data.order);\n        break;\n      case 'ORDER_DECLINED':\n        console.log('Order decline confirmed:', data.message);\n        break;\n      default:\n        console.log('Received WebSocket message:', data);\n    }\n  }\n\n  private getCurrentLocation(): Promise<{ lat: number; lng: number }> {\n    return new Promise((resolve, reject) => {\n      if (!navigator.geolocation) {\n        reject(new Error('Geolocation is not supported by this browser'));\n        return;\n      }\n\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          resolve({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude\n          });\n        },\n        (error) => {\n          reject(error);\n        },\n        {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 30000 // 30 seconds\n        }\n      );\n    });\n  }\n\n  private async updateLocation() {\n    try {\n      const location = await this.getCurrentLocation();\n      this.lastLocation = location;\n\n      if (this.websocket?.readyState === WebSocket.OPEN) {\n        this.websocket.send(JSON.stringify({\n          type: 'DRIVER_LOCATION_UPDATE',\n          userId: this.userId,\n          coordinates: location,\n          latitude: location.lat,\n          longitude: location.lng\n        }));\n      }\n    } catch (error) {\n      console.error('Error updating location:', error);\n    }\n  }\n\n  async startTracking(): Promise<void> {\n    if (this.isTracking) {\n      return;\n    }\n\n    this.isTracking = true;\n    \n    try {\n      await this.connectWebSocket();\n      \n      // Set driver as available\n      if (this.websocket?.readyState === WebSocket.OPEN) {\n        this.websocket.send(JSON.stringify({\n          type: 'DRIVER_AVAILABILITY_TOGGLE',\n          userId: this.userId,\n          isAvailable: true\n        }));\n      }\n\n      // Update location immediately\n      await this.updateLocation();\n\n      // Set up timer to update location every minute\n      this.locationTimer = setInterval(() => {\n        this.updateLocation();\n      }, 60000); // 60 seconds\n\n      console.log('Driver location tracking started');\n    } catch (error) {\n      console.error('Error starting location tracking:', error);\n      this.isTracking = false;\n      throw error;\n    }\n  }\n\n  async stopTracking(): Promise<void> {\n    this.isTracking = false;\n\n    // Clear location timer\n    if (this.locationTimer) {\n      clearInterval(this.locationTimer);\n      this.locationTimer = null;\n    }\n\n    // Stop watching position\n    if (this.watchId !== null) {\n      navigator.geolocation.clearWatch(this.watchId);\n      this.watchId = null;\n    }\n\n    // Set driver as unavailable\n    if (this.websocket?.readyState === WebSocket.OPEN) {\n      this.websocket.send(JSON.stringify({\n        type: 'DRIVER_AVAILABILITY_TOGGLE',\n        userId: this.userId,\n        isAvailable: false\n      }));\n    }\n\n    // Close WebSocket\n    if (this.websocket) {\n      this.websocket.close();\n      this.websocket = null;\n    }\n\n    console.log('Driver location tracking stopped');\n  }\n\n  async declineOrder(orderId: string): Promise<void> {\n    if (this.websocket?.readyState === WebSocket.OPEN) {\n      this.websocket.send(JSON.stringify({\n        type: 'DRIVER_DECLINE_ORDER',\n        userId: this.userId,\n        orderId\n      }));\n    }\n  }\n\n  getLastLocation(): { lat: number; lng: number } | null {\n    return this.lastLocation;\n  }\n\n  isConnected(): boolean {\n    return this.websocket?.readyState === WebSocket.OPEN;\n  }\n\n  // Callback functions that can be set by the implementing app\n  onOrderAssigned?: (order: any) => void;\n  onStatusUpdated?: (status: string) => void;\n}","size_bytes":6473},"src/pages/restaurant-components/StatsCards.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\n\ninterface StatsCardsProps {\n  todayOrders: number;\n  todayRevenue: number;\n  avgRating: number;\n  menuItemsCount: number;\n}\n\nexport default function StatsCards({ todayOrders, todayRevenue, avgRating, menuItemsCount }: StatsCardsProps) {\n  const stats = [\n    { label: \"Today's Orders\", value: todayOrders, icon: \"fa-shopping-bag\", color: \"primary\" },\n    { label: \"Revenue\", value: `$${todayRevenue.toFixed(2)}`, icon: \"fa-dollar-sign\", color: \"accent\" },\n    { label: \"Avg Rating\", value: avgRating.toFixed(1), icon: \"fa-star\", color: \"yellow-500\" },\n    { label: \"Menu Items\", value: menuItemsCount, icon: \"fa-utensils\", color: \"green-500\" },\n  ];\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n      {stats.map((stat) => (\n        <Card key={stat.label}>\n          <CardContent className=\"p-6 flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-muted-foreground\">{stat.label}</p>\n              <p className=\"text-2xl font-bold\">{stat.value}</p>\n            </div>\n            <div className={`w-12 h-12 bg-${stat.color}/10 rounded-xl flex items-center justify-center`}>\n              <i className={`fas ${stat.icon} text-${stat.color} text-xl`}></i>\n            </div>\n          </CardContent>\n        </Card>\n      ))}\n    </div>\n  );\n}\n","size_bytes":1388},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer()\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner()\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"src\"), // updated\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"), // optional, keep if needed\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname), // removed \"client\" folder reference\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: \"0.0.0.0\",\n    port: 5000,\n    allowedHosts: true,\n    hmr: {\n      clientPort: 443,\n    },\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n    proxy: {\n      '/api': {\n        target: 'http://127.0.0.1:8000',\n        changeOrigin: true,\n        secure: false,\n      },\n      '/ws': {\n        target: 'ws://127.0.0.1:8000',\n        ws: true,\n      },\n      '/media': {\n        target: 'http://127.0.0.1:8000',\n        changeOrigin: true,\n      },\n    },\n  },\n});\n","size_bytes":1550},"src/pages/checkout-components/MobilePaymentFields.tsx":{"content":"import { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\n\ninterface MobilePaymentFieldsProps {\n  phoneNumber: string;\n  setPhoneNumber: (val: string) => void;\n  mobileProvider: string;\n  setMobileProvider: (val: string) => void;\n}\n\nexport const MobilePaymentFields = ({\n  phoneNumber,\n  setPhoneNumber,\n  mobileProvider,\n  setMobileProvider,\n}: MobilePaymentFieldsProps) => (\n  <>\n    <div>\n      <label className=\"text-sm font-medium mb-2 block\">Mobile Provider</label>\n      <Select value={mobileProvider} onValueChange={setMobileProvider}>\n        <SelectTrigger>\n          <SelectValue placeholder=\"Select provider\" />\n        </SelectTrigger>\n        <SelectContent>\n          <SelectItem value=\"ecocash\">EcoCash</SelectItem>\n          <SelectItem value=\"onemoney\">OneMoney</SelectItem>\n          <SelectItem value=\"telecash\">TeleCash</SelectItem>\n        </SelectContent>\n      </Select>\n    </div>\n    <div>\n      <label className=\"text-sm font-medium mb-2 block\">Phone Number</label>\n      <Input\n        type=\"tel\"\n        placeholder=\"+263 77 123 4567 or 0771234567\"\n        value={phoneNumber}\n        onChange={e => setPhoneNumber(e.target.value)}\n        required\n      />\n    </div>\n  </>\n);\n","size_bytes":1300},"ZimFeast/restaurants/consumers.py":{"content":"import json\nfrom channels.generic.websocket import AsyncWebsocketConsumer\n\nclass RestaurantDashboardConsumer(AsyncWebsocketConsumer):\n    async def connect(self):\n        self.restaurant_id = self.scope['url_route']['kwargs']['restaurant_id']\n        self.group_name = f\"restaurant_{self.restaurant_id}\"\n\n        # Join group\n        await self.channel_layer.group_add(\n            self.group_name,\n            self.channel_name\n        )\n\n        await self.accept()\n\n    async def disconnect(self, close_code):\n        await self.channel_layer.group_discard(\n            self.group_name,\n            self.channel_name\n        )\n\n    # Receive message from group\n    async def restaurant_dashboard_update(self, event):\n        await self.send(text_data=json.dumps(event[\"dashboard_data\"]))\n","size_bytes":791},"src/pages/restaurant-components/LiveOrders.tsx":{"content":"interface LiveOrdersProps {\n  orders?: any[]; // make optional\n  selectedStatus: string;\n  setSelectedStatus: (status: string) => void;\n  updateOrder: (orderId: string, status: string) => void;\n}\n\nexport default function LiveOrders({\n  orders = [], // âœ… default to empty array\n  selectedStatus,\n  setSelectedStatus,\n  updateOrder,\n}: LiveOrdersProps) {\n  const filteredOrders = orders.filter(\n    (order) => !selectedStatus || order.status === selectedStatus\n  );\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"pending\":\n        return \"bg-yellow-100 text-yellow-800\";\n      case \"accepted\":\n      case \"preparing\":\n        return \"bg-blue-100 text-blue-800\";\n      case \"ready\":\n        return \"bg-green-100 text-green-800\";\n      case \"delivered\":\n        return \"bg-gray-100 text-gray-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"flex space-x-2 mb-4\">\n        {[\"\", \"pending\", \"preparing\"].map((status) => (\n          <button\n            key={status}\n            className={`px-3 py-1 rounded ${\n              selectedStatus === status ? \"bg-primary text-white\" : \"border\"\n            }`}\n            onClick={() => setSelectedStatus(status)}\n          >\n            {status === \"\" ? \"All\" : status.charAt(0).toUpperCase() + status.slice(1)}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"space-y-4\">\n        {filteredOrders.length === 0 && (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            <i className=\"fas fa-receipt text-4xl mb-4\"></i>\n            No orders found\n          </div>\n        )}\n\n        {filteredOrders.map((order) => (\n          <div\n            key={order.id}\n            className=\"border border-border rounded-lg p-4 cursor-pointer hover:bg-gray-50\"\n          >\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center\">\n                  <span className=\"text-primary font-medium\">\n                    #{order.id ? order.id.slice(-3) : \"N/A\"}\n                  </span>\n                </div>\n                <div>\n                  <p className=\"font-medium\">{order.customerPhone || \"Unknown\"}</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {order.createdAt\n                      ? new Date(order.createdAt).toLocaleTimeString()\n                      : \"N/A\"}\n                  </p>\n                </div>\n              </div>\n              <span\n                className={`px-2 py-1 rounded text-xs ${getStatusColor(order.status)}`}\n              >\n                {order.status}\n              </span>\n            </div>\n\n            <div className=\"text-sm text-muted-foreground mb-3\">\n              {Array.isArray(order.items)\n                ? order.items.map((i: any) => `${i.quantity}x ${i.name}`).join(\", \")\n                : \"Order items\"}\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <span className=\"font-medium\">${order.total || \"0.00\"}</span>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","size_bytes":3293},"ZimFeast/drivers/urls.py":{"content":"from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path(\"profile/create/\", views.create_driver_profile, name=\"create_driver_profile\"),\n    path(\"status/toggle/\", views.toggle_driver_status, name=\"toggle_driver_status\"),\n    path(\"status/\", views.get_driver_status, name=\"toggle_driver_status\"),\n    path(\"order/<str:pk>/reject/\", views.reject_order, name=\"reject_order\"),\n    path(\"location/update/\", views.update_driver_location, name=\"update_driver_location\"),\n    path(\"order/<str:order_id>/cancel/\", views.cancel_order, name=\"driver_cancel_order\"),\n    path('active/orders/', views.driver_active_orders, name=\"active_driver_orders\"),\n    path(\"orders/history/\", views.driver_completed_cancelled_orders, name=\"driver-completed-cancelled-orders\"),\n    path(\"daily/finances/\", views.driver_finance_view, name=\"driver_finances\"),\n    path(\"rate/driver/\", views.submit_driver_rating, name=\"rate_driver\"),\n]\n","size_bytes":925},"ZimFeast/payments/paynow_utils.py":{"content":"from paynow import Paynow\nfrom django.conf import settings\n\npaynow = Paynow(\n    integration_id=settings.PAYNOW_INTEGRATION_ID,\n    integration_key=settings.PAYNOW_INTEGRATION_KEY,\n    return_url=settings.PAYNOW_RETURN_URL,\n    result_url=settings.PAYNOW_RESULT_URL\n)\n\ndef create_paynow_payment(order, user_email):\n    payment = paynow.create_payment(f\"Order_{order.id}\", user_email)\n    payment.add(f\"Order #{order.id}\", float(order.total))\n    return paynow.send(payment)\n","size_bytes":474},"src/pages/RegisterPage.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Card,\n  CardHeader,\n  CardTitle,\n  CardContent,\n} from \"@/components/ui/card\";\nimport {\n  Select,\n  SelectTrigger,\n  SelectValue,\n  SelectContent,\n  SelectItem,\n} from \"@/components/ui/select\";\n\ninterface RegisterResponse {\n  accessToken: string;\n}\n\nexport default function RegisterPage() {\n  const [, setLocation] = useLocation();\n  const queryClient = useQueryClient();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [role, setRole] = useState<\"customer\" | \"restaurant\" | \"driver\">(\"customer\");\n\n  const registerMutation = useMutation({\n    mutationFn: async (): Promise<RegisterResponse> => {\n      const res = await fetch(\"http://127.0.0.1:8000/api/accounts/register/\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          email,\n          password,\n          first_name: firstName,\n          last_name: lastName,\n          phone_number: phoneNumber,\n          role,\n        }),\n      });\n\n      if (!res.ok) {\n        const text = (await res.text()) || res.statusText;\n        throw new Error(text);\n      }\n\n      return res.json();\n    },\n    onSuccess: async (data) => {\n      // 1. Save token\n      localStorage.setItem(\"token\", data.accessToken);\n\n      // 2. Refetch the user profile immediately\n      await queryClient.invalidateQueries({ queryKey: [\"/api/accounts/profile/\"] });\n\n      // 3. Redirect based on role\n      if (role === \"restaurant\" || role === \"driver\") {\n        setLocation(\"/business-hub\");\n      } else {\n        setLocation(\"/home\");\n      }\n    },\n    onError: (err: any) => alert(err.message || \"Registration failed\"),\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    registerMutation.mutate();\n  };\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-50 px-4\">\n      <Card className=\"w-full max-w-md shadow-lg\">\n        <CardHeader>\n          <CardTitle className=\"text-center text-2xl font-bold text-gray-800\">\n            Register\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">\n                First Name\n              </label>\n              <Input\n                type=\"text\"\n                required\n                value={firstName}\n                onChange={(e) => setFirstName(e.target.value)}\n                placeholder=\"John\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Last Name\n              </label>\n              <Input\n                type=\"text\"\n                required\n                value={lastName}\n                onChange={(e) => setLastName(e.target.value)}\n                placeholder=\"Doe\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Email\n              </label>\n              <Input\n                type=\"email\"\n                required\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                placeholder=\"you@example.com\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Password\n              </label>\n              <Input\n                type=\"password\"\n                required\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Phone Number\n              </label>\n              <Input\n                type=\"tel\"\n                required\n                value={phoneNumber}\n                onChange={(e) => setPhoneNumber(e.target.value)}\n                placeholder=\"+263 77 123 4567\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Role\n              </label>\n              <Select value={role} onValueChange={(val) => setRole(val as any)}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select role\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"customer\">Customer</SelectItem>\n                  <SelectItem value=\"restaurant\">Restaurant</SelectItem>\n                  <SelectItem value=\"driver\">Driver</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <Button\n              type=\"submit\"\n              className=\"w-full\"\n              disabled={registerMutation.isPending}\n            >\n              {registerMutation.isPending ? \"Registering...\" : \"Register\"}\n            </Button>\n\n            <div className=\"text-center mt-4\">\n              <span className=\"text-sm text-gray-600\">\n                Already have an account?{\" \"}\n              </span>\n              <Link href=\"/login\" className=\"text-sm text-blue-600 hover:underline\">\n                Login\n              </Link>\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":5873},"shared/driverAssignment.ts":{"content":"// Driver assignment utilities for finding and assigning nearest available drivers\nimport { calculateDistance } from './deliveryUtils';\n\nexport interface DriverLocation {\n  userId: string;\n  driverId: string;\n  coordinates: { lat: number; lng: number };\n  isAvailable: boolean;\n  locationUpdatedAt: Date;\n}\n\nexport interface OrderLocation {\n  orderId: string;\n  restaurantCoordinates: { lat: number; lng: number };\n  deliveryCoordinates: { lat: number; lng: number };\n  declinedDrivers: string[]; // Array of driver user IDs who declined\n}\n\n// Find the nearest available driver for an order\nexport function findNearestAvailableDriver(\n  availableDrivers: DriverLocation[],\n  orderLocation: OrderLocation,\n  maxDistanceKm: number = 10\n): DriverLocation | null {\n  // Filter out drivers who have declined this order\n  const eligibleDrivers = availableDrivers.filter(driver => \n    driver.isAvailable && \n    !orderLocation.declinedDrivers.includes(driver.userId) &&\n    // Only consider drivers with recent location updates (within last 5 minutes)\n    driver.locationUpdatedAt && \n    Date.now() - driver.locationUpdatedAt.getTime() < 5 * 60 * 1000\n  );\n\n  if (eligibleDrivers.length === 0) {\n    return null;\n  }\n\n  // Calculate distances from restaurant location\n  const driversWithDistance = eligibleDrivers.map(driver => {\n    const distance = calculateDistance(\n      orderLocation.restaurantCoordinates.lat,\n      orderLocation.restaurantCoordinates.lng,\n      driver.coordinates.lat,\n      driver.coordinates.lng\n    );\n    return { ...driver, distance };\n  });\n\n  // Filter drivers within maximum distance and sort by distance\n  const nearbyDrivers = driversWithDistance\n    .filter(driver => driver.distance <= maxDistanceKm)\n    .sort((a, b) => a.distance - b.distance);\n\n  return nearbyDrivers.length > 0 ? nearbyDrivers[0] : null;\n}\n\n// Check if driver location is stale (last updated more than 5 minutes ago)\nexport function isDriverLocationStale(lastUpdated: Date): boolean {\n  const fiveMinutesAgo = Date.now() - 5 * 60 * 1000;\n  return lastUpdated.getTime() < fiveMinutesAgo;\n}\n\n// Get distance between driver and restaurant in kilometers\nexport function getDriverRestaurantDistance(\n  driverCoords: { lat: number; lng: number },\n  restaurantCoords: { lat: number; lng: number }\n): number {\n  return calculateDistance(\n    driverCoords.lat,\n    driverCoords.lng,\n    restaurantCoords.lat,\n    restaurantCoords.lng\n  );\n}","size_bytes":2434},"src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"ZimFeast/drivers/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"ZimFeast/drivers/admin.py":{"content":"from django.contrib import admin\n\n# Register your models here.\n","size_bytes":63},"src/pages/checkout-components/CheckoutForm.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { MobilePaymentFields } from \"./MobilePaymentFields\";\n\ninterface OrderItem {\n  name: string;\n  quantity: number;\n  price: string;\n}\n\ninterface Order {\n  id: string;\n  total_fee: string;\n  tip: string;\n  items: OrderItem[];\n  restaurant_names: string[];\n  delivery_fee: number;\n  status: string;\n}\n\ninterface CheckoutFormProps {\n  orderId: string;\n}\n\nexport const CheckoutForm = ({ orderId }: CheckoutFormProps) => {\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  const [paymentMethod, setPaymentMethod] = useState<\"web\" | \"mobile\" | \"voucher\">(\"web\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [mobileProvider, setMobileProvider] = useState(\"\");\n  const [depositAmount, setDepositAmount] = useState(\"\");\n  const [voucherBalance, setVoucherBalance] = useState<number | null>(null);\n\n  // --- Fetch order details ---\n  const { data: currentOrder, isLoading } = useQuery<Order>({\n    queryKey: [`/api/orders/order/${orderId}`],\n    queryFn: async () => {\n      const token = localStorage.getItem(\"token\");\n      const res = await fetch(`http://127.0.0.1:8000/api/orders/order/${orderId}/`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch order details\");\n      return res.json();\n    },\n  });\n\n  // --- Fetch Feast Voucher Balance ---\n  useEffect(() => {\n    if (paymentMethod === \"voucher\") {\n      const fetchBalance = async () => {\n        const token = localStorage.getItem(\"token\");\n        const res = await fetch(\"http://127.0.0.1:8000/api/payments/feast/voucher/balance/\", {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        if (!res.ok) return;\n        const data = await res.json();\n        setVoucherBalance(Number(data.balance));\n      };\n      fetchBalance();\n    }\n  }, [paymentMethod]);\n\n  // --- Normalize mobile phone ---\n  const normalizePhone = (phone: string) => {\n    const clean = phone.replace(/\\D/g, \"\");\n    if (clean.startsWith(\"0\")) return \"+263\" + clean.slice(1);\n    if (clean.startsWith(\"263\")) return \"+\" + clean;\n    if (clean.startsWith(\"+\")) return clean;\n    return \"+263\" + clean;\n  };\n\n  // --- Payment Mutation ---\n  const paymentMutation = useMutation({\n    mutationFn: async () => {\n      const token = localStorage.getItem(\"token\");\n\n      // Always include order_id in request body\n      const body: any = {\n        order_id: orderId,\n        method: paymentMethod === \"voucher\" ? \"voucher\" : \"paynow\",\n      };\n\n      // Add mobile payment details\n      if (paymentMethod === \"mobile\") {\n        body.phone = normalizePhone(phoneNumber);\n        body.provider = mobileProvider;\n      }\n\n      const res = await fetch(\"http://127.0.0.1:8000/api/payments/create/payment/\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\n        body: JSON.stringify(body),\n      });\n\n      if (!res.ok) throw new Error(await res.text());\n      return res.json();\n    },\n\n    onSuccess: (data) => {\n      if (paymentMethod === \"voucher\" && data.status === \"paid_with_voucher\") {\n        toast({ title: \"Paid with Voucher\", description: \"Your voucher covered the order.\" });\n        queryClient.invalidateQueries({ queryKey: [`/api/orders/order/${orderId}`] });\n        setTimeout(() => setLocation(\"/home\"), 1000);\n        return;\n      }\n\n      if (data.paynow_url) {\n        toast({ title: \"Redirecting to PayNow...\", description: \"Please complete your payment.\" });\n        window.location.href = data.paynow_url;\n        return;\n      }\n\n      if (data.status === \"paid\" || data.status === \"Payment Successful\") {\n        toast({ title: \"Payment Successful\", description: \"Redirecting...\" });\n        setTimeout(() => setLocation(\"/home\"), 1500);\n        return;\n      }\n\n      toast({ title: \"Payment Failed\", description: \"Unexpected response.\", variant: \"destructive\" });\n    },\n\n    onError: (err: any) => {\n      toast({ title: \"Payment Failed\", description: err.message || \"Try again.\", variant: \"destructive\" });\n    },\n  });\n\n  // --- Voucher Deposit ---\n  const voucherDepositMutation = useMutation({\n    mutationFn: async () => {\n      const token = localStorage.getItem(\"token\");\n      const res = await fetch(\"http://127.0.0.1:8000/api/payments/deposit-voucher/\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\n        body: JSON.stringify({ amount: depositAmount }),\n      });\n      if (!res.ok) throw new Error(await res.text());\n      return res.json();\n    },\n    onSuccess: (data) => {\n      toast({ title: \"Deposit Started\", description: \"Redirecting to PayNow...\" });\n      window.location.href = data.paynow_url;\n    },\n  });\n\n  // --- Poll mobile payment status ---\n  useEffect(() => {\n    let interval: any;\n    let attempts = 0;\n\n    if (paymentMethod === \"mobile\" && paymentMutation.isSuccess) {\n      interval = setInterval(async () => {\n        attempts++;\n        if (attempts > 24) {\n          clearInterval(interval);\n          toast({ title: \"Payment Timeout\", description: \"Please try again.\" });\n          return;\n        }\n\n        const token = localStorage.getItem(\"token\");\n        // âœ… Ensure this endpoint matches backend: /api/payments/paynow/status/<reference>/\n        const res = await fetch(`http://127.0.0.1:8000/api/payments/paynow/status/${orderId}/`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n\n        if (res.ok) {\n          const data = await res.json();\n          if (data.status === \"paid\" || data.status === \"Payment Successful\") {\n            toast({ title: \"Payment Confirmed\", description: \"Redirecting...\" });\n            clearInterval(interval);\n            setTimeout(() => setLocation(\"/home\"), 1500);\n          }\n        }\n      }, 5000);\n    }\n    return () => clearInterval(interval);\n  }, [paymentMutation.isSuccess, paymentMethod, orderId, toast, setLocation]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!currentOrder) {\n      toast({ title: \"Order Not Found\", variant: \"destructive\" });\n      return;\n    }\n\n    if (paymentMethod === \"mobile\" && (!phoneNumber || !mobileProvider)) {\n      toast({ title: \"Missing Info\", description: \"Please fill phone and provider.\" });\n      return;\n    }\n\n    paymentMutation.mutate();\n  };\n\n  if (isLoading) return <div>Loading order...</div>;\n  if (!currentOrder) return <div>Order not found</div>;\n\n  const isProcessing = paymentMutation.isPending || voucherDepositMutation.isPending;\n  const totalAmount = parseFloat(currentOrder.total_fee) + (parseFloat(currentOrder.tip) || 0);\n\n  return (\n    <Card className=\"max-w-md mx-auto\">\n      <CardHeader>\n        <CardTitle>Complete Your Payment</CardTitle>\n        <Badge variant=\"outline\">Order #{currentOrder.id.slice(-8)}</Badge>\n      </CardHeader>\n      <CardContent>\n        <div className=\"mb-4\">\n          <h2 className=\"font-semibold\">Your Order:</h2>\n          {currentOrder.items.length === 0 ? (\n            <p>No items added yet.</p>\n          ) : (\n            <ul className=\"list-disc pl-5\">\n              {currentOrder.items.map((item, idx) => (\n                <li key={idx}>\n                  {item.name} x {item.quantity} - ${parseFloat(item.price).toFixed(2)}\n                </li>\n              ))}\n            </ul>\n          )}\n          <p className=\"mt-2\">Delivery Fee: ${currentOrder.delivery_fee.toFixed(2)}</p>\n          <p className=\"mt-1 font-semibold\">Total: ${totalAmount.toFixed(2)}</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <Select\n            value={paymentMethod}\n            onValueChange={(value) => setPaymentMethod(value as \"web\" | \"mobile\" | \"voucher\")}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder=\"Select payment method\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"web\">PayNow Web</SelectItem>\n              <SelectItem value=\"mobile\">PayNow Mobile</SelectItem>\n              <SelectItem value=\"voucher\">Feast Voucher</SelectItem>\n            </SelectContent>\n          </Select>\n\n          {paymentMethod === \"mobile\" && (\n            <MobilePaymentFields\n              phoneNumber={phoneNumber}\n              setPhoneNumber={setPhoneNumber}\n              mobileProvider={mobileProvider}\n              setMobileProvider={setMobileProvider}\n            />\n          )}\n\n          {paymentMethod === \"voucher\" && (\n            <div className=\"border-t pt-3\">\n              <p className=\"text-sm text-muted-foreground mb-2\">\n                Your Feast Voucher Balance: $\n                {voucherBalance !== null ? voucherBalance.toFixed(2) : \"Loading...\"}\n              </p>\n              <p className=\"text-sm text-muted-foreground mb-2\">\n                Use your voucher balance to pay. To deposit funds, enter an amount:\n              </p>\n              <Input\n                type=\"number\"\n                min=\"1\"\n                placeholder=\"Enter amount to deposit\"\n                value={depositAmount}\n                onChange={(e) => setDepositAmount(e.target.value)}\n              />\n              <Button\n                type=\"button\"\n                className=\"w-full mt-2\"\n                onClick={() => voucherDepositMutation.mutate()}\n                disabled={!depositAmount || voucherDepositMutation.isPending}\n              >\n                {voucherDepositMutation.isPending ? \"Redirecting...\" : \"Deposit to Voucher\"}\n              </Button>\n            </div>\n          )}\n\n          <Button type=\"submit\" disabled={isProcessing} className=\"w-full\">\n            {isProcessing ? \"Processing...\" : `Pay $${totalAmount.toFixed(2)}`}\n          </Button>\n        </form>\n      </CardContent>\n    </Card>\n  );\n};\n","size_bytes":10421},"src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"ZimFeast/orders/serializers.py":{"content":"# orders/serializers.py\nfrom rest_framework import serializers\nfrom .models import Order, OrderItem\nfrom restaurants.serializers import MenuItemSerializer\nfrom accounts.serializers import UserSerializer\n\nclass OrderItemSerializer(serializers.ModelSerializer):\n    menu_item_id = serializers.UUIDField(write_only=True)\n    menu_item = MenuItemSerializer(read_only=True)\n\n    class Meta:\n        model = OrderItem\n        fields = [\"id\", \"menu_item_id\", \"menu_item\", \"quantity\", \"price\"]\n\nclass OrderSerializer(serializers.ModelSerializer):\n    items = OrderItemSerializer(many=True)\n    restaurant_names = serializers.ListField(child=serializers.CharField(), read_only=True)\n    customer = UserSerializer(read_only=True)\n    driver = UserSerializer(read_only=True)\n    delivery_fee = serializers.FloatField(read_only=True)  # Added delivery fee\n\n    class Meta:\n        model = Order\n        fields = [\n            \"id\", \"customer\", \"items\", \"restaurant_names\", \"total_fee\", \"tip\",\n            \"driver\", \"delivery_out_time\", \"delivery_complete_time\", \"delivery_fee\",\n            \"status\", \"restaurant\", \"method\",\n            \"restaurant_lat\", \"restaurant_lng\",\n            \"delivery_lat\", \"delivery_lng\"\n        ]\n\n    def create(self, validated_data):\n        items_data = validated_data.pop(\"items\")\n        user = self.context[\"request\"].user\n        order = Order.objects.create(**validated_data)\n\n        # Create OrderItems\n        for item_data in items_data:\n            menu_item_id = item_data.pop(\"menu_item_id\")\n            OrderItem.objects.create(order=order,user=user, menu_item_id=menu_item_id, **item_data)\n\n        # Compute restaurant names dynamically\n        restaurant_names = list(order.items.values_list(\"menu_item__restaurant__name\", flat=True).distinct())\n        order.restaurant_names = restaurant_names\n        order.save()\n        return order\n","size_bytes":1873},"ZimFeast/orders/migrations/0003_orderitem_order.py":{"content":"# Generated by Django 5.2.1 on 2025-10-03 08:53\n\nimport django.db.models.deletion\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('orders', '0002_alter_order_driver_alter_order_restaurant'),\n    ]\n\n    operations = [\n        migrations.AddField(\n            model_name='orderitem',\n            name='order',\n            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='items', to='orders.order'),\n        ),\n    ]\n","size_bytes":536},"src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"src/pages/home-components/PortalSelection.tsx":{"content":"import { PortalCard } from \"./PortalCard\";\nimport { User } from \"./types\";\n\ninterface PortalSelectionProps {\n  user?: User;\n  onNavigate: (portal: string) => void;\n}\n\nexport function PortalSelection({ user, onNavigate }: PortalSelectionProps) {\n  return (\n    <section className=\"py-16\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl font-bold mb-4\">Choose Your Portal</h2>\n          <p className=\"text-muted-foreground text-lg\">\n            Access different features based on your role\n          </p>\n        </div>\n\n        <div className={`grid grid-cols-1 gap-8 ${user?.role === 'admin' ? 'md:grid-cols-4' : 'md:grid-cols-3'}`}>\n          {user?.role === 'admin' && (\n            <PortalCard\n              title=\"Admin Dashboard\"\n              description=\"Review business applications and manage the platform\"\n              iconClass=\"fas fa-shield-alt text-purple-600\"\n              iconBgClass=\"bg-purple-100\"\n              buttonText=\"Admin Panel\"\n              buttonVariant=\"outline\"\n              buttonClass=\"border-purple-600 text-purple-600 hover:bg-purple-50\"\n              onClick={() => onNavigate('admin')}\n            />\n          )}\n\n          <PortalCard\n            title=\"Customer App\"\n            description=\"Browse restaurants, place orders, and track deliveries\"\n            iconClass=\"fas fa-shopping-bag text-primary\"\n            iconBgClass=\"bg-primary/10\"\n            buttonText=\"Order Food\"\n            onClick={() => onNavigate('customer')}\n          />\n\n          <PortalCard\n            title=\"Restaurant Dashboard\"\n            description=\"Manage your restaurant, menu, and orders\"\n            iconClass=\"fas fa-store text-secondary\"\n            iconBgClass=\"bg-secondary/10\"\n            buttonText=\"Manage Restaurant\"\n            buttonVariant=\"secondary\"\n            onClick={() => onNavigate('restaurant')}\n          />\n\n          <PortalCard\n            title=\"Driver App\"\n            description=\"Accept deliveries and manage your earnings\"\n            iconClass=\"fas fa-truck text-accent\"\n            iconBgClass=\"bg-accent/10\"\n            buttonText=\"Start Driving\"\n            buttonClass=\"bg-accent hover:bg-accent/90\"\n            onClick={() => onNavigate('driver')}\n          />\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":2371},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./index.html\", \"./src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2752},"ZimFeast/orders/admin.py":{"content":"from django.contrib import admin\n\n# Register your models here.\n","size_bytes":63},"ZimFeast/drivers/migrations/0003_driverfinance_driverrating.py":{"content":"# Generated by Django 5.2.1 on 2025-10-16 09:35\n\nimport django.db.models.deletion\nimport django.utils.timezone\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('drivers', '0002_alter_driver_vehicle_details'),\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='DriverFinance',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('date', models.DateField(default=django.utils.timezone.localdate)),\n                ('today_deliveries', models.IntegerField(default=0)),\n                ('today_earnings', models.DecimalField(decimal_places=2, default=0, max_digits=10)),\n                ('rating_sum', models.DecimalField(decimal_places=2, default=0, max_digits=5)),\n                ('rating_count', models.IntegerField(default=0)),\n                ('hours_online', models.DecimalField(decimal_places=2, default=0, max_digits=5)),\n                ('last_updated', models.DateTimeField(auto_now=True)),\n                ('driver', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='finances', to='drivers.driver')),\n            ],\n        ),\n        migrations.CreateModel(\n            name='DriverRating',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('rating', models.DecimalField(decimal_places=2, max_digits=3)),\n                ('comment', models.TextField(blank=True, null=True)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('driver', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ratings', to='drivers.driver')),\n                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),\n            ],\n        ),\n    ]\n","size_bytes":2071},"src/pages/business-components/ExternalIntegrations.tsx":{"content":"import { Input } from \"@/components/ui/input\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\n\ninterface Props {\n  register: any; // from react-hook-form\n}\n\nexport default function ExternalIntegrations({ register }: Props) {\n  return (\n    <div className=\"space-y-4 border p-4 rounded\">\n      <label className=\"flex items-center space-x-2\">\n        <Checkbox {...register(\"hasExternalMenu\")} />\n        <span>Use external menu API</span>\n      </label>\n      <Input placeholder=\"Menu API Endpoint\" {...register(\"menuApiEndpoint\")} />\n      <Input placeholder=\"Menu API Key\" {...register(\"menuApiKey\")} />\n      <Input placeholder=\"Menu API Name\" {...register(\"menuApiName\")} />\n\n      <label className=\"flex items-center space-x-2 mt-4\">\n        <Checkbox {...register(\"hasExternalOrderSystem\")} />\n        <span>Use external order API</span>\n      </label>\n      <Input placeholder=\"Order API Endpoint\" {...register(\"orderApiEndpoint\")} />\n      <Input placeholder=\"Order API Key\" {...register(\"orderApiKey\")} />\n      <Input placeholder=\"Order API Name\" {...register(\"orderApiName\")} />\n    </div>\n  );\n}\n","size_bytes":1113},"ZimFeast/restaurants/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass RestaurantsConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'restaurants'\n","size_bytes":154},"src/pages/customer-components/RestaurantGrid.tsx":{"content":"import RestaurantCard from \"@/components/RestaurantCard\";\nimport { Restaurant } from \"./types\";\n\ninterface RestaurantGridProps {\n  restaurants: Restaurant[];\n  currency: string;\n  addToCart: (item: any) => void;\n  userLocation: { lat: number; lng: number } | null;\n}\n\nexport default function RestaurantGrid({ restaurants, currency, addToCart, userLocation }: RestaurantGridProps) {\n  if (!restaurants || restaurants.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <i className=\"fas fa-search text-4xl text-muted-foreground mb-4\"></i>\n        <p className=\"text-muted-foreground\">No restaurants found</p>\n      </div>\n    );\n  }\n\n  // Split into two rows: top 5 and bottom 5\n  const topRow = restaurants.slice(0, 5);\n  const bottomRow = restaurants.slice(5, 10);\n\n  const renderRow = (row: typeof topRow) => (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-6\">\n      {row.map((r) => (\n        <RestaurantCard key={r.id} restaurant={r} currency={currency} onAddToCart={addToCart} userLocation={userLocation} />\n      ))}\n    </div>\n  );\n\n  return (\n    <section className=\"py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <h2 className=\"text-2xl font-bold mb-6\">Restaurants near you</h2>\n        {renderRow(topRow)}\n        {renderRow(bottomRow)}\n      </div>\n    </section>\n  );\n}\n","size_bytes":1384},"ZimFeast/restaurants/utils.py":{"content":"import logging\nimport requests\nfrom collections import defaultdict\n\nfrom asgiref.sync import async_to_sync\nfrom channels.layers import get_channel_layer\n\nfrom restaurants.models import Restaurant, RestaurantDashboard\n\nlogger = logging.getLogger(__name__)\n\nchannel_layer = get_channel_layer()  # WebSocket layer\n\ndef process_restaurant_orders(order):\n    \"\"\"\n    Called before assigning driver.1\n    order: Order object (already saved)\n    \n    For each restaurant involved:\n        - If restaurant has `place_order` API -> call it\n        - Else -> update internal dashboard\n    Returns: dict mapping restaurant_id -> order_number (only for those with API)\n    \"\"\"\n    # Group items by restaurant\n    items_by_restaurant = defaultdict(list)\n    for item in order.items.all():  # assumes OrderItem model with menu_item FK\n        items_by_restaurant[item.menu_item.restaurant_id].append(item)\n\n    restaurant_order_numbers = {}  # store returned order numbers for restaurants with API\n\n    for rest_id, items in items_by_restaurant.items():\n        restaurant = Restaurant.objects.get(id=rest_id)\n        api_entry = restaurant.external_apis.filter(category__iexact=\"place_order\").first()\n\n        if api_entry:\n            # Prepare payload for this restaurant\n            payload = {\n                \"order_id\": order.id,\n                \"customer_id\": order.customer.id,\n                \"items\": [\n                    {\n                        \"menu_item_id\": item.menu_item.id,\n                        \"quantity\": item.quantity,\n                        \"price\": float(item.price),\n                    } for item in items\n                ],\n                \"delivery_address\": {\n                    \"lat\": order.delivery_lat,\n                    \"lng\": order.delivery_lng,\n                },\n                \"total_fee\": float(order.total_fee),\n                \"tip\": float(order.tip or 0),\n            }\n\n            headers = {}\n            if api_entry.api_key:\n                headers[\"Authorization\"] = f\"Bearer {api_entry.api_key}\"\n\n            try:\n                response = requests.post(api_entry.api_url, json=payload, headers=headers, timeout=10)\n                response.raise_for_status()\n                data = response.json()\n                # expect external API returns {\"order_number\": \"...\"}\n                order_number = data.get(\"order_number\")\n                if order_number:\n                    restaurant_order_numbers[rest_id] = order_number\n            except Exception as e:\n                logger.warning(f\"Place_order API failed for restaurant {restaurant.id}: {e}\")\n                # fallback to internal dashboard below\n\n        if rest_id not in restaurant_order_numbers:\n            # No API -> update internal dashboard\n            update_restaurant_dashboard(restaurant, items, order)\n\n    return restaurant_order_numbers\n\ndef update_restaurant_dashboard(restaurant, items, order):\n    \"\"\"\n    Update internal restaurant dashboard model:\n    - Today's orders\n    - Revenue\n    - Average rating (hardcoded 3 for now)\n    - Live orders: pending -> preparing -> completed\n    \"\"\"\n    dashboard, _ = RestaurantDashboard.objects.get_or_create(restaurant=restaurant)\n\n    # Update metrics\n    dashboard.today_orders += 1\n    dashboard.today_revenue += sum(float(item.price) * item.quantity for item in items)\n    dashboard.today_average_rating = 3  # hardcoded for now\n\n    # Add order to pending list\n    order_data = {\n        \"order_id\": order.id,\n        \"items\": [{\"name\": item.menu_item.name, \"quantity\": item.quantity} for item in items],\n        \"total_fee\": float(order.total_fee),\n    }\n    dashboard.pending.append(order_data)\n\n    dashboard.save()\n\n    # Send live update via websocket\n    from asgiref.sync import async_to_sync\n    from channels.layers import get_channel_layer\n\n    channel_layer = get_channel_layer()\n    group_name = f\"restaurant_{restaurant.id}\"\n    async_to_sync(channel_layer.group_send)(\n        group_name,\n        {\n            \"type\": \"restaurant.dashboard.update\",\n            \"dashboard_data\": {\n                \"today_orders\": dashboard.today_orders,\n                \"today_revenue\": float(dashboard.today_revenue),\n                \"today_average_rating\": dashboard.today_average_rating,\n                \"preparing\": dashboard.preparing,\n                \"pending\": dashboard.pending,\n                \"completed\": dashboard.completed,\n            },\n        },\n    )\n","size_bytes":4442},"src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"src/pages/restaurant-components/MenuItemForm.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useForm, SubmitHandler } from \"react-hook-form\";\nimport {\n  Form,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface MenuItemFormValues {\n  name: string;\n  price: string;\n  description: string;\n  category: string;\n  preparationTime: number;\n  available: boolean;\n  image: FileList;\n}\n\ninterface MenuItemFormProps {\n  isEdit?: boolean;\n}\n\ninterface Category {\n  id: number;\n  name: string;\n}\n\nexport default function MenuItemForm({ isEdit = false }: MenuItemFormProps) {\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [loadingCategories, setLoadingCategories] = useState(true);\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n\n  const form = useForm<MenuItemFormValues>({\n    defaultValues: {\n      name: \"\",\n      price: \"0.00\",\n      description: \"\",\n      category: \"\",\n      preparationTime: 15,\n      available: true,\n    },\n  });\n\n  // Fetch categories from backend\n  useEffect(() => {\n    const fetchCategories = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const res = await fetch(\n          \"http://127.0.0.1:8000/api/restaurants/get/category/types/\",\n          {\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n          }\n        );\n\n        if (!res.ok) throw new Error(\"Failed to fetch categories\");\n\n        const data = await res.json();\n        if (Array.isArray(data) && data.length > 0) {\n          setCategories(data);\n        } else {\n          setCategories([]); // no categories\n        }\n      } catch (err) {\n        console.error(\"Error fetching categories:\", err);\n        setCategories([]); // fallback\n      } finally {\n        setLoadingCategories(false);\n      }\n    };\n\n    fetchCategories();\n  }, []);\n\n  const handleAddMenuItem: SubmitHandler<MenuItemFormValues> = async (data) => {\n    try {\n      // Validate that an image is selected\n      if (!data.image || data.image.length === 0) {\n        alert(\"Please select an image for the menu item.\");\n        return;\n      }\n\n      const token = localStorage.getItem(\"token\");\n\n      const formData = new FormData();\n      formData.append(\"name\", data.name);\n      formData.append(\"price\", data.price);\n      formData.append(\"description\", data.description);\n      formData.append(\"category\", data.category);\n      formData.append(\"prep_time\", data.preparationTime.toString());\n      formData.append(\"available\", data.available ? \"true\" : \"false\");\n      formData.append(\"item_image\", data.image[0]); // Add the image file\n\n      const response = await fetch(\n        \"http://127.0.0.1:8000/api/restaurants/add/menu-items/\",\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n          body: formData,\n        }\n      );\n\n      if (!response.ok) {\n        const error = await response.json();\n        console.error(\"Error adding menu item:\", error);\n        alert(\"Failed to add menu item. Check console for details.\");\n        return;\n      }\n\n      const result = await response.json();\n      console.log(\"Menu item added successfully:\", result);\n      alert(\"Menu item added successfully!\");\n      form.reset();\n      setImagePreview(null); // Clear image preview\n    } catch (err) {\n      console.error(err);\n      alert(\"An unexpected error occurred.\");\n    }\n  };\n\n  return (\n    <Form {...form}>\n      <form\n        onSubmit={form.handleSubmit(handleAddMenuItem)}\n        className=\"space-y-4\"\n      >\n        {/* Name */}\n        <FormField\n          control={form.control}\n          name=\"name\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Item Name</FormLabel>\n              <FormControl>\n                <Input {...field} />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        {/* Price */}\n        <FormField\n          control={form.control}\n          name=\"price\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Price</FormLabel>\n              <FormControl>\n                <Input {...field} />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        {/* Description */}\n        <FormField\n          control={form.control}\n          name=\"description\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Description</FormLabel>\n              <FormControl>\n                <Textarea {...field} />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        {/* Category */}\n        <FormField\n          control={form.control}\n          name=\"category\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Category</FormLabel>\n              <FormControl>\n                <Select\n                  value={field.value}\n                  onValueChange={field.onChange}\n                  disabled={loadingCategories || categories.length === 0}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder={\n                      loadingCategories\n                        ? \"Loading categories...\"\n                        : categories.length === 0\n                        ? \"No food category found\"\n                        : \"Select category\"\n                    } />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {categories.length > 0\n                      ? categories.map((cat) => (\n                          <SelectItem key={cat.id} value={cat.id.toString()}>\n                            {cat.name.charAt(0).toUpperCase() + cat.name.slice(1)}\n                          </SelectItem>\n                        ))\n                      : null}\n                  </SelectContent>\n                </Select>\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        {/* Preparation Time */}\n        <FormField\n          control={form.control}\n          name=\"preparationTime\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Preparation Time (min)</FormLabel>\n              <FormControl>\n                <Input type=\"number\" {...field} />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        {/* Available Switch */}\n        <FormField\n          control={form.control}\n          name=\"available\"\n          render={({ field }) => (\n            <FormItem className=\"flex flex-row items-center justify-between\">\n              <FormLabel>Available</FormLabel>\n              <FormControl>\n                <Switch\n                  checked={field.value}\n                  onCheckedChange={field.onChange}\n                />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        {/* Image Upload - MANDATORY */}\n        <FormField\n          control={form.control}\n          name=\"image\"\n          render={({ field: { onChange, value, ...field } }) => (\n            <FormItem>\n              <FormLabel className=\"text-red-600\">\n                Item Image <span className=\"text-sm\">(Required)</span>\n              </FormLabel>\n              <FormControl>\n                <div className=\"space-y-2\">\n                  <Input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    {...field}\n                    onChange={(e) => {\n                      onChange(e.target.files);\n                      // Preview the image\n                      if (e.target.files && e.target.files[0]) {\n                        const reader = new FileReader();\n                        reader.onload = (event) => {\n                          setImagePreview(event.target?.result as string);\n                        };\n                        reader.readAsDataURL(e.target.files[0]);\n                      }\n                    }}\n                    required\n                    className=\"cursor-pointer\"\n                  />\n                  {imagePreview && (\n                    <div className=\"mt-2 border rounded-lg p-2\">\n                      <p className=\"text-sm text-gray-600 mb-2\">Image Preview:</p>\n                      <img\n                        src={imagePreview}\n                        alt=\"Preview\"\n                        className=\"max-w-full h-48 object-cover rounded\"\n                      />\n                    </div>\n                  )}\n                </div>\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <Button type=\"submit\">{isEdit ? \"Update Item\" : \"Add Item\"}</Button>\n      </form>\n    </Form>\n  );\n}\n","size_bytes":9226},"src/pages/admin-components/DriverCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport StatusBadge from \"./StatusBadge\";\nimport { DriverApplication } from \"./types\";\nimport { MessageSquare } from \"lucide-react\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\n\ninterface Props {\n  driver: DriverApplication;\n  onReview: (app: DriverApplication, action: 'approve' | 'reject') => void;\n}\n\nexport default function DriverCard({ driver, onReview }: Props) {\n  return (\n    <Card className={driver.approvalStatus === 'pending' ? 'border-yellow-200' : ''}>\n      <CardContent className=\"p-6\">\n        <div className=\"flex justify-between items-start\">\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-3\">\n              <h3 className=\"font-semibold text-lg\">{driver.userName}</h3>\n              <StatusBadge status={driver.approvalStatus} />\n            </div>\n            <div className=\"text-sm text-muted-foreground space-y-1\">\n              <div><strong>Email:</strong> {driver.userEmail}</div>\n              <div><strong>Vehicle:</strong> {driver.vehicleType} - {driver.vehicleNumber}</div>\n              <div><strong>License:</strong> {driver.licenseNumber}</div>\n              <div><strong>Applied:</strong> {driver.createdAt ? new Date(driver.createdAt).toLocaleDateString() : 'N/A'}</div>\n            </div>\n            {driver.approvalComments && (\n              <Alert>\n                <MessageSquare className=\"h-4 w-4\" />\n                <AlertDescription>{driver.approvalComments}</AlertDescription>\n              </Alert>\n            )}\n          </div>\n\n          {driver.approvalStatus === 'pending' && (\n            <div className=\"flex gap-2\">\n              <Button onClick={() => onReview(driver, 'approve')} className=\"bg-green-600 hover:bg-green-700\" size=\"sm\">Approve</Button>\n              <Button onClick={() => onReview(driver, 'reject')} variant=\"destructive\" size=\"sm\">Reject</Button>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2075},"src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"src/pages/CustomerApp.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport Navbar from \"@/components/Navbar\";\nimport OrderTracking from \"@/components/OrderTracking\";\nimport { Button } from \"@/components/ui/button\";\n\nimport Header from \"./customer-components/Header\";\nimport QuickFilters from \"./customer-components/QuickFilters\";\nimport RestaurantGrid from \"./customer-components/RestaurantGrid\";\nimport CartComponent from \"./customer-components/CartComponent\";\nimport TopRestaurant from \"./customer-components/TopRestaurants\";\nimport { Restaurant, CartItem } from \"./customer-components/types\";\n\nexport default function CustomerApp() {\n  const { user, isAuthenticated, isLoading } = useAuth();\n  const { toast } = useToast();\n\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedCuisine, setSelectedCuisine] = useState(\"\");\n  const [currency, setCurrency] = useState(\"USD\");\n  const [isCartOpen, setIsCartOpen] = useState(false);\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\n  const [userLocation, setUserLocation] = useState<{ lat: number; lng: number } | null>(null);\n  const [showNearbyOnly, setShowNearbyOnly] = useState(false);\n  const [isGettingLocation, setIsGettingLocation] = useState(false);\n\n  const [nextCursor, setNextCursor] = useState<string | null>(null);\n  const [prevCursor, setPrevCursor] = useState<string | null>(null);\n  const [restaurantsData, setRestaurantsData] = useState<Restaurant[]>([]);\n\n  // Pagination states\n  const [gridPage, setGridPage] = useState(0);\n  const [topPage, setTopPage] = useState(0);\n\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You are logged out. Logging in again...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => (window.location.href = \"/login\"), 500);\n      return;\n    }\n  }, [isAuthenticated, isLoading, toast]);\n\n  const fetchRestaurants = async (cursorUrl?: string) => {\n    try {\n      let url: string;\n      \n      if (cursorUrl) {\n        url = cursorUrl;\n      } else {\n        const params = new URLSearchParams();\n        if (userLocation) {\n          params.append(\"lat\", userLocation.lat.toString());\n          params.append(\"lng\", userLocation.lng.toString());\n        }\n        if (selectedCuisine) params.append(\"cuisine\", selectedCuisine);\n        \n        url = `/api/restaurants/nearby/${params.toString() ? '?' + params.toString() : ''}`;\n      }\n\n      const token = localStorage.getItem(\"token\");\n      const res = await fetch(url, {\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n      });\n\n      if (!res.ok) throw new Error(\"Failed to fetch restaurants\");\n      const data = await res.json();\n      setRestaurantsData(data.results || data);\n      setNextCursor(data.next || null);\n      setPrevCursor(data.previous || null);\n    } catch (err: any) {\n      toast({ title: \"Error\", description: err.message || \"Failed to fetch restaurants\", variant: \"destructive\" });\n    }\n  };\n\n  useEffect(() => {\n    fetchRestaurants();\n  }, [userLocation, showNearbyOnly, selectedCuisine]);\n\n  const loadNext = () => {\n    if (!nextCursor) return;\n    fetchRestaurants(nextCursor);\n  };\n\n  const loadPrev = () => {\n    if (!prevCursor) return;\n    fetchRestaurants(prevCursor);\n  };\n\n  const toggleNearbyView = () => {\n    if (!showNearbyOnly) {\n      if (userLocation) setShowNearbyOnly(true);\n      else getCurrentLocation();\n    } else {\n      setShowNearbyOnly(false);\n    }\n  };\n\n  const getCurrentLocation = () => {\n    setIsGettingLocation(true);\n    if (!navigator.geolocation) {\n      toast({ title: \"Location Not Supported\", description: \"Your browser doesn't support geolocation\", variant: \"destructive\" });\n      setIsGettingLocation(false);\n      return;\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      (pos) => {\n        const { latitude, longitude } = pos.coords;\n        setUserLocation({ lat: latitude, lng: longitude });\n        setShowNearbyOnly(true);\n        setIsGettingLocation(false);\n        toast({ title: \"Location Found\", description: \"Showing nearby restaurants within 10km\", variant: \"default\" });\n      },\n      () => {\n        setIsGettingLocation(false);\n        toast({ title: \"Location Access Denied\", description: \"Enable location services to find nearby restaurants\", variant: \"destructive\" });\n      },\n      { enableHighAccuracy: true, timeout: 10000, maximumAge: 300000 }\n    );\n  };\n\n  const addToCart = (item: CartItem) => {\n    setCartItems((prev) => {\n      const existing = prev.find((i) => i.id === item.id);\n      if (existing) return prev.map((i) => (i.id === item.id ? { ...i, quantity: i.quantity + 1 } : i));\n      return [...prev, { ...item, quantity: 1 }];\n    });\n    setIsCartOpen(true);\n  };\n\n  if (isLoading) return <div className=\"min-h-screen flex items-center justify-center\">Loading...</div>;\n\n  // Pagination slices\n  const gridRestaurants = restaurantsData.slice(gridPage * 5, gridPage * 5 + 5);\n  const topRestaurants = restaurantsData\n    .filter(r => r.rating && r.rating >= 4) // filter by rating\n    .slice(topPage * 5, topPage * 5 + 5);\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Navbar />\n      <Header\n        searchTerm={searchTerm}\n        setSearchTerm={setSearchTerm}\n        currency={currency}\n        setCurrency={setCurrency}\n        toggleNearbyView={toggleNearbyView}\n        showNearbyOnly={showNearbyOnly}\n        isGettingLocation={isGettingLocation}\n        userLocation={userLocation}\n      />\n      <QuickFilters selectedCuisine={selectedCuisine} setSelectedCuisine={setSelectedCuisine} />\n\n      {/* Restaurants Grid */}\n      <RestaurantGrid\n        restaurants={gridRestaurants}\n        currency={currency}\n        addToCart={addToCart}\n        userLocation={userLocation}\n      />\n      <div className=\"flex justify-center gap-4 py-4\">\n        <Button onClick={() => setGridPage(p => Math.max(p - 1, 0))} disabled={gridPage === 0}>Previous 5</Button>\n        <Button onClick={() => setGridPage(p => (p + 1) * 5 < restaurantsData.length ? p + 1 : p)} disabled={(gridPage + 1) * 5 >= restaurantsData.length}>Next 5</Button>\n      </div>\n\n      {/* Top Restaurants */}\n      <TopRestaurant\n        restaurants={topRestaurants}\n        currency={currency}\n        addToCart={addToCart}\n        userLocation={userLocation}\n      />\n      <div className=\"flex justify-center gap-4 py-4\">\n        <Button onClick={() => setTopPage(p => Math.max(p - 1, 0))} disabled={topPage === 0}>Previous Top 5</Button>\n        <Button onClick={() => setTopPage(p => (p + 1) * 5 < restaurantsData.filter(r => r.rating && r.rating >= 4).length ? p + 1 : p)} disabled={(topPage + 1) * 5 >= restaurantsData.filter(r => r.rating && r.rating >= 4).length}>Next Top 5</Button>\n      </div>\n\n      <CartComponent\n        isOpen={isCartOpen}\n        onClose={() => setIsCartOpen(false)}\n        items={cartItems}\n        setItems={setCartItems}\n        currency={currency}\n        userLocation={userLocation}\n      />\n\n      <OrderTracking />\n\n      <Button\n        onClick={() => setIsCartOpen(true)}\n        className=\"fixed bottom-6 right-6 w-14 h-14 rounded-full shadow-lg hover:shadow-xl transition-shadow\">\n        <i className=\"fas fa-shopping-cart text-xl\"></i>\n        {cartItems.length > 0 && (\n          <span className=\"absolute -top-2 -right-2 bg-accent text-accent-foreground text-xs w-6 h-6 rounded-full flex items-center justify-center\">\n            {cartItems.reduce((sum, item) => sum + item.quantity, 0)}\n          </span>\n        )}\n      </Button>\n    </div>\n  );\n}\n","size_bytes":7782},"ZimFeast/payments/urls.py":{"content":"from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    # Payment initiation\n    path(\"create/payment/\", views.create_payment, name='create_payment'),\n\n    # PayNow automatic callback\n    path('result/', views.paynow_result, name='paynow_result'),\n\n    # (Optional) legacy PayNow callback\n    path('callback/', views.paynow_callback, name='paynow_callback'),\n\n    # Voucher deposit / top-up\n    path('deposit/', views.deposit_voucher, name='deposit_voucher'),\n\n    # Manual transaction status check\n    path('status/<str:reference>/', views.paynow_status, name='paynow_status'),\n\n    path(\"feast/voucher/balance/\", views.feast_voucher_balance, name=\"feast-voucher-balance\"),\n]\n","size_bytes":691},"src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"src/pages/restaurant-components/DashboardLayout.tsx":{"content":"import Navbar from \"@/components/Navbar\";\n\ninterface DashboardLayoutProps {\n  children: React.ReactNode;\n}\n\nexport default function DashboardLayout({ children }: DashboardLayoutProps) {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Navbar />\n      {children}\n    </div>\n  );\n}\n","size_bytes":298},"src/components/OrderTracking.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport DriverLocationMap from \"./DriverLocationMap\";\nimport { MapPin } from \"lucide-react\";\n\nexport default function OrderTracking() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isDriverMapOpen, setIsDriverMapOpen] = useState(false);\n\n  // Mock order data\n  const order = {\n    id: \"order-142\",\n    status: \"out_for_delivery\", // Changed to show driver tracking\n    items: [\"2x Sadza with Beef Stew\", \"1x Mazanje\"],\n    driver: {\n      name: \"John Mukamuri\",\n      vehicle: \"Toyota Vitz â€¢ ABC 123 GP\",\n      phone: \"+263 77 123 4567\"\n    },\n    timeline: [\n      { status: \"confirmed\", time: \"2:30 PM\", completed: true },\n      { status: \"preparing\", time: \"2:35 PM\", completed: true },\n      { status: \"out_for_delivery\", time: \"3:15 PM\", completed: true },\n      { status: \"delivered\", time: \"Estimated 3:30 PM\", completed: false }\n    ]\n  };\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case \"confirmed\": return \"Order Confirmed\";\n      case \"preparing\": return \"Restaurant Preparing\";\n      case \"out_for_delivery\": return \"Out for Delivery\";\n      case \"delivered\": return \"Delivered\";\n      default: return status;\n    }\n  };\n\n  if (!isOpen) {\n    return (\n      <Button\n        onClick={() => setIsOpen(true)}\n        className=\"fixed bottom-20 right-6 bg-secondary text-secondary-foreground hover:bg-secondary/90\"\n        data-testid=\"button-track-order\"\n      >\n        <i className=\"fas fa-map-marker-alt mr-2\"></i>\n        Track Order\n      </Button>\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n      <Card className=\"m-4 max-w-md w-full\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle data-testid=\"text-track-order-title\">Track Your Order</CardTitle>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setIsOpen(false)}\n              data-testid=\"button-close-tracking\"\n            >\n              <i className=\"fas fa-times\"></i>\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {order.timeline.map((step, index) => (\n              <div key={step.status} className=\"flex items-center space-x-3\">\n                <div className={`w-4 h-4 rounded-full ${\n                  step.completed ? 'bg-primary' : 'bg-muted'\n                }`}></div>\n                <div className=\"flex-1\">\n                  <p className={`font-medium ${step.completed ? '' : 'text-muted-foreground'}`}>\n                    {getStatusLabel(step.status)}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground\">{step.time}</p>\n                </div>\n              </div>\n            ))}\n          </div>\n          \n          {(order.status === \"preparing\" || order.status === \"out_for_delivery\") && (\n            <Card className=\"mt-6 p-4 bg-muted\">\n              <p className=\"text-sm font-medium mb-2\">Driver: {order.driver.name}</p>\n              <p className=\"text-sm text-muted-foreground mb-2\">{order.driver.vehicle}</p>\n              <div className=\"flex gap-2\">\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  data-testid=\"button-call-driver\"\n                >\n                  <i className=\"fas fa-phone mr-1\"></i>Call Driver\n                </Button>\n                {order.status === \"out_for_delivery\" && (\n                  <Button \n                    variant=\"default\" \n                    size=\"sm\"\n                    onClick={() => setIsDriverMapOpen(true)}\n                    data-testid=\"button-track-driver\"\n                  >\n                    <MapPin className=\"w-4 h-4 mr-1\" />\n                    Track Driver\n                  </Button>\n                )}\n              </div>\n            </Card>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Driver Location Map */}\n      <DriverLocationMap\n        orderId={order.id}\n        isOpen={isDriverMapOpen}\n        onClose={() => setIsDriverMapOpen(false)}\n      />\n    </div>\n  );\n}\n","size_bytes":4370},"src/pages/business-components/SignInRequired.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function SignInRequired() {\n  return (\n    <div className=\"min-h-screen bg-background flex items-center justify-center\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <CardTitle>Sign In Required</CardTitle>\n          <CardDescription>\n            Please sign in to access the Business Hub\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Button \n            onClick={() => window.location.href = '/login'}\n            className=\"w-full\"\n          >\n            Sign In\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":792},"src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"src/pages/home-components/PortalCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface PortalCardProps {\n  title: string;\n  description: string;\n  iconClass: string;\n  iconBgClass: string;\n  buttonText: string;\n  buttonVariant?: \"default\" | \"secondary\" | \"outline\";\n  onClick: () => void;\n  buttonClass?: string;\n}\n\nexport function PortalCard({\n  title,\n  description,\n  iconClass,\n  iconBgClass,\n  buttonText,\n  buttonVariant = \"default\",\n  onClick,\n  buttonClass,\n}: PortalCardProps) {\n  return (\n    <Card className=\"hover:shadow-lg transition-shadow cursor-pointer\" onClick={onClick}>\n      <CardContent className=\"p-8 text-center\">\n        <div className={`w-20 h-20 ${iconBgClass} rounded-full flex items-center justify-center mx-auto mb-6`}>\n          <i className={`${iconClass} text-3xl`}></i>\n        </div>\n        <h3 className=\"text-xl font-semibold mb-3\">{title}</h3>\n        <p className=\"text-muted-foreground mb-6\">{description}</p>\n        <Button \n          variant={buttonVariant} \n          className={`w-full ${buttonClass}`}\n        >\n          {buttonText}\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1170},"src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"ZimFeast/restaurants/models.py":{"content":"from django.db import models\nfrom django.conf import settings\nfrom django.utils import timezone\nimport uuid\n\nclass CuisineType(models.Model):\n    name = models.CharField(max_length=100, unique=True)\n\n    def __str__(self):\n        return self.name\n    \nclass CategoryType(models.Model):\n    name = models.CharField(max_length=100, unique=True)\n\n    def __str__(self):\n        return self.name\n\nclass Restaurant(models.Model):\n    owner = models.ForeignKey(\n        settings.AUTH_USER_MODEL,\n        related_name=\"restaurants\",\n        on_delete=models.CASCADE\n    )\n    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)\n    name = models.CharField(max_length=255)\n    phone_number = models.CharField(max_length=30, blank=True)\n    description = models.TextField(blank=True)\n    profile_image = models.ImageField(upload_to=\"restaurant_profiles/\", null=True, blank=True)\n    full_address = models.CharField(max_length=500)  # full textual address saved from frontend\n    lat = models.FloatField()\n    lng = models.FloatField()\n    minimum_order_price = models.DecimalField(max_digits=8, decimal_places=2, default=0)\n    est_delivery_time = models.CharField(max_length=50, blank=True)  # e.g. \"30-45 mins\"\n    cuisines = models.ManyToManyField(CuisineType, blank=True)\n    created = models.DateTimeField(auto_now_add=True)\n\n    def __str__(self):\n        return self.name\n\nclass RestaurantExternalAPI(models.Model):\n    \"\"\"\n    Stores external APIs provided by the restaurant.\n    category: arbitrary identifier used by the frontend/backend to decide which API to call,\n              e.g. 'menu_api', 'meal_data', 'categories', etc.\n    \"\"\"\n    restaurant = models.ForeignKey(\n        Restaurant,\n        related_name=\"external_apis\",\n        on_delete=models.CASCADE\n    )\n    category = models.CharField(max_length=100)\n    api_url = models.URLField()\n    api_key = models.CharField(max_length=255, blank=True, null=True)\n\n    class Meta:\n        unique_together = (\"restaurant\", \"category\")\n\n    def __str__(self):\n        return f\"{self.restaurant.name} - {self.category}\"\n\nclass MenuItem(models.Model):\n    restaurant = models.ForeignKey(\n        Restaurant,\n        related_name=\"menu_items\",\n        on_delete=models.CASCADE\n    )\n    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)\n    name = models.CharField(max_length=255)\n    price = models.DecimalField(max_digits=8, decimal_places=2)  # USD\n    description = models.TextField(blank=True)\n    category = models.ManyToManyField(CategoryType, blank=True)  # category is a string (e.g., Pizza, Burgers)\n    prep_time = models.IntegerField(null=True, blank=True, help_text=\"Preparation time in minutes\")\n    available = models.BooleanField(default=True)\n    item_image = models.ImageField(upload_to=\"menu_items/\")  # Mandatory field - enforced by frontend\n    created = models.DateTimeField(auto_now_add=True)\n\n    class Meta:\n        indexes = [\n            models.Index(fields=[\"restaurant\", \"name\"]),\n        ]\n\n    def __str__(self):\n        return f\"{self.restaurant.name} - {self.name}\"\n\nclass RestaurantDashboard(models.Model):\n    restaurant = models.OneToOneField(\n        \"Restaurant\", related_name=\"dashboard\", on_delete=models.CASCADE\n    )\n    today_orders = models.IntegerField(default=0)\n    today_revenue = models.DecimalField(max_digits=10, decimal_places=2, default=0)\n    today_average_rating = models.FloatField(default=3.0)  # default 3\n    preparing = models.JSONField(default=list)  # list of order IDs/items\n    pending = models.JSONField(default=list)    # list of order IDs/items\n    completed = models.JSONField(default=list)  # list of order IDs/items\n    last_updated = models.DateTimeField(auto_now=True)\n\n    def reset_today_if_needed(self):\n        \"\"\"\n        Optionally implement daily reset if needed\n        \"\"\"\n        today = timezone.now().date()\n        if getattr(self, \"_last_reset\", None) != today:\n            self.today_orders = 0\n            self.today_revenue = 0\n            self.preparing = []\n            self.pending = []\n            self.completed = []\n            self._last_reset = today\n            self.save()\n\n    def __str__(self):\n        return f\"Dashboard - {self.restaurant.name}\"","size_bytes":4252},"ZimFeast/drivers/views.py":{"content":"from rest_framework.decorators import api_view, permission_classes\nfrom rest_framework.permissions import IsAuthenticated\nfrom rest_framework.response import Response\nfrom rest_framework import status\nfrom .models import Driver, DriverOrderStatus\nfrom .serializer import DriverSerializer\nfrom drivers.utils import assign_driver\nfrom .models import DriverFinance, DriverRating\nimport requests\nfrom django.conf import settings\nfrom django.utils import timezone\nfrom rest_framework.pagination import CursorPagination\n\n@api_view(['POST'])\n@permission_classes([IsAuthenticated])\ndef create_driver_profile(request):\n    serializer = DriverSerializer(data=request.data, context={'request': request})\n\n    if serializer.is_valid():\n        serializer.save()  # âœ… remove user=request.user here\n        return Response(serializer.data, status=status.HTTP_201_CREATED)\n\n    return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n\n@api_view(['PUT'])\n@permission_classes([IsAuthenticated])\ndef toggle_driver_status(request):\n    try:\n        driver = request.user.driver_profile\n    except Driver.DoesNotExist:\n        return Response({\"error\": \"Driver profile not found\"}, status=404)\n\n    driver.is_online = not driver.is_online\n    driver.save()\n    return Response({\"is_online\": driver.is_online})\n\n@api_view(['POST'])\n@permission_classes([IsAuthenticated])\ndef reject_order(request, pk):\n    try:\n        driver = Driver.objects.get(user=request.user)\n        order = driver.orders.get(pk=pk)\n    except:\n        return Response({\"error\": \"Order not found or unauthorized\"}, status=404)\n    order.status = \"rejected\"\n    order.save()\n    return Response({\"message\": \"Order rejected\"})\n\n@api_view(['GET'])\n@permission_classes([IsAuthenticated])\ndef get_driver_status(request):\n    try:\n        driver = request.user.driver_profile\n    except Driver.DoesNotExist:\n        return Response({\"error\": \"Driver profile not found\"}, status=404)\n\n    return Response({\"is_online\": driver.is_online})\n\n@api_view(['POST'])\n@permission_classes([IsAuthenticated])\ndef update_driver_location(request):\n    try:\n        driver = request.user.driver_profile\n    except Driver.DoesNotExist:\n        return Response({\"error\": \"Driver profile not found\"}, status=404)\n\n    driver.lat = request.data.get(\"lat\")\n    driver.lng = request.data.get(\"lng\")\n    driver.save()\n    return Response({\"lat\": driver.lat, \"lng\": driver.lng})\n\n@api_view(['POST'])\n@permission_classes([IsAuthenticated])\ndef cancel_order(request, order_id):\n    try:\n        driver = request.user.driver_profile\n        driver_order = DriverOrderStatus.objects.get(driver=driver, order_id=order_id)\n    except DriverOrderStatus.DoesNotExist:\n        return Response({\"error\": \"No such order assigned\"}, status=404)\n\n    driver_order.status = \"cancelled\"\n    driver_order.save()\n    # Optionally reassign the order to another nearest driver\n    order = driver_order.order\n    assign_driver(order)\n    return Response({\"message\": \"Order cancelled and reassigned\"})\n\nGOOGLE_MAPS_API_KEY = settings.GOOGLE_MAPS_API_KEY  # put your key in .env and settings.py\n\ndef get_address_from_coordinates(lat, lng):\n    \"\"\"Use Google Maps API to convert coordinates into a human-readable address.\"\"\"\n    try:\n        url = f\"https://maps.googleapis.com/maps/api/geocode/json?latlng={lat},{lng}&key={GOOGLE_MAPS_API_KEY}\"\n        response = requests.get(url)\n        data = response.json()\n        if data[\"status\"] == \"OK\" and len(data[\"results\"]) > 0:\n            return data[\"results\"][0][\"formatted_address\"]\n        return None\n    except Exception as e:\n        print(\"Error decoding coordinates:\", e)\n        return None\n\n@api_view([\"GET\"])\n@permission_classes([IsAuthenticated])\ndef driver_active_orders(request):\n    \"\"\"\n    Return all active orders for the authenticated driver with status accepted or delivering.\n    \"\"\"\n    try:\n        driver_profile = request.user.driver_profile\n    except Driver.DoesNotExist:\n        return Response({\"error\": \"Driver profile not found\"}, status=404)\n\n    driver_orders_qs = (\n        DriverOrderStatus.objects.filter(\n            driver=driver_profile,\n            status__in=[\"accepted\", \"delivering\"]\n        )\n        .select_related(\"order\", \"order__customer\")\n    )\n\n    data = []\n    for dos in driver_orders_qs:\n        order = dos.order\n\n        # Try decoding address from lat/lng\n        decoded_address = None\n        if order.lat and order.lng:\n            decoded_address = get_address_from_coordinates(order.lat, order.lng)\n\n        data.append({\n            \"id\": str(order.id),\n            \"status\": dos.status,\n            \"fee\": float(order.delivery_fee),\n            \"location\": decoded_address\n                        or getattr(order, \"delivery_address\", None)\n                        or getattr(order.customer, \"address\", None)\n        })\n\n    return Response(data)\n\nclass DriverOrderCursorPagination(CursorPagination):\n    page_size = 5\n    ordering = \"-completed_at\"  # Show most recent completed/cancelled orders first\n\n@api_view([\"GET\"])\n@permission_classes([IsAuthenticated])\ndef driver_completed_cancelled_orders(request):\n    \"\"\"\n    Returns all driver orders with status 'completed' or 'cancelled' (5 per page, cursor pagination).\n    \"\"\"\n    try:\n        driver_profile = request.user.driver_profile\n    except Driver.DoesNotExist:\n        return Response({\"error\": \"Driver profile not found\"}, status=status.HTTP_404_NOT_FOUND)\n\n    # Get queryset of completed and cancelled orders\n    driver_orders_qs = (\n        DriverOrderStatus.objects.filter(\n            driver=driver_profile,\n            status__in=[\"completed\", \"cancelled\"]\n        )\n        .select_related(\"order\", \"order__customer\")\n        .order_by(\"-completed_at\")  # needed for cursor pagination\n    )\n\n    paginator = DriverOrderCursorPagination()\n    paginated_qs = paginator.paginate_queryset(driver_orders_qs, request)\n\n    data = []\n    for dos in paginated_qs:\n        order = dos.order\n        decoded_address = None\n        if order.lat and order.lng:\n            decoded_address = get_address_from_coordinates(order.lat, order.lng)\n\n        data.append({\n            \"id\": str(order.id),\n            \"status\": dos.status,\n            \"fee\": float(order.delivery_fee),\n            \"location\": decoded_address\n                        or getattr(order, \"delivery_address\", None)\n                        or getattr(order.customer, \"address\", None),\n            \"completed_at\": dos.completed_at.isoformat() if dos.completed_at else None,\n        })\n\n    return paginator.get_paginated_response(data)\n\n@api_view([\"GET\", \"POST\"])\n@permission_classes([IsAuthenticated])\ndef driver_finance_view(request):\n    try:\n        driver = request.user.driver_profile\n    except Driver.DoesNotExist:\n        return Response({\"error\": \"Driver profile not found\"}, status=status.HTTP_404_NOT_FOUND)\n\n    # Get or create today's finance record\n    finance, created = DriverFinance.objects.get_or_create(driver=driver, date=timezone.localdate())\n    \n    # Reset if it is a new day\n    finance.reset_if_new_day()\n\n    if request.method == \"POST\":\n        data = request.data\n        rating = float(data.get(\"rating\", 0))\n        deliveries = int(data.get(\"today_deliveries\", 0))\n        earnings = float(data.get(\"today_earnings\", 0))\n        hours_online = float(data.get(\"hours_online\", 0))\n\n        # Update finance\n        if rating > 0:\n            finance.rating_sum += rating\n            finance.rating_count += 1\n        finance.today_deliveries += deliveries\n        finance.today_earnings += earnings\n        finance.hours_online += hours_online\n        finance.save()\n\n        return Response({\"message\": \"Finance updated\", \"finance\": {\n            \"today_deliveries\": finance.today_deliveries,\n            \"today_earnings\": float(finance.today_earnings),\n            \"average_rating\": float(finance.average_rating),\n            \"hours_online\": float(finance.hours_online)\n        }}, status=status.HTTP_200_OK)\n\n    # GET request\n    return Response({\n        \"today_deliveries\": finance.today_deliveries,\n        \"today_earnings\": float(finance.today_earnings),\n        \"average_rating\": float(finance.average_rating),\n        \"hours_online\": float(finance.hours_online)\n    })\n\n@api_view([\"POST\"])\n@permission_classes([IsAuthenticated])\ndef submit_driver_rating(request, driver_id):\n    \"\"\"\n    Submit a rating for a driver.\n    \"\"\"\n    try:\n        driver = Driver.objects.get(id=driver_id)\n    except Driver.DoesNotExist:\n        return Response({\"error\": \"Driver not found\"}, status=status.HTTP_404_NOT_FOUND)\n\n    rating_value = float(request.data.get(\"rating\", 0))\n    comment = request.data.get(\"comment\", \"\")\n\n    if rating_value <= 0 or rating_value > 5:\n        return Response({\"error\": \"Rating must be between 1 and 5\"}, status=status.HTTP_400_BAD_REQUEST)\n\n    # Save the rating\n    rating_obj = DriverRating.objects.create(\n        driver=driver,\n        user=request.user,\n        rating=rating_value,\n        comment=comment\n    )\n\n    # Update today's finance\n    finance, created = DriverFinance.objects.get_or_create(driver=driver, date=timezone.localdate())\n    finance.reset_if_new_day()\n    finance.rating_sum += rating_value\n    finance.rating_count += 1\n    finance.save()\n\n    return Response({\n        \"message\": \"Rating submitted\",\n        \"rating\": float(rating_obj.rating),\n        \"today_average_rating\": float(finance.average_rating)\n    }, status=status.HTTP_201_CREATED)","size_bytes":9495},"src/pages/admin-components/StatusBadge.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { Check, X, Clock } from \"lucide-react\";\n\ninterface StatusBadgeProps {\n  status: 'pending' | 'approved' | 'rejected' | string;\n}\n\nexport default function StatusBadge({ status }: StatusBadgeProps) {\n  switch (status) {\n    case 'pending':\n      return <Badge variant=\"outline\" className=\"text-yellow-600 border-yellow-600\"><Clock className=\"w-3 h-3 mr-1\" />Pending</Badge>;\n    case 'approved':\n      return <Badge variant=\"outline\" className=\"text-green-600 border-green-600\"><Check className=\"w-3 h-3 mr-1\" />Approved</Badge>;\n    case 'rejected':\n      return <Badge variant=\"outline\" className=\"text-red-600 border-red-600\"><X className=\"w-3 h-3 mr-1\" />Rejected</Badge>;\n    default:\n      return <Badge variant=\"outline\">{status}</Badge>;\n  }\n}\n","size_bytes":804},"src/pages/driver-components/types.ts":{"content":"export interface Order {\n  id: string;\n  status: string;\n  driverId?: string;\n  deliveryAddress: string;\n  deliveryFee: number;\n  customerName: string;\n  customerPhone: string;\n  createdAt?: string;\n}\n\nexport interface Driver {\n  id: string;\n  firstName: string;\n  rating?: number;\n  isAvailable: boolean;\n}\n","size_bytes":308},"ZimFeast/orders/migrations/0005_rename_lat_order_delivery_lat_and_more.py":{"content":"# Generated by Django 5.2.1 on 2025-10-16 09:35\n\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('orders', '0004_order_lat_order_lng'),\n    ]\n\n    operations = [\n        migrations.RenameField(\n            model_name='order',\n            old_name='lat',\n            new_name='delivery_lat',\n        ),\n        migrations.RenameField(\n            model_name='order',\n            old_name='lng',\n            new_name='delivery_lng',\n        ),\n        migrations.AddField(\n            model_name='order',\n            name='method',\n            field=models.CharField(blank=True, choices=[('delivery', 'delivery'), ('collection', 'collection')], max_length=20, null=True),\n        ),\n        migrations.AddField(\n            model_name='order',\n            name='restaurant_lat',\n            field=models.FloatField(blank=True, null=True),\n        ),\n        migrations.AddField(\n            model_name='order',\n            name='restaurant_lng',\n            field=models.FloatField(blank=True, null=True),\n        ),\n    ]\n","size_bytes":1086},"ZimFeast/restaurants/admin.py":{"content":"from django.contrib import admin\nfrom .models import CuisineType, Restaurant, RestaurantExternalAPI, MenuItem\n\n@admin.register(CuisineType)\nclass CuisineTypeAdmin(admin.ModelAdmin):\n    list_display = (\"id\", \"name\")\n    search_fields = (\"name\",)\n\n@admin.register(Restaurant)\nclass RestaurantAdmin(admin.ModelAdmin):\n    list_display = (\"id\", \"name\", \"owner\", \"phone_number\", \"lat\", \"lng\", \"minimum_order_price\")\n    search_fields = (\"name\", \"owner__email\", \"phone_number\", \"full_address\")\n    list_filter = (\"cuisines\",)\n\n@admin.register(RestaurantExternalAPI)\nclass RestaurantExternalAPIAdmin(admin.ModelAdmin):\n    list_display = (\"id\", \"restaurant\", \"category\", \"api_url\")\n    search_fields = (\"restaurant__name\", \"category\", \"api_url\")\n\n@admin.register(MenuItem)\nclass MenuItemAdmin(admin.ModelAdmin):\n    list_display = (\"id\", \"restaurant\", \"name\", \"price\", \"get_categories\", \"available\")\n    search_fields = (\"name\", \"restaurant__name\", \"category__name\")\n    list_filter = (\"available\", \"category\")\n\n    # Custom method to display ManyToMany field\n    def get_categories(self, obj):\n        return \", \".join([cat.name for cat in obj.category.all()])\n    get_categories.short_description = 'Categories'\n","size_bytes":1208},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"ZimFeast/payments/views.py":{"content":"import uuid\nimport requests\nfrom decimal import Decimal\nfrom django.conf import settings\nfrom django.shortcuts import get_object_or_404\nfrom rest_framework.decorators import api_view, permission_classes\nfrom rest_framework.permissions import IsAuthenticated\nfrom rest_framework.response import Response\nfrom rest_framework import status\nfrom .models import Payment, FeastVoucher\nfrom restaurants.utils import process_restaurant_orders\nfrom drivers.utils import assign_driver\nfrom .receipt_email import send_order_receipt\nfrom .paynow_utils import paynow, create_paynow_payment\nfrom orders.models import Order\n\n# Example PayNow URLs\nPAYNOW_SANDBOX_URL = settings.PAYNOW_SANDBOX_URL\nPAYNOW_RETURN_URL = settings.PAYNOW_RETURN_URL\nPAYNOW_RESULT_URL = settings.PAYNOW_RESULT_URL\n\n\ndef generate_paynow_payload(reference, amount, email):\n    return {\n        \"resulturl\": PAYNOW_RESULT_URL,\n        \"returnurl\": PAYNOW_RETURN_URL,\n        \"id\": settings.PAYNOW_INTEGRATION_ID,\n        \"reference\": reference,\n        \"amount\": str(amount),\n        \"additionalinfo\": \"\",\n        \"authemail\": email,\n        \"status\": \"Message\",\n    }\n\n\n# ------------------------------------------------------------------------------\n# MAIN PAYMENT CREATION ENDPOINT\n# ------------------------------------------------------------------------------\n@api_view(['POST'])\n@permission_classes([IsAuthenticated])\ndef create_payment(request):\n    user = request.user\n    order_id = request.data.get(\"order_id\")\n    method = request.data.get(\"method\", \"paynow\")  # 'paynow' or 'voucher'\n    phone = request.data.get(\"phone\")\n\n    # --- Validate UUID ---\n    try:\n        order_uuid = uuid.UUID(order_id)\n    except ValueError:\n        return Response({\"error\": \"Invalid order ID\"}, status=status.HTTP_400_BAD_REQUEST)\n\n    # --- Get Order instance ---\n    try:\n        order = Order.objects.get(id=order_uuid, customer=user)\n    except Order.DoesNotExist:\n        return Response({\"error\": \"Order not found\"}, status=status.HTTP_404_NOT_FOUND)\n\n    total_amount = Decimal(order.total_fee or 0) + Decimal(order.tip or 0)\n\n    # --- Create a payment reference ---\n    reference = f\"PMT_{uuid.uuid4().hex[:10]}\"\n\n    # --- Create Payment record in DB ---\n    payment = Payment.objects.create(\n        user=user,\n        order=order,\n        reference=reference,\n        amount=total_amount,\n        method=method,\n        status=\"pending\"\n    )\n\n    # --- 1ï¸âƒ£ Voucher payment ---\n    if method == \"voucher\":\n        voucher, _ = FeastVoucher.objects.get_or_create(user=user)\n        if voucher.balance >= total_amount:\n            voucher.balance -= total_amount\n            voucher.save()\n            payment.status = \"paid\"\n            payment.save()\n            order.status = \"paid\"\n            order.save()\n            return Response({\"status\": \"paid_with_voucher\"})\n        else:\n            remaining = total_amount - voucher.balance\n            voucher.balance = 0\n            voucher.save()\n            payment.amount = remaining\n            payment.method = \"paynow\"\n            payment.save()\n\n            payment_response = create_paynow_payment(order, user.email)\n            if payment_response.success:\n                payment.reference = payment_response.pollurl\n                payment.save()\n                order.reference = payment_response.pollurl\n                order.save()\n                return Response({\n                    \"status\": \"partial\",\n                    \"paynow_url\": payment_response.redirect_url\n                })\n            return Response({\"error\": \"Failed to initiate PayNow for remaining amount\"}, status=400)\n\n    # --- 2ï¸âƒ£ PayNow Web ---\n    if method == \"paynow\" and not phone:\n        response = create_paynow_payment(order, user.email)\n        if response.success:\n            payment.reference = response.pollurl\n            payment.save()\n            order.reference = response.pollurl\n            order.save()\n            return Response({\"paynow_url\": response.redirect_url})\n        return Response({\"error\": \"Failed to initialize PayNow Web payment\"}, status=400)\n\n    # --- 3ï¸âƒ£ PayNow Mobile ---\n    if method == \"paynow\" and phone:\n        response = paynow.send_mobile(\n            f\"Order_{order.id}\",\n            phone,\n            float(total_amount),\n            f\"Order #{order.id}\",\n            email=user.email\n        )\n        if response.success:\n            payment.reference = response.pollurl\n            payment.save()\n            order.reference = response.pollurl\n            order.save()\n            return Response({\n                \"paynow_url\": response.redirect_url,\n                \"instructions\": \"Please check your phone to approve the transaction.\",\n                \"reference\": response.pollurl\n            })\n        return Response({\"success\": False, \"message\": \"Failed to initiate mobile payment.\"})\n\n    return Response({\"error\": \"Invalid payment method\"}, status=400)\n\n\n# ------------------------------------------------------------------------------\n# PAYNOW CALLBACK ENDPOINT (Legacy)\n# ------------------------------------------------------------------------------\n@api_view([\"POST\"])\ndef paynow_callback(request):\n    \"\"\"\n    Legacy callback endpoint called by PayNow to update payment status.\n    \"\"\"\n    reference = request.data.get(\"reference\")\n    status_pay = request.data.get(\"status\")  # \"Paid\" or \"Failed\"\n\n    payment = get_object_or_404(Payment, reference=reference)\n    payment.status = status_pay.lower()\n    payment.save()\n\n    restaurant_order_numbers = {}\n    driver = None\n\n    # Update order status if paid\n    if status_pay.lower() == \"paid\" and payment.order:\n        order = payment.order\n        order.is_paid = True\n        order.save()\n\n        restaurant_order_numbers = process_restaurant_orders(order)\n        driver = assign_driver(order, restaurant_order_numbers)\n\n        try:\n            send_order_receipt(\n                customer_email=order.customer.email,\n                customer_name=order.customer.get_full_name(),\n                order=order,\n                restaurants=order.restaurant_names,\n                receipt={}\n            )\n            print(\"âœ… Receipt sent successfully to customer\")\n        except Exception as e:\n            print(f\"âš ï¸ Failed to send receipt: {e}\")\n\n    return Response({\n        \"status\": \"ok\",\n        \"assigned_driver\": driver.id if driver else None,\n        \"restaurant_order_numbers\": restaurant_order_numbers\n    })\n\n\n# ------------------------------------------------------------------------------\n# PAYNOW AUTOMATED RESULT ENDPOINT\n# ------------------------------------------------------------------------------\n@api_view([\"POST\"])\ndef paynow_result(request):\n    \"\"\"\n    Official PayNow RESULT URL endpoint.\n    PayNow sends a POST here when a payment completes or fails.\n    \"\"\"\n    print(\"ðŸ“© PayNow Result Callback:\", request.data)\n\n    reference = request.data.get(\"reference\")\n    status_pay = request.data.get(\"status\")\n\n    if not reference or not status_pay:\n        return Response({\"error\": \"Invalid callback payload\"}, status=400)\n\n    payment = get_object_or_404(Payment, reference=reference)\n    payment.status = status_pay.lower()\n    payment.save()\n\n    driver = None\n    restaurant_order_numbers = {}\n\n    if status_pay.lower() == \"paid\" and getattr(payment, \"order\", None):\n        order = payment.order\n        order.is_paid = True\n        order.save()\n\n        # Process restaurants and assign driver\n        restaurant_order_numbers = process_restaurant_orders(order)\n        driver = assign_driver(order, restaurant_order_numbers)\n\n        # Send email receipt\n        try:\n            send_order_receipt(\n                customer_email=order.customer.email,\n                customer_name=order.customer.get_full_name(),\n                order=order,\n                restaurants=order.restaurant_names,\n                receipt={}\n            )\n            print(f\"âœ… Payment confirmed for {order.id}. Receipt sent.\")\n        except Exception as e:\n            print(f\"âš ï¸ Error sending receipt: {e}\")\n\n    return Response({\n        \"status\": \"payment_confirmed\" if status_pay.lower() == \"paid\" else \"payment_failed\",\n        \"reference\": reference,\n        \"assigned_driver\": driver.id if driver else None,\n        \"restaurant_order_numbers\": restaurant_order_numbers\n    })\n\n\n# ------------------------------------------------------------------------------\n# VOUCHER DEPOSIT\n# ------------------------------------------------------------------------------\n@api_view(['POST'])\n@permission_classes([IsAuthenticated])\ndef deposit_voucher(request):\n    user = request.user\n    amount = Decimal(request.data.get(\"amount\", \"0\"))\n    if amount <= 0:\n        return Response({\"error\": \"Invalid amount\"}, status=400)\n\n    # Create PayNow payment for voucher top-up\n    payment = paynow.create_payment(f\"VoucherTopup_{user.id}\", user.email)\n    payment.add(\"Voucher Deposit\", float(amount))\n    response = paynow.send(payment)\n\n    if response.success:\n        # Always return paynow_url for frontend WebView\n        return Response({\n            \"paynow_url\": response.redirect_url,\n            \"reference\": response.pollurl\n        })\n    return Response({\"error\": \"Failed to initiate voucher top-up\"}, status=400)\n\n# ------------------------------------------------------------------------------\n# MANUAL STATUS CHECK\n# ------------------------------------------------------------------------------\n@api_view(['GET'])\n@permission_classes([IsAuthenticated])\ndef paynow_status(request, reference):\n    \"\"\"\n    Manual check for a PayNow transactionâ€™s current status.\n    \"\"\"\n    response = paynow.check_transaction_status(reference)\n    return Response(response)\n\n@api_view([\"GET\"])\n@permission_classes([IsAuthenticated])\ndef feast_voucher_balance(request):\n    \"\"\"\n    Returns the authenticated user's Feast Voucher balance.\n    \"\"\"\n    try:\n        # Get the latest FeastVoucher for the user (or sum all balances)\n        vouchers = FeastVoucher.objects.filter(user=request.user)\n        total_balance = sum(v.balance for v in vouchers) if vouchers.exists() else Decimal(\"0.00\")\n\n        return Response({\"balance\": str(total_balance)}, status=status.HTTP_200_OK)\n    except Exception as e:\n        return Response({\"detail\": str(e)}, status=status.HTTP_400_BAD_REQUEST)","size_bytes":10351},"ZimFeast/orders/utils.py":{"content":"from geopy.distance import distance as geo_distance\nfrom geopy.distance import geodesic\n\ndef calculate_distance_kms(point_a, point_b):\n    \"\"\"\n    Calculate distance in kilometers between two points using geopy.\n    point_a and point_b should be tuples: (latitude, longitude)\n    Example:\n        point_a = (restaurant.latitude, restaurant.longitude)\n        point_b = (order.delivery_address_lat, order.delivery_address_lng)\n    Returns distance in km as float.\n    \"\"\"\n    return geodesic(point_a, point_b).km\n\ndef calculate_distance_km(a_lat, a_lng, b_lat, b_lng):\n    return geo_distance((a_lat,a_lng),(b_lat,b_lng)).km\n\ndef validate_restaurant_group(restaurants):\n    # restaurants: iterable of restaurant objects with lat,lng\n    coords = [(r.lat, r.lng) for r in restaurants]\n    for i in range(len(coords)):\n        for j in range(i+1, len(coords)):\n            if calculate_distance_km(coords[i][0],coords[i][1],coords[j][0],coords[j][1]) > 5:\n                return False\n    return True","size_bytes":997},"src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"src/pages/business-components/Header.tsx":{"content":"interface HeaderProps {\n  name?: string;\n}\n\nexport default function Header({ name }: HeaderProps) {\n  return (\n    <header className=\"bg-primary text-primary-foreground py-12\">\n      <div className=\"max-w-4xl mx-auto px-4 text-center\">\n        <h1 className=\"text-4xl font-bold mb-4\">ZimFeast Business Hub</h1>\n        <p className=\"text-xl opacity-90 mb-2\">\n          Join Zimbabwe's fastest-growing food delivery platform\n        </p>\n        <p className=\"text-lg opacity-80\">\n          Welcome, {name}! Ready to grow your business with us?\n        </p>\n      </div>\n    </header>\n  );\n}\n","size_bytes":591},"src/pages/customer-components/types.ts":{"content":"export interface Restaurant {\n  id: string;\n  name: string;\n  description?: string;\n  cuisineType: 'traditional' | 'fast_food' | 'pizza' | 'chinese' | 'indian' | 'breakfast' | 'desserts' | 'other' | 'lunch_pack';\n  latitude?: number;\n  longitude?: number;\n  rating?: number;\n  image?: string;\n}\n\nexport interface CartItem {\n  id: string;\n  name: string;\n  price: number;\n  quantity: number;\n  restaurantId?: string;\n  restaurantLat?: number;\n  restaurantLng?: number;\n}\n","size_bytes":470},"src/pages/home-components/BusinessHub.tsx":{"content":"import { Button } from \"@/components/ui/button\";\n\nexport function BusinessHub() {\n  return (\n    <section className=\"py-16 bg-muted/30\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n        <h2 className=\"text-2xl font-bold mb-4\">Join ZimFeast as a Business Partner</h2>\n        <p className=\"text-muted-foreground mb-8 max-w-2xl mx-auto\">\n          Are you a restaurant owner or a delivery driver looking to grow your business with ZimFeast? \n          Join our platform today and reach thousands of customers across Zimbabwe.\n        </p>\n        <Button \n          onClick={() => window.location.href = '/business-hub'}\n          size=\"lg\"\n          className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600\"\n        >\n          <i className=\"fas fa-handshake mr-2\"></i>\n          Join Business Hub\n        </Button>\n      </div>\n    </section>\n  );\n}\n","size_bytes":921},"src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"ZimFeast/orders/models.py":{"content":"from django.db import models\nfrom django.conf import settings\nimport uuid\n\nclass OrderItem(models.Model):\n    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='cart_items')\n    order = models.ForeignKey('Order', on_delete=models.CASCADE, related_name='items', null=True, blank=True)\n    menu_item = models.ForeignKey('restaurants.MenuItem', on_delete=models.CASCADE)\n    quantity = models.PositiveIntegerField(default=1)\n    added = models.DateTimeField(auto_now_add=True)\n\n    def price(self):\n        return self.menu_item.price * self.quantity\n\nclass Order(models.Model):\n    STATUS_CHOICES = (\n        ('created','created'), ('paid','paid'), ('assigned','assigned'), \n        ('out_for_delivery','out_for_delivery'), ('delivered','delivered'), ('cancelled','cancelled')\n    )\n    METHOD_CHOICES = (\n        ('delivery', 'delivery'),\n        ('collection', 'collection')\n    )\n\n    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)\n    customer = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='customer_orders')\n    created = models.DateTimeField(auto_now_add=True)\n    status = models.CharField(max_length=50, choices=STATUS_CHOICES, default='created')\n    method = models.CharField(max_length=20, choices=METHOD_CHOICES, blank=True, null=True)\n    restaurant_names = models.TextField()  # comma separated\n    total_fee = models.DecimalField(max_digits=10, decimal_places=2)\n    tip = models.DecimalField(max_digits=8, decimal_places=2, default=0)\n    driver = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE,null=True, blank=True, related_name=\"driver_orders\")\n    restaurant = models.ForeignKey(\"restaurants.Restaurant\", on_delete=models.CASCADE, related_name=\"orders\")\n    each_item_price = models.JSONField(default=list)\n    delivery_out_time = models.DateTimeField(null=True, blank=True)\n    delivery_complete_time = models.DateTimeField(null=True, blank=True)\n    external_order_numbers = models.JSONField(default=dict)\n    delivery_fee = models.DecimalField(max_digits=8, decimal_places=2, default=0)\n    # restaurant location\n    restaurant_lat = models.FloatField(blank=True, null=True)\n    restaurant_lng = models.FloatField(blank=True, null=True)\n    # delivery location (optional, only for delivery)\n    delivery_lat = models.FloatField(blank=True, null=True)\n    delivery_lng = models.FloatField(blank=True, null=True)\n\n    def __str__(self):\n        return f\"Order {self.id} - {self.customer.email}\"","size_bytes":2542},"ZimFeast/accounts/token.py":{"content":"import jwt\nfrom jwt.exceptions import InvalidTokenError, ExpiredSignatureError\nfrom rest_framework.authentication import BaseAuthentication\nfrom rest_framework.exceptions import AuthenticationFailed\nfrom django.conf import settings\nfrom django.contrib.auth import get_user_model\nfrom datetime import datetime, timedelta\nimport copy\n\nimport logging\n\nfrom .models import BlacklistedToken\nlogger = logging.getLogger(__name__)\n\nUser = get_user_model()\n\nclass JWTAuthentication(BaseAuthentication):\n\n    @staticmethod\n    def generate_token(payload):\n        expiration = datetime.utcnow() + timedelta(days=30)\n        token_payload = copy.deepcopy(payload)\n        token_payload['exp'] = int(expiration.timestamp())\n        token_payload['type'] = 'access_token'\n        token_payload['id'] = payload['user_id']  \n\n        return jwt.encode(token_payload, key=settings.SECRET_KEY, algorithm='HS256')\n    \n    @staticmethod\n    def generate_refresh_token(payload):\n        expiration = datetime.utcnow() + timedelta(days=60)\n        token_payload = copy.deepcopy(payload)\n        token_payload['exp'] = int(expiration.timestamp())\n        token_payload['type'] = 'refresh_token'\n        token_payload['user_id'] = str(payload['user_id'])\n\n        return jwt.encode(token_payload, key=settings.SECRET_KEY, algorithm='HS256')\n\n    def extract_token(self, request):\n        auth_header = request.headers.get('Authorization')\n        if auth_header and auth_header.startswith('Bearer '):\n            return auth_header.split(' ')[1]\n        return None\n\n    def verify_token(self, payload, token_type='access_token'):\n        if 'exp' not in payload:\n            raise InvalidTokenError(\"Token has no expiration\")\n\n        exp_timestamp = payload['exp']\n        current_timestamp = int(datetime.utcnow().timestamp())\n\n        if current_timestamp > exp_timestamp:\n            raise ExpiredSignatureError(\"Token has expired\")\n\n        if payload.get('type') != token_type:\n            raise InvalidTokenError(f\"Expected token type '{token_type}', got '{payload.get('type')}'\")\n\n    def authenticate(self, request):\n        token = self.extract_token(request)\n        if not token:\n            return None\n\n        try:\n            # Decode the token\n            payload = jwt.decode(token, settings.SECRET_KEY, algorithms=['HS256'])\n\n            # Verify the token\n            self.verify_token(payload, token_type='access_token')\n\n            if BlacklistedToken.objects.filter(token=token).exists():\n                raise AuthenticationFailed(\"Token has been blacklisted.\")\n\n            # Extract user ID from payload\n            user_id = payload.get('user_id')\n            if not user_id:\n                #logger.debug(\"No user ID found in token payload.\")\n                raise AuthenticationFailed(\"Token missing user ID.\")\n\n            # Look up user by ID\n            user = User.objects.get(id=user_id)\n\n            return (user, token)\n\n        except (InvalidTokenError, ExpiredSignatureError, User.DoesNotExist, jwt.DecodeError) as e:\n            # If there's an error, log it\n            raise AuthenticationFailed(f\"Invalid Token: {str(e)}\")","size_bytes":3145},"src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}","size_bytes":115},"ZimFeast/drivers/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.1 on 2025-10-01 09:18\n\nimport django.db.models.deletion\nimport uuid\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        ('orders', '0001_initial'),\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='Driver',\n            fields=[\n                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),\n                ('license_number', models.CharField(max_length=50)),\n                ('license_photo', models.ImageField(upload_to='drivers/license_photos/')),\n                ('vehicle_details', models.CharField(max_length=200)),\n                ('vehicle_photo', models.ImageField(upload_to='drivers/vehicle_photos/')),\n                ('is_online', models.BooleanField(default=False)),\n                ('lat', models.FloatField(blank=True, null=True)),\n                ('lng', models.FloatField(blank=True, null=True)),\n                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='driver_profile', to=settings.AUTH_USER_MODEL)),\n            ],\n        ),\n        migrations.CreateModel(\n            name='DriverOrderStatus',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('status', models.CharField(choices=[('pending', 'Pending'), ('accepted', 'Accepted'), ('delivering', 'Delivering'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='pending', max_length=50)),\n                ('assigned_at', models.DateTimeField(auto_now_add=True)),\n                ('completed_at', models.DateTimeField(blank=True, null=True)),\n                ('driver', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='current_order', to='drivers.driver')),\n                ('order', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='assigned_driver_status', to='orders.order')),\n            ],\n        ),\n        migrations.CreateModel(\n            name='DriverReject',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('order_id', models.CharField(max_length=100)),\n                ('reason', models.CharField(blank=True, max_length=255)),\n                ('rejected_at', models.DateTimeField(auto_now_add=True)),\n                ('driver', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='drivers.driver')),\n            ],\n        ),\n    ]\n","size_bytes":2745},"src/pages/driver-components/Header.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nexport default function Header({ user, isOnline, toggleOnlineMutation }: any) {\n  return (\n    <header className=\"bg-accent text-accent-foreground\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-2xl font-bold\">Driver Dashboard</h1>\n          <p className=\"text-accent-foreground/80\">Welcome back, {user?.firstName || 'Driver'}</p>\n        </div>\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"flex items-center space-x-2\">\n            <div className={`w-3 h-3 rounded-full ${isOnline ? 'bg-green-500' : 'bg-red-500'}`}></div>\n            <span>{isOnline ? 'Online' : 'Offline'}</span>\n          </div>\n          <Button onClick={() => toggleOnlineMutation.mutate()}>{isOnline ? 'Go Offline' : 'Go Online'}</Button>\n        </div>\n      </div>\n    </header>\n  );\n}\n","size_bytes":946},"src/pages/customer-components/Header.tsx":{"content":"// customer-app-components/Header.tsx\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectTrigger, SelectValue, SelectContent, SelectItem } from \"@/components/ui/select\";\n\ninterface HeaderProps {\n  searchTerm: string;\n  setSearchTerm: (value: string) => void;\n  currency: string;\n  setCurrency: (value: string) => void;\n  toggleNearbyView: () => void;\n  showNearbyOnly: boolean;\n  isGettingLocation: boolean;\n  userLocation: { lat: number; lng: number } | null;\n}\n\nexport default function Header({\n  searchTerm,\n  setSearchTerm,\n  currency,\n  setCurrency,\n  toggleNearbyView,\n  showNearbyOnly,\n  isGettingLocation,\n  userLocation,\n}: HeaderProps) {\n  return (\n    <header className=\"bg-primary text-primary-foreground\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"flex flex-col lg:flex-row justify-between items-start lg:items-center\">\n          <div className=\"mb-6 lg:mb-0\">\n            <h1 className=\"text-3xl lg:text-4xl font-bold mb-2\">Delicious food, delivered fast</h1>\n            <p className=\"text-xl opacity-90\">Order from your favorite restaurants in Zimbabwe</p>\n          </div>\n\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"text-right\">\n              <p className=\"text-sm opacity-75\">Currency</p>\n              <Select value={currency} onValueChange={setCurrency}>\n                <SelectTrigger className=\"bg-white/10 border-white/20 text-primary-foreground\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"USD\">USD ($)</SelectItem>\n                  <SelectItem value=\"ZWL\">ZWL (Z$)</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </div>\n\n        {/* Search Bar and Location */}\n        <div className=\"mt-8 max-w-2xl\">\n          <div className=\"flex space-x-4\">\n            <div className=\"relative flex-1\">\n              <i className=\"fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400\"></i>\n              <Input\n                type=\"text\"\n                placeholder=\"Search restaurants, cuisines, or dishes...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"w-full pl-12 pr-4 py-4 rounded-xl bg-white text-gray-900 text-lg placeholder-gray-400\"\n              />\n            </div>\n            <Button\n              onClick={toggleNearbyView}\n              disabled={isGettingLocation}\n              className={`px-6 py-4 rounded-xl text-lg whitespace-nowrap ${\n                showNearbyOnly\n                  ? 'bg-white text-primary border-2 border-white hover:bg-gray-50'\n                  : 'bg-white/20 text-white border-2 border-white/30 hover:bg-white/30'\n              }`}\n            >\n              {isGettingLocation ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin mr-2\"></i>Getting Location...\n                </>\n              ) : showNearbyOnly ? (\n                <>\n                  <i className=\"fas fa-map-marker-alt mr-2\"></i>Show All\n                </>\n              ) : (\n                <>\n                  <i className=\"fas fa-location-arrow mr-2\"></i>Find Nearby\n                </>\n              )}\n            </Button>\n          </div>\n          {showNearbyOnly && userLocation && (\n            <div className=\"mt-2 text-sm text-white/80\">\n              <i className=\"fas fa-info-circle mr-1\"></i>Showing restaurants within 10km of your location\n            </div>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n}\n","size_bytes":3726},"ZimFeast/accounts/urls.py":{"content":"from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path(\"register/\", views.register_user, name=\"register_user\"),\n    path(\"login/\", views.login_user, name=\"login_user\"),\n    path(\"profile/\", views.get_profile, name=\"get_profile\"),\n    path('logout/', views.logout, name='logout'),\n]\n","size_bytes":302},"src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"ZimFeast/orders/__init__.py":{"content":"","size_bytes":0},"src/pages/admin-components/types.ts":{"content":"export interface RestaurantApplication {\n  id: string;\n  name: string;\n  ownerName: string;\n  ownerEmail: string;\n  cuisineType: string;\n  address: string;\n  city: string;\n  phone: string;\n  deliveryFee: number;\n  description?: string;\n  menuImages?: string[];\n  approvalStatus: 'pending' | 'approved' | 'rejected';\n  approvalComments?: string;\n  createdAt?: string;\n}\n\nexport interface DriverApplication {\n  id: string;\n  userName: string;\n  userEmail: string;\n  vehicleType: string;\n  vehicleNumber: string;\n  licenseNumber: string;\n  approvalStatus: 'pending' | 'approved' | 'rejected';\n  approvalComments?: string;\n  createdAt?: string;\n}\n","size_bytes":643},"src/lib/withRoleGuard.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ninterface Props {\n  allowedRoles: Array<\"customer\" | \"driver\" | \"restaurant\" | \"admin\">;\n}\n\nexport function withRoleGuard<T extends {}>(\n  WrappedComponent: React.FC<T>,\n  allowedRoles: Props[\"allowedRoles\"]\n) {\n  return function GuardedComponent(props: T) {\n    const { user, isLoading, isAuthenticated } = useAuth();\n    const [unauthorized, setUnauthorized] = useState(false);\n\n    useEffect(() => {\n      if (!isLoading && isAuthenticated && user && !allowedRoles.includes(user.role)) {\n        setUnauthorized(true);\n      }\n    }, [isLoading, isAuthenticated, user]);\n\n    if (isLoading) return <div>Loading...</div>;\n\n    if (!isAuthenticated) {\n      return <div className=\"p-4 text-red-600 font-bold\">Unauthorized: Please log in</div>;\n    }\n\n    if (unauthorized) {\n      return <div className=\"p-4 text-red-600 font-bold\">Unauthorized: You cannot access this portal</div>;\n    }\n\n    return <WrappedComponent {...props} />;\n  };\n}\n","size_bytes":1031},"src/pages/AdminDashboard.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport Navbar from \"@/components/Navbar\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from \"@/components/ui/dialog\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport { Store, Truck } from \"lucide-react\";\nimport RestaurantCard from \"./admin-components/RestaurantCard\";\nimport DriverCard from \"./admin-components/DriverCard\";\nimport { RestaurantApplication, DriverApplication } from \"./admin-components/types\";\n\n// Wrap applications with type\ntype SelectedApplication = (RestaurantApplication | DriverApplication) & { type: 'restaurant' | 'driver' };\n\nexport default function AdminDashboard() {\n  const { user, isAuthenticated } = useAuth();\n  const { toast } = useToast();\n  const [selectedApp, setSelectedApp] = useState<SelectedApplication | null>(null);\n  const [reviewAction, setReviewAction] = useState<'approve' | 'reject' | null>(null);\n  const [reviewComments, setReviewComments] = useState(\"\");\n  const [isReviewDialogOpen, setIsReviewDialogOpen] = useState(false);\n\n  //the actual API calls are happening inside \"@/lib/queryClient\"\n  const { data: userProfile } = useQuery<any>({\n    queryKey: ['/api/auth/user'],\n    enabled: !!user,\n  });\n  const isAdmin = userProfile?.role === 'admin';\n\n  const { data: restaurantApps } = useQuery<RestaurantApplication[]>({\n    queryKey: ['/api/admin/restaurant-applications'],\n    enabled: isAuthenticated && isAdmin,\n  });\n\n  const { data: driverApps } = useQuery<DriverApplication[]>({\n    queryKey: ['/api/admin/driver-applications'],\n    enabled: isAuthenticated && isAdmin,\n  });\n\n  const reviewMutation = useMutation({\n    mutationFn: async ({ type, id, action, comments }: { type: 'restaurant' | 'driver'; id: string; action: 'approve' | 'reject'; comments: string }) => {\n      return await apiRequest(\"POST\", `/api/admin/${type}-applications/${id}/review`, { action, comments });\n    },\n    onSuccess: (data, variables) => {\n      toast({ title: \"Application Reviewed\", description: `${variables.type} application ${variables.action}d`, variant: \"default\" });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/restaurant-applications'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/driver-applications'] });\n      setIsReviewDialogOpen(false);\n      setSelectedApp(null);\n      setReviewAction(null);\n      setReviewComments(\"\");\n    },\n    onError: (error: any) => {\n      toast({ title: \"Review Failed\", description: error.message || \"Failed to review application\", variant: \"destructive\" });\n    }\n  });\n\n  const handleReview = (app: RestaurantApplication | DriverApplication, type: 'restaurant' | 'driver', action: 'approve' | 'reject') => {\n    setSelectedApp({ ...app, type });\n    setReviewAction(action);\n    setIsReviewDialogOpen(true);\n  };\n\n  const submitReview = () => {\n    if (!selectedApp || !reviewAction) return;\n    reviewMutation.mutate({ type: selectedApp.type, id: selectedApp.id, action: reviewAction, comments: reviewComments });\n  };\n\n  if (!isAuthenticated) return <div>Please login as admin</div>;\n  //if (!isAdmin) return <div>Access Denied</div>;\n\n  const pendingRestaurants = restaurantApps?.filter(app => app.approvalStatus === 'pending') || [];\n  const pendingDrivers = driverApps?.filter(app => app.approvalStatus === 'pending') || [];\n\n  const getAppName = (app: SelectedApplication | null) => {\n    if (!app) return '';\n    return 'name' in app ? app.name : app.userName;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Navbar />\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <h1 className=\"text-3xl font-bold mb-2\">Admin Dashboard</h1>\n\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n          <Card>\n            <CardHeader className=\"pb-2\"><CardTitle>Pending Restaurants</CardTitle></CardHeader>\n            <CardContent>{pendingRestaurants.length}</CardContent>\n          </Card>\n          <Card>\n            <CardHeader className=\"pb-2\"><CardTitle>Pending Drivers</CardTitle></CardHeader>\n            <CardContent>{pendingDrivers.length}</CardContent>\n          </Card>\n          <Card>\n            <CardHeader className=\"pb-2\"><CardTitle>Total Restaurants</CardTitle></CardHeader>\n            <CardContent>{restaurantApps?.length || 0}</CardContent>\n          </Card>\n          <Card>\n            <CardHeader className=\"pb-2\"><CardTitle>Total Drivers</CardTitle></CardHeader>\n            <CardContent>{driverApps?.length || 0}</CardContent>\n          </Card>\n        </div>\n\n        {/* Tabs */}\n        <Card>\n          <CardHeader><CardTitle>Business Applications</CardTitle></CardHeader>\n          <CardContent>\n            <Tabs defaultValue=\"restaurants\">\n              <TabsList className=\"grid w-full grid-cols-2\">\n                <TabsTrigger value=\"restaurants\"><Store className=\"w-4 h-4 mr-2\" />Restaurants ({pendingRestaurants.length})</TabsTrigger>\n                <TabsTrigger value=\"drivers\"><Truck className=\"w-4 h-4 mr-2\" />Drivers ({pendingDrivers.length})</TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"restaurants\" className=\"space-y-4\">\n                {restaurantApps?.map(r => (\n                  <RestaurantCard key={r.id} restaurant={r} onReview={(app, action) => handleReview(app, 'restaurant', action)} />\n                ))}\n              </TabsContent>\n\n              <TabsContent value=\"drivers\" className=\"space-y-4\">\n                {driverApps?.map(d => (\n                  <DriverCard key={d.id} driver={d} onReview={(app, action) => handleReview(app, 'driver', action)} />\n                ))}\n              </TabsContent>\n            </Tabs>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Review Dialog */}\n      <Dialog open={isReviewDialogOpen} onOpenChange={setIsReviewDialogOpen}>\n        <DialogContent className=\"sm:max-w-[525px]\">\n          <DialogHeader>\n            <DialogTitle>{reviewAction === 'approve' ? 'Approve' : 'Reject'} Application</DialogTitle>\n            <DialogDescription>\n              {reviewAction\n                ? `${reviewAction === 'approve' ? 'Approve' : 'Reject'} ${getAppName(selectedApp)}?`\n                : ''}\n            </DialogDescription>\n          </DialogHeader>\n\n          <Textarea\n            value={reviewComments}\n            onChange={e => setReviewComments(e.target.value)}\n            placeholder={reviewAction === 'reject' ? 'Reason...' : 'Notes...'}\n            className=\"mt-2\"\n          />\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setIsReviewDialogOpen(false)}>Cancel</Button>\n            <Button\n              onClick={submitReview}\n              disabled={reviewMutation.isPending || (reviewAction === 'reject' && !reviewComments.trim())}\n            >\n              {reviewAction === 'approve' ? 'Approve' : 'Reject'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":7453},"ZimFeast/restaurants/migrations/0003_categorytype_and_more.py":{"content":"# Generated by Django 5.2.1 on 2025-10-03 10:05\n\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('restaurants', '0002_alter_menuitem_id'),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='CategoryType',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('name', models.CharField(max_length=100, unique=True)),\n            ],\n        ),\n        migrations.RemoveIndex(\n            model_name='menuitem',\n            name='restaurants_restaur_741f8f_idx',\n        ),\n        migrations.RemoveField(\n            model_name='menuitem',\n            name='category',\n        ),\n        migrations.AddIndex(\n            model_name='menuitem',\n            index=models.Index(fields=['restaurant', 'name'], name='restaurants_restaur_303786_idx'),\n        ),\n        migrations.AddField(\n            model_name='menuitem',\n            name='category',\n            field=models.ManyToManyField(blank=True, to='restaurants.categorytype'),\n        ),\n    ]\n","size_bytes":1141},"ZimFeast/orders/views.py":{"content":"from rest_framework.decorators import api_view, permission_classes\nfrom rest_framework.permissions import IsAuthenticated, AllowAny\nfrom rest_framework.response import Response\nfrom rest_framework import status\nfrom .models import Order\nfrom .serializers import OrderSerializer\nfrom rest_framework import generics\n\n@api_view(['POST'])\n@permission_classes([IsAuthenticated])\ndef create_order(request):\n    serializer = OrderSerializer(data=request.data, context={\"request\": request})\n    if serializer.is_valid():\n        order = serializer.save(customer=request.user)\n\n        # Calculate delivery fee only if method is delivery\n        if order.method == \"delivery\" and order.delivery_lat and order.delivery_lng:\n            '''\n            # Example: compute distance-based fee\n            distance = calculate_distance_kms(\n                (order.restaurant_lat, order.restaurant_lng),\n                (order.delivery_lat, order.delivery_lng)\n            )\n            order.delivery_fee = round(distance * 0.35, 2)\n            '''\n            order.delivery_fee = 5  # placeholder fee\n        else:\n            order.delivery_fee = 0\n\n        # Add delivery fee to total_fee\n        order.total_fee = order.total_fee + order.delivery_fee\n        order.save()\n\n        return Response({\n            \"order\": OrderSerializer(order).data,\n        }, status=status.HTTP_201_CREATED)\n\n    return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n\n\nclass OrderListView(generics.ListAPIView):\n    serializer_class = OrderSerializer\n    permission_classes = [IsAuthenticated]\n    pagination_class = None  # Optional: DRF default pagination is enough\n\n    def get_queryset(self):\n        user = self.request.user\n        if user.role == \"customer\":\n            return Order.objects.filter(customer=user)\n        elif user.role == \"driver\":\n            return Order.objects.filter(driver=user)\n        elif user.role == \"restaurant\":\n            return Order.objects.filter(restaurant__owner=user)\n        return Order.objects.none()\n\n@api_view(['POST'])\n@permission_classes([IsAuthenticated])\ndef cancel_order(request, pk):\n    try:\n        order = Order.objects.get(pk=pk, customer=request.user)\n    except Order.DoesNotExist:\n        return Response({\"error\": \"Order not found\"}, status=404)\n    if order.status in [\"pending\", \"accepted\"]:\n        order.status = \"cancelled\"\n        order.save()\n        return Response({\"message\": \"Order cancelled\"})\n    return Response({\"error\": \"Cannot cancel this order\"}, status=400)\n\n@api_view(['GET'])\n@permission_classes([AllowAny])\ndef get_all_orders(request):\n    \"\"\"\n    Returns all orders in the system.\n    \"\"\"\n    orders = Order.objects.all().order_by('-created')  # latest first\n    serializer = OrderSerializer(orders, many=True)\n    return Response(serializer.data)\n\n@api_view(['GET'])\n@permission_classes([AllowAny])\ndef get_order(request, pk):\n    \"\"\"\n    Returns a single order by primary key (id).\n    \"\"\"\n    try:\n        order = Order.objects.get(pk=pk)\n    except Order.DoesNotExist:\n        return Response({\"detail\": \"Order not found.\"}, status=status.HTTP_404_NOT_FOUND)\n\n    serializer = OrderSerializer(order)\n    return Response(serializer.data)","size_bytes":3220},"ZimFeast/restaurants/urls.py":{"content":"from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    # Restaurant creation & update\n    path('create/', views.create_restaurant, name='create_restaurant'),\n    \n    # Restaurant detail & nearby (PUT SPECIFIC PATHS BEFORE DYNAMIC PATHS)\n    path('nearby/', views.list_nearby_restaurants, name='nearby_restaurants'),\n    path('get/all/', views.list_restaurants),\n    \n    # Menu items (PUT BEFORE DYNAMIC RESTAURANT_ID)\n    path('add/menu-items/', views.add_menu_item, name='add_menu_item'),\n    path(\"menu/<str:menu_id>/delete/\", views.delete_menu_item, name=\"delete_menu_item\"),\n    path('menu/', views.get_menu_items, name='restaurant_menu'),\n    \n    # Cuisine and category (PUT BEFORE DYNAMIC RESTAURANT_ID)\n    path('create/cuisine/', views.create_cuisine, name='create_cuisine'),\n    path('get/cuisine/types/', views.list_cuisines, name='list_cuisine'),\n    path('create/category/', views.create_category, name='create_cuisine'),\n    path('get/category/types/', views.list_categories, name='list_cuisine'),\n    \n    # Dynamic restaurant ID patterns (MUST BE AFTER SPECIFIC PATHS)\n    path('<str:restaurant_id>/', views.update_restaurant, name='update_restaurant'),\n    path('<str:restaurant_id>/detail/', views.get_restaurant_detail, name='restaurant_detail'),\n\n    # External APIs\n    path('<str:restaurant_id>/external-apis/', views.add_external_api, name='add_external_api'),\n\n    # Categories and menu data\n    path('<str:restaurant_id>/categories/', views.get_categories, name='get_categories'),\n    path('<str:restaurant_id>/menu/', views.get_menu_data, name='get_menu_data'),\n\n    # Order status updates\n    path('orders/<str:order_id>/preparing/', views.mark_order_preparing, name='mark_order_preparing'),\n    path('orders/<str:order_id>/completed/', views.mark_order_completed, name='mark_order_completed'),\n]\n","size_bytes":1841},"src/pages/DriverApp.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport Navbar from \"@/components/Navbar\";\nimport { toggleDriverStatus, getDriverStatus, getActiveDriverOrders } from \"./driver-components/driverApi\";\n\n// Child Components\nimport Header from \"./driver-components/Header\";\nimport StatsSection from \"./driver-components/StatsSection\";\nimport ActiveDeliveries from \"./driver-components/ActiveDeliveries\";\nimport DeliveryHistory from \"./driver-components/DeliveryHistory\";\nimport EarningsOverview from \"./driver-components/EarningsOverview\";\n\n// Role Guard\nimport { withRoleGuard } from \"@/lib/withRoleGuard\";\n\n// Types\nimport { Order, Driver } from \"./driver-components/types\";\n\ninterface EarningsData {\n  today: number;\n  week: number;\n  month: number;\n  total: number;\n}\n\ninterface StatsData {\n  deliveriesToday: number;\n  hoursOnline: number;\n}\n\nfunction DriverAppInner() {\n  const { user, isAuthenticated, isLoading } = useAuth();\n  const { toast } = useToast();\n  const [isOnline, setIsOnline] = useState(false);\n\n  // Fetch driver status\n  const { refetch: refetchStatus } = useQuery({\n    queryKey: [\"driver-status\", user?.id],\n    queryFn: async () => {\n      const res = await getDriverStatus();\n      setIsOnline(res.is_online);\n      return res;\n    },\n    enabled: isAuthenticated && !!user,\n  });\n\n  // Toggle online/offline\n  const toggleOnlineMutation = useMutation({\n    mutationFn: async () => {\n      const res = await toggleDriverStatus();\n      setIsOnline(res.is_online);\n      return res.is_online;\n    },\n    onSuccess: (isNowOnline) => {\n      toast({\n        title: isNowOnline ? \"Gone Online\" : \"Gone Offline\",\n        description: isNowOnline ? \"Ready for deliveries\" : \"You are offline\",\n      });\n    },\n    onError: (err: any) => {\n      toast({\n        title: \"Error\",\n        description: err.message || \"Failed to change status\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Fetch active deliveries from backend\n  const { data: activeDeliveries, isLoading: activeDeliveriesLoading } = useQuery<Order[]>({\n  queryKey: [\"driver-active-orders\", user?.id],\n  queryFn: async () => {\n    // Uncomment the next lines to fetch from backend\n    // const res = await getActiveDriverOrders(); // returns {id, status, fee, location}[]\n    // return res.map(o => ({\n    //   id: o.id,\n    //   status: o.status,\n    //   deliveryFee: o.fee,\n    //   deliveryAddress: o.location || \"\",\n    //   customerName: \"Unknown\",\n    //   customerPhone: \"Unknown\",\n    //   driverId: user?.id,\n    // }));\n\n    // DEMO DATA\n    return [\n      {\n        id: \"11111111-1111-1111-1111-111111111111\",\n        status: \"accepted\",\n        deliveryFee: 5.0,\n        deliveryAddress: \"123 Main Street\",\n        customerName: \"John Doe\",\n        customerPhone: \"+263771234567\",\n        driverId: user?.id,\n      },\n      {\n        id: \"22222222-2222-2222-2222-222222222222\",\n        status: \"delivering\",\n        deliveryFee: 7.5,\n        deliveryAddress: \"456 Second Ave\",\n        customerName: \"Jane Smith\",\n        customerPhone: \"+263778765432\",\n        driverId: user?.id,\n      },\n    ];\n  },\n  enabled: isAuthenticated && !!user,\n});\n\n  // Other queries\n  const { data: driverProfile } = useQuery<Driver>({\n    queryKey: [\"driver-profile\", user?.id],\n    enabled: isAuthenticated && !!user,\n  });\n\n  const { data: earningsData } = useQuery<EarningsData>({\n    queryKey: [\"driver-earnings\", user?.id],\n    enabled: isAuthenticated && !!user,\n  });\n\n  // Fetch driver daily finance (StatsSection data)\nconst { data: statsData } = useQuery({\n  queryKey: [\"driver-daily-finance\", user?.id],\n  queryFn: async () => {\n    // Uncomment to fetch from backend\n    // const res = await fetch(`/api/drivers/daily/finance/`);\n    // const json = await res.json();\n    // return json;\n\n    // DEMO DATA\n    return {\n      today_deliveries: 4,\n      today_earnings: 42.75,\n      average_rating: 4.8,\n      hours_online: 5.5,\n    };\n  },\n  enabled: isAuthenticated && !!user,\n});\n\n  if (isLoading || activeDeliveriesLoading) return (\n    <div className=\"min-h-screen flex items-center justify-center\">\n      <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full\" />\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Navbar />\n      <Header user={user} isOnline={isOnline} toggleOnlineMutation={toggleOnlineMutation} />\n\n      <StatsSection\n        todayEarnings={statsData?.today_earnings ?? 0}\n        todayDeliveries={statsData?.today_deliveries ?? 0}\n        rating={statsData?.average_rating ?? 0}\n        hoursOnline={statsData?.hours_online ?? 0}\n      />\n\n      <ActiveDeliveries\n        activeDeliveries={activeDeliveries ?? []}\n        assignedOrder={null} />\n\n      <DeliveryHistory />\n    </div>\n  );\n}\n\nexport default withRoleGuard(DriverAppInner, [\"driver\", \"admin\"]);\n","size_bytes":4996},"ZimFeast/payments/admin.py":{"content":"from django.contrib import admin\n\n# Register your models here.\n","size_bytes":63},"src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"src/pages/admin-components/RestaurantCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport StatusBadge from \"./StatusBadge\";\nimport { RestaurantApplication } from \"./types\";\nimport { MessageSquare } from \"lucide-react\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\n\ninterface Props {\n  restaurant: RestaurantApplication;\n  onReview: (app: RestaurantApplication, action: 'approve' | 'reject') => void;\n}\n\nexport default function RestaurantCard({ restaurant, onReview }: Props) {\n  return (\n    <Card className={restaurant.approvalStatus === 'pending' ? 'border-yellow-200' : ''}>\n      <CardContent className=\"p-6\">\n        <div className=\"flex justify-between items-start\">\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-3\">\n              <h3 className=\"font-semibold text-lg\">{restaurant.name}</h3>\n              <StatusBadge status={restaurant.approvalStatus} />\n            </div>\n            <div className=\"text-sm text-muted-foreground space-y-1\">\n              <div><strong>Owner:</strong> {restaurant.ownerName} ({restaurant.ownerEmail})</div>\n              <div><strong>Cuisine:</strong> {restaurant.cuisineType}</div>\n              <div><strong>Address:</strong> {restaurant.address}, {restaurant.city}</div>\n              <div><strong>Phone:</strong> {restaurant.phone}</div>\n              <div><strong>Delivery Fee:</strong> ${restaurant.deliveryFee}</div>\n              <div><strong>Applied:</strong> {restaurant.createdAt ? new Date(restaurant.createdAt).toLocaleDateString() : 'N/A'}</div>\n            </div>\n            {restaurant.description && <p className=\"text-sm text-muted-foreground\">{restaurant.description}</p>}\n            {restaurant.approvalComments && (\n              <Alert>\n                <MessageSquare className=\"h-4 w-4\" />\n                <AlertDescription>{restaurant.approvalComments}</AlertDescription>\n              </Alert>\n            )}\n          </div>\n\n          {restaurant.approvalStatus === 'pending' && (\n            <div className=\"flex gap-2\">\n              <Button onClick={() => onReview(restaurant, 'approve')} className=\"bg-green-600 hover:bg-green-700\" size=\"sm\">Approve</Button>\n              <Button onClick={() => onReview(restaurant, 'reject')} variant=\"destructive\" size=\"sm\">Reject</Button>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2425},"src/components/demo-data/demoRestaurants.ts":{"content":"// components/demo-data/demoRestaurants.ts\nimport { Restaurant } from \"../../pages/customer-components/types\";\n\nexport const demoRestaurants: Restaurant[] = [\n  {\n    id: \"1\",\n    name: \"KFC\",\n    cuisineType: \"fast_food\",\n    description: \"Finger licking good\",\n    latitude: 12.34,\n    longitude: 56.78,\n    rating: 4.9,\n    image: \"/images/bella-italia.jpg\",\n  },\n  {\n    id: \"2\",\n    name: \"Sushi World\",\n    cuisineType: \"other\", // no \"japanese\" option, so use \"other\"\n    description: \"Fresh sushi and Japanese dishes\",\n    latitude: 12.35,\n    longitude: 56.79,\n    rating: 3.7,\n  },\n  {\n    id: \"3\",\n    name: \"Curry Palace\",\n    cuisineType: \"indian\",\n    description: \"Delicious Indian curries and vegetarian options\",\n    latitude: 12.36,\n    longitude: 56.80,\n    rating: 3.5,\n  },\n  {\n    id: \"4\",\n    name: \"Pizza inn\",\n    cuisineType: \"pizza\",\n    description: \"Authentic Italian pizza and pasta dishes\",\n    latitude: 12.34,\n    longitude: 56.78,\n    rating: 4.5,\n  },\n  {\n    id: \"5\",\n    name: \"Chicken inn\",\n    cuisineType: \"other\", // no \"japanese\" option, so use \"other\"\n    description: \"Fresh sushi and Japanese dishes\",\n    latitude: 12.35,\n    longitude: 56.79,\n    rating: 4.2,\n  },\n  {\n    id: \"6\",\n    name: \"Hungry Lion\",\n    cuisineType: \"fast_food\",\n    description: \"Delicious Burgers and chicken at a low price\",\n    latitude: 12.36,\n    longitude: 56.80,\n    rating: 4.6,\n  },\n  {\n    id: \"e1014e44-0e90-4d26-a1b3-2aa1d98fb413\",\n    name: \"Lali's\",\n    cuisineType: \"lunch_pack\",\n    description: \"Frozen food for your lunch boxes\",\n    latitude: 12.34,\n    longitude: 56.78,\n    rating: 4.3,\n  },\n  {\n    id: \"8\",\n    name: \"Honchos\",\n    cuisineType: \"traditional\", // no \"japanese\" option, so use \"other\"\n    description: \"Freshly cooked Zim original meals\",\n    latitude: 12.35,\n    longitude: 56.79,\n    rating: 3.8,\n  },\n  {\n    id: \"9\",\n    name: \"Creamy Inn\",\n    cuisineType: \"desserts\",\n    description: \"Creamy Ice creams to enjoy\",\n    latitude: 12.36,\n    longitude: 56.80,\n    rating: 4.1,\n  },\n  {\n    id: \"10\",\n    name: \"Early Bird\",\n    cuisineType: \"breakfast\",\n    description: \"Yummy tasty food to kickstart your day\",\n    latitude: 12.36,\n    longitude: 56.80,\n    rating: 4.0,\n  },\n];\n","size_bytes":2245},"src/pages/driver-components/apiRequest.ts":{"content":"export async function apiRequest<T>(\n  method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\",\n  url: string,\n  body?: any\n): Promise<T> {\n  const token = localStorage.getItem(\"token\");\n  const res = await fetch(`http://127.0.0.1:8000${url}`, {\n    method,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\n    },\n    body: body ? JSON.stringify(body) : undefined,\n  });\n\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || res.statusText);\n  }\n\n  return res.json();\n}\n\nexport async function getDriverOrderHistory(cursor?: string) {\n  const url = cursor\n    ? `/api/drivers/orders/history/?cursor=${encodeURIComponent(cursor)}`\n    : `/api/drivers/orders/history/`;\n\n  const res = await apiRequest<{\n    results: {\n      id: string;\n      status: string;\n      fee: number;\n      location: string | null;\n      order_date: string;\n    }[];\n    next: string | null;\n    previous: string | null;\n  }>(\"GET\", url);\n\n  return res;\n}","size_bytes":1012},"ZimFeast/ok.py":{"content":"import uuid\nfrom decimal import Decimal\nfrom ZimFeast.settings import PAYNOW_INTEGRATION_ID, PAYNOW_INTEGRATION_KEY, PAYNOW_RETURN_URL, PAYNOW_RESULT_URL\nfrom paynow import Paynow\n\n# Initialize PayNow from settings\npaynow = Paynow(\n    integration_id=PAYNOW_INTEGRATION_ID,\n    integration_key=PAYNOW_INTEGRATION_KEY,\n    return_url=PAYNOW_RETURN_URL,\n    result_url=PAYNOW_RESULT_URL\n)\n\n# Example dummy order object\nclass DummyOrder:\n    def __init__(self, total):\n        self.id = uuid.uuid4()  # random order ID\n        self.total = Decimal(total)\n\n# Create a manual payment\ndef create_manual_payment(order_total):\n    order = DummyOrder(order_total)\n    random_email = \"brandonkhumz40@gmail.com\"  # can be any email\n\n    # Create the payment object\n    payment = paynow.create_payment(f\"Order_{order.id}\", random_email)\n    payment.add(f\"Order #{order.id}\", float(order.total))\n\n    # Send to PayNow (sandbox/live depends on your integration keys)\n    response = paynow.send(payment)\n\n    if response.success:\n        print(\"âœ… Payment created successfully!\")\n        print(\"PayNow URL (redirect user here):\", response.redirect_url)\n        print(\"Reference / Poll URL (track payment):\", response.poll_url)\n    else:\n        print(\"âŒ Failed to create payment:\", response.error)\n\n    return response\n\n# Example usage\nif __name__ == \"__main__\":\n    create_manual_payment(150.75)\n","size_bytes":1385},"ZimFeast/accounts/views.py":{"content":"from rest_framework.decorators import api_view, permission_classes\nfrom rest_framework.permissions import AllowAny, IsAuthenticated\nfrom rest_framework.response import Response\nfrom rest_framework import status\nfrom django.contrib.auth import authenticate\nfrom .serializers import UserSerializer\nimport jwt\nfrom .token import JWTAuthentication\nfrom .models import BlacklistedToken\n\n\n@api_view(['POST'])\n@permission_classes([AllowAny])\ndef register_user(request):\n    serializer = UserSerializer(data=request.data)\n    if serializer.is_valid():\n        user = serializer.save()\n\n        payload = {\"user_id\": str(user.id)}  # UUID must be cast to str\n\n        access_token = JWTAuthentication.generate_token(payload=payload)\n        refresh_token = JWTAuthentication.generate_refresh_token(payload=payload)\n\n        return Response({\n            'accessToken': access_token,\n            'refreshToken': refresh_token,\n        }, status=status.HTTP_201_CREATED)\n    return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n\n\n@api_view(['POST'])\n@permission_classes([AllowAny])\ndef login_user(request):\n    email = request.data.get(\"email\")\n    password = request.data.get(\"password\")\n    user = authenticate(email=email, password=password)\n\n    if user:\n        payload = {\"user_id\": str(user.id)}  # use 'user_id' to match frontend expectation\n\n        access_token = JWTAuthentication.generate_token(payload=payload)\n        refresh_token = JWTAuthentication.generate_refresh_token(payload=payload)\n\n        return Response({\n            'accessToken': access_token,\n            'refreshToken': refresh_token,\n            'role': user.role,\n        })\n    return Response({\"error\": \"Invalid credentials\"}, status=status.HTTP_401_UNAUTHORIZED)\n\n@api_view(['GET'])\n@permission_classes([IsAuthenticated])\ndef get_profile(request):\n    serializer = UserSerializer(request.user)\n    return Response(serializer.data)\n\n@api_view([\"POST\"])\n@permission_classes([IsAuthenticated])\ndef logout(request):\n    auth_header = request.headers.get(\"Authorization\")\n    if not auth_header or not auth_header.startswith(\"Bearer \"):\n        return Response({\"detail\": \"Authorization header missing\"}, status=status.HTTP_400_BAD_REQUEST)\n    \n    token = auth_header.split(\" \")[1]\n\n    # Blacklist token\n    BlacklistedToken.objects.create(token=token)\n    \n    return Response({\"detail\": \"Logged out successfully\"}, status=status.HTTP_200_OK)","size_bytes":2435},"src/pages/home-components/Header.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { User } from \"./types\";\n\ninterface HeaderProps {\n  user?: User;\n}\n\nexport function Header({ user }: HeaderProps) {\n  return (\n    <header className=\"bg-primary text-primary-foreground\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\">Welcome to ZimFeast</h1>\n          <p className=\"text-primary-foreground/80\">\n            Hello, {user?.firstName || \"User\"}! Choose your portal below.\n          </p>\n        </div>\n        <Button\n          onClick={() => window.location.href = '/api/logout'}\n          variant=\"outline\"\n          className=\"border-white/20 text-primary-foreground hover:bg-white/10\"\n        >\n          <i className=\"fas fa-sign-out-alt mr-2\"></i>\n          Logout\n        </Button>\n      </div>\n    </header>\n  );\n}\n","size_bytes":912},"ZimFeast/restaurants/__init__.py":{"content":"","size_bytes":0},"ZimFeast/restaurants/pagination.py":{"content":"from rest_framework.pagination import CursorPagination\n\nclass NearbyRestaurantCursorPagination(CursorPagination):\n    page_size = 10\n    ordering = 'id'  # ordering must be unique; 'id' is usually fine","size_bytes":201},"ZimFeast/orders/urls.py":{"content":"from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path(\"create/\", views.create_order, name=\"create_order\"),\n    path(\"list/\", views.OrderListView.as_view(), name=\"get_orders\"),\n    path(\"cancel/<uuid:pk>/\", views.cancel_order, name=\"cancel_order\"),\n    path(\"all/orders/\", views.get_all_orders, name=\"get_all_orders\"),\n    path(\"order/<uuid:pk>/\", views.get_order, name=\"get_order_data\"),\n]\n","size_bytes":411},"src/pages/restaurant-components/OrdersSection.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardHeader, CardContent } from \"@/components/ui/card\"; \n\ninterface OrdersSectionProps {\n  orders: any[];\n  updateOrder: (orderId: string, status: string) => void;\n}\n\nexport default function OrdersSection({ orders, updateOrder }: OrdersSectionProps) {\n  const [selectedStatus, setSelectedStatus] = useState(\"\");\n\n  const filteredOrders = orders.filter(o => !selectedStatus || o.status === selectedStatus);\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"pending\": return \"bg-yellow-100 text-yellow-800\";\n      case \"accepted\":\n      case \"preparing\": return \"bg-blue-100 text-blue-800\";\n      case \"ready\": return \"bg-green-100 text-green-800\";\n      case \"delivered\": return \"bg-gray-100 text-gray-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"font-bold\">Live Orders</h3>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n            <span className=\"text-sm text-muted-foreground\">Real-time</span>\n          </div>\n        </div>\n        <div className=\"flex space-x-2 mt-4\">\n          {[\"\", \"pending\", \"preparing\"].map(status => (\n            <Button\n              key={status}\n              variant={selectedStatus === status ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setSelectedStatus(status)}\n            >\n              {status === \"\" ? \"All\" : status.charAt(0).toUpperCase() + status.slice(1)}\n            </Button>\n          ))}\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          {filteredOrders.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <i className=\"fas fa-receipt text-4xl text-muted-foreground mb-4\"></i>\n              <p className=\"text-muted-foreground\">No orders found</p>\n            </div>\n          ) : filteredOrders.map(order => (\n            <div key={order.id} className=\"border border-border rounded-lg p-4\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center\">\n                    <span className=\"text-primary font-medium\">#{order.id.slice(-3)}</span>\n                  </div>\n                  <div>\n                    <p className=\"font-medium\">{order.customerPhone}</p>\n                    <p className=\"text-sm text-muted-foreground\">{order.createdAt ? new Date(order.createdAt).toLocaleTimeString() : 'N/A'}</p>\n                  </div>\n                </div>\n                <Badge className={getStatusColor(order.status)}>{order.status}</Badge>\n              </div>\n              <div className=\"text-sm text-muted-foreground mb-3\">\n                {Array.isArray(order.items) ? order.items.map((i: any) => `${i.quantity}x ${i.name}`).join(\", \") : \"Order items\"}\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"font-medium\">${order.total}</span>\n                <div className=\"flex space-x-2\">\n                  {order.status === \"pending\" && <Button size=\"sm\" onClick={() => updateOrder(order.id, \"accepted\")}>Accept</Button>}\n                  {order.status === \"accepted\" && <Button size=\"sm\" onClick={() => updateOrder(order.id, \"preparing\")}>Start Preparing</Button>}\n                  {order.status === \"preparing\" && <Button size=\"sm\" className=\"bg-accent hover:bg-accent/90\" onClick={() => updateOrder(order.id, \"ready\")}>Ready</Button>}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4010},"ZimFeast/ZimFeast/wsgi.py":{"content":"\"\"\"\nWSGI config for ZimFeast project.\n\nIt exposes the WSGI callable as a module-level variable named ``application``.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/5.2/howto/deployment/wsgi/\n\"\"\"\n\nimport os\n\nfrom django.core.wsgi import get_wsgi_application\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'ZimFeast.settings')\n\napplication = get_wsgi_application()\n","size_bytes":393},"ZimFeast/manage.py":{"content":"#!/usr/bin/env python\n\"\"\"Django's command-line utility for administrative tasks.\"\"\"\nimport os\nimport sys\n\n\ndef main():\n    \"\"\"Run administrative tasks.\"\"\"\n    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'ZimFeast.settings')\n    try:\n        from django.core.management import execute_from_command_line\n    except ImportError as exc:\n        raise ImportError(\n            \"Couldn't import Django. Are you sure it's installed and \"\n            \"available on your PYTHONPATH environment variable? Did you \"\n            \"forget to activate a virtual environment?\"\n        ) from exc\n    execute_from_command_line(sys.argv)\n\n\nif __name__ == '__main__':\n    main()\n","size_bytes":664},"ZimFeast/accounts/migrations/__init__.py":{"content":"","size_bytes":0},"src/pages/Checkout.tsx":{"content":"import { useEffect } from \"react\";\nimport { CheckoutForm } from \"./checkout-components/CheckoutForm\";\n\nexport default function Checkout() {\n  const urlParams = new URLSearchParams(window.location.search);\n  // Hardcoded for testing\n  const orderId = urlParams.get('orderId') || '6c7a9a9f-f18a-4574-a82a-f483e41ced7f';\n\n  useEffect(() => {\n    if (!orderId) window.location.href = '/home';\n  }, [orderId]);\n\n  if (!orderId) return <div>No order specified. Redirecting...</div>;\n\n  return (\n    <div className=\"min-h-screen bg-background py-16\">\n      <div className=\"max-w-7xl mx-auto px-4\">\n        <h1 className=\"text-3xl font-bold text-center mb-4\">Checkout</h1>\n        <CheckoutForm orderId={orderId} />\n      </div>\n    </div>\n  );\n}\n","size_bytes":739},"ZimFeast/orders/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass OrdersConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'orders'\n","size_bytes":144},"ZimFeast/payments/__init__.py":{"content":"","size_bytes":0},"src/pages/Login.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { apiRequest, User } from \"@/hooks/useAuth\";\nimport { Link } from \"wouter\";\n\ninterface LoginResponse {\n  accessToken: string;\n}\n\nexport default function Login() {\n  const [, setLocation] = useLocation();\n  const queryClient = useQueryClient();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const loginMutation = useMutation({\n    mutationFn: async (): Promise<LoginResponse> => {\n      const res = await fetch(\"/api/accounts/login/\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email, password }),\n      });\n      if (!res.ok) {\n        const text = (await res.text()) || res.statusText;\n        throw new Error(text);\n      }\n      return res.json();\n    },\n    onSuccess: async (data) => {\n      // 1ï¸âƒ£ Save token\n      localStorage.setItem(\"token\", data.accessToken);\n\n      try {\n        // 2ï¸âƒ£ Fetch the real profile with the new token\n        const profile = await apiRequest<User>(\"/api/accounts/profile/\");\n\n        // 3ï¸âƒ£ Populate React Query immediately\n        queryClient.setQueryData<User>([\"/api/accounts/profile/\"], profile);\n\n        // 4ï¸âƒ£ Redirect to home\n        setLocation(\"/home\");\n      } catch (err: any) {\n        // If profile fetch fails, clear token and show error\n        localStorage.removeItem(\"token\");\n        alert(\"Failed to fetch user profile: \" + err.message);\n      }\n    },\n    onError: (err: any) => alert(err.message || \"Login failed\"),\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    loginMutation.mutate();\n  };\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-50 px-4\">\n      <Card className=\"w-full max-w-md shadow-lg\">\n        <CardHeader>\n          <CardTitle className=\"text-center text-2xl font-bold text-gray-800\">Login</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <Input\n              type=\"email\"\n              required\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder=\"Email\"\n            />\n            <Input\n              type=\"password\"\n              required\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"Password\"\n            />\n            <Button type=\"submit\" className=\"w-full\" disabled={loginMutation.isPending}>\n              {loginMutation.isPending ? \"Logging in...\" : \"Login\"}\n            </Button>\n            <div className=\"text-center mt-4\">\n              <span className=\"text-sm text-gray-600\">\n                  Don't have an account?{\" \"}\n              </span>\n              <Link href=\"/register\" className=\"text-sm text-blue-600 hover:underline\">\n                  Register\n              </Link>\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":3317},"src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"src/pages/business-components/RestaurantForm.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useForm, SubmitHandler } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport {\n  restaurantRegistrationSchema,\n  RestaurantRegistration,\n} from \"./types\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectTrigger,\n  SelectValue,\n  SelectContent,\n  SelectItem,\n} from \"@/components/ui/select\";\n\nimport { useLocation } from \"wouter\";\n\n// âœ… Tell TypeScript about window.google\ndeclare global {\n  interface Window {\n    google: any;\n  }\n}\n\ninterface Cuisine {\n  id: number;\n  name: string;\n}\n\nexport default function RestaurantForm() {\n  const [role, setRole] = useState<\"customer\" | \"restaurant\" | \"driver\" | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  const [cuisines, setCuisines] = useState<Cuisine[]>([]);\n\n  const [, setLocation] = useLocation();\n\n  const form = useForm<RestaurantRegistration>({\n    resolver: zodResolver(restaurantRegistrationSchema),\n    defaultValues: {\n      cuisineType: undefined,\n      latitude: \"\",\n      longitude: \"\",\n    },\n  });\n\n  // Load Google Maps script\n  useEffect(() => {\n    if (!window.google) {\n      const script = document.createElement(\"script\");\n      script.src =\n        \"https://maps.googleapis.com/maps/api/js?key=AIzaSyB6rSsWSWLJhcA2pzFtt-Y1I2wx6UAdyD4&libraries=places\";\n      script.async = true;\n      script.onload = () => console.log(\"âœ… Google Maps script loaded\");\n      document.body.appendChild(script);\n    }\n  }, []);\n\n  // Fetch user profile\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      setRole(null);\n      setLoading(false);\n      return;\n    }\n\n    fetch(\"http://127.0.0.1:8000/api/accounts/profile/\", {\n      headers: { Authorization: `Bearer ${token}` },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setRole(data.role);\n      })\n      .catch(() => setRole(null))\n      .finally(() => setLoading(false));\n  }, []);\n\n  // Initialize Google Places Autocomplete\n  useEffect(() => {\n    if (role === \"restaurant\" && window.google) {\n      const addressInput = document.getElementById(\"address-input\") as HTMLInputElement;\n      if (!addressInput) return;\n\n      const autocomplete = new window.google.maps.places.Autocomplete(addressInput);\n      autocomplete.addListener(\"place_changed\", () => {\n        const place = autocomplete.getPlace();\n        if (!place.geometry) return;\n\n        form.setValue(\"latitude\", place.geometry.location.lat().toString());\n        form.setValue(\"longitude\", place.geometry.location.lng().toString());\n        form.setValue(\"address\", place.formatted_address || \"\");\n      });\n    }\n  }, [role, form]);\n\n  // Fetch cuisines from backend\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    fetch(\"http://127.0.0.1:8000/api/restaurants/get/cuisine/types/\", {\n      headers: { Authorization: `Bearer ${token}` },\n    })\n      .then((res) => res.json())\n      .then((data: Cuisine[]) => setCuisines(data))\n      .catch(() => setCuisines([]));\n  }, []);\n\n  if (loading) return <p>Loading...</p>;\n  if (role !== \"restaurant\")\n    return <p className=\"text-red-500 font-bold\">Unauthorized - Restaurants</p>;\n\n  const onSubmit: SubmitHandler<RestaurantRegistration> = async (data) => {\n    setSubmitError(null);\n    setSubmitting(true);\n\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      setSubmitError(\"No token found. Please login again.\");\n      setSubmitting(false);\n      return;\n    }\n\n    const payload = {\n      name: data.name,\n      description: data.description,\n      full_address: data.address,\n      lat: Number(data.latitude),\n      lng: Number(data.longitude),\n      phone_number: data.phone,\n      minimum_order_price: Number(data.minimumOrder),\n      est_delivery_time: Number(data.estimatedDeliveryTime),\n      cuisines: data.cuisineType ? [Number(data.cuisineType)] : [],\n    };\n\n    try {\n      const res = await fetch(\"http://127.0.0.1:8000/api/restaurants/create/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!res.ok) {\n        const errorText = await res.text();\n        throw new Error(errorText || \"Failed to register restaurant\");\n      }\n\n      // âœ… If successful, redirect to /home\n      setLocation(\"/home\");\n\n      const result = await res.json();\n      form.reset();\n      alert(\"Restaurant registered successfully!\");\n    } catch (err: any) {\n      setSubmitError(err.message);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n      <Input placeholder=\"Restaurant Name\" {...form.register(\"name\")} />\n      <Input placeholder=\"Description\" {...form.register(\"description\")} />\n      <Input id=\"address-input\" placeholder=\"Address\" {...form.register(\"address\")} />\n      <Input placeholder=\"Phone\" {...form.register(\"phone\")} />\n      <Input\n        placeholder=\"Minimum Order Amount ($ USD)\"\n        type=\"number\"\n        {...form.register(\"minimumOrder\", { valueAsNumber: true })}\n      />\n      <Input\n        placeholder=\"Estimated Delivery Time (minutes)\"\n        type=\"number\"\n        {...form.register(\"estimatedDeliveryTime\", { valueAsNumber: true })}\n      />\n\n      {/* Cuisine Type */}\n      <Select\n        value={form.watch(\"cuisineType\")}\n        onValueChange={(val) => form.setValue(\"cuisineType\", val as any)}\n        disabled={cuisines.length === 0}\n      >\n        <SelectTrigger>\n          <SelectValue placeholder=\"Select Cuisine\" />\n        </SelectTrigger>\n        <SelectContent className=\"max-h-60 overflow-y-auto\">\n          {cuisines.length === 0 ? (\n            <SelectItem value=\"0\">Cuisine Types unavailable</SelectItem>\n          ) : (\n            cuisines.map((cuisine) => (\n              <SelectItem key={cuisine.id} value={cuisine.id.toString()}>\n                {cuisine.name}\n              </SelectItem>\n            ))\n          )}\n        </SelectContent>\n      </Select>\n\n      {/* Hidden inputs so lat/long are submitted */}\n      <input type=\"hidden\" {...form.register(\"latitude\")} />\n      <input type=\"hidden\" {...form.register(\"longitude\")} />\n\n      <Button type=\"submit\" disabled={submitting}>\n        {submitting ? \"Registering...\" : \"Register Restaurant\"}\n      </Button>\n\n      {submitError && <p className=\"text-red-500\">{submitError}</p>}\n    </form>\n  );\n}\n1","size_bytes":6713},"src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"src/pages/Landing.tsx":{"content":"import { Button } from \"@/components/ui/button\";\n\nexport default function Landing() {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header with gradient */}\n      <header className=\"relative overflow-hidden bg-gradient-to-br from-primary via-primary to-primary/90\">\n        <div className=\"absolute inset-0 bg-[linear-gradient(45deg,transparent_25%,rgba(255,255,255,.05)_50%,transparent_75%,transparent_100%)] bg-[length:250%_250%]\" />\n        \n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 sm:py-28 relative\">\n          <div className=\"text-center\">\n            <div className=\"inline-block mb-4\">\n              <h1 className=\"text-6xl sm:text-7xl font-bold mb-2 text-primary-foreground tracking-tight\">\n                ZimFeast\n              </h1>\n              <div className=\"h-1 bg-gradient-to-r from-transparent via-white/40 to-transparent rounded-full\" />\n            </div>\n            \n            <p className=\"text-xl sm:text-2xl text-primary-foreground/90 mb-10 max-w-2xl mx-auto font-light\">\n              Delicious food delivery across Zimbabwe\n            </p>\n            \n            <Button \n              onClick={() => window.location.href = '/login'}\n              size=\"lg\"\n              className=\"bg-white text-primary hover:bg-white/95 hover:scale-105 transition-all duration-300 shadow-xl hover:shadow-2xl px-8 py-6 text-lg font-semibold rounded-full\"\n              data-testid=\"button-sign-in\"\n            >\n              Get Started\n              <svg className=\"ml-2 w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\n              </svg>\n            </Button>\n          </div>\n        </div>\n\n        {/* Decorative wave */}\n        <div className=\"absolute bottom-0 left-0 right-0\">\n          <svg viewBox=\"0 0 1440 120\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" className=\"w-full h-auto\">\n            <path d=\"M0 0L60 10C120 20 240 40 360 45C480 50 600 40 720 35C840 30 960 30 1080 35C1200 40 1320 50 1380 55L1440 60V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0V0Z\" fill=\"hsl(var(--background))\" />\n          </svg>\n        </div>\n      </header>\n\n      {/* Features */}\n      <section className=\"py-20 -mt-1\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent\">\n              Why Choose ZimFeast?\n            </h2>\n            <p className=\"text-muted-foreground text-lg sm:text-xl max-w-2xl mx-auto\">\n              Fast, reliable food delivery with local flavors\n            </p>\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n            {[\n              {\n                icon: \"fas fa-motorcycle\",\n                title: \"Fast Delivery\",\n                description: \"Quick delivery from your favorite local restaurants\"\n              },\n              {\n                icon: \"fas fa-utensils\",\n                title: \"Local Cuisine\",\n                description: \"Authentic Zimbabwean dishes and international favorites\"\n              },\n              {\n                icon: \"fas fa-shield-alt\",\n                title: \"Secure Payments\",\n                description: \"Safe and secure payment options including USD and ZWL\"\n              }\n            ].map((feature, index) => (\n              <div \n                key={index}\n                className=\"group text-center p-8 rounded-2xl bg-card border border-border hover:border-primary/20 transition-all duration-300 hover:shadow-[0_12px_40px_-8px_hsl(var(--primary)/0.15)] hover:-translate-y-1\"\n              >\n                <div className=\"w-20 h-20 bg-gradient-to-br from-primary/10 to-primary/5 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300 group-hover:shadow-lg\">\n                  <i className={`${feature.icon} text-primary text-3xl`}></i>\n                </div>\n                <h3 className=\"text-2xl font-semibold mb-3\">{feature.title}</h3>\n                <p className=\"text-muted-foreground leading-relaxed\">\n                  {feature.description}\n                </p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* About Section */}\n      <section className=\"py-20 overflow-hidden\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center\">\n            {/* Left Content */}\n            <div className=\"space-y-6\">\n              <div className=\"inline-block\">\n                <span className=\"text-primary font-semibold text-sm uppercase tracking-wider\">About ZimFeast</span>\n                <div className=\"h-0.5 bg-gradient-to-r from-primary to-transparent mt-2 rounded-full\" />\n              </div>\n              \n              <h2 className=\"text-4xl sm:text-5xl font-bold leading-tight\">\n                Your Favorite Meals,{\" \"}\n                <span className=\"bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent\">\n                  Delivered Fast\n                </span>\n              </h2>\n              \n              <p className=\"text-lg text-muted-foreground leading-relaxed\">\n                ZimFeast is Zimbabwe's premier food delivery marketplace, connecting hungry customers with the best local restaurants and eateries across the nation. From traditional Zimbabwean cuisine to international favorites, we bring the flavors you love right to your doorstep.\n              </p>\n              \n              <p className=\"text-lg text-muted-foreground leading-relaxed\">\n                Whether you're craving sadza and stew, a juicy burger, or authentic Asian cuisine, our platform makes it effortless to discover, order, and enjoy meals from hundreds of partnered restaurants. With real-time tracking, secure payments in USD and ZWL, and dedicated support, we're revolutionizing how Zimbabwe eats.\n              </p>\n\n              <div className=\"grid grid-cols-2 gap-6 pt-4\">\n                <div className=\"space-y-2\">\n                  <div className=\"text-4xl font-bold text-primary\">500+</div>\n                  <div className=\"text-sm text-muted-foreground\">Restaurant Partners</div>\n                </div>\n                <div className=\"space-y-2\">\n                  <div className=\"text-4xl font-bold text-primary\">50K+</div>\n                  <div className=\"text-sm text-muted-foreground\">Happy Customers</div>\n                </div>\n                <div className=\"space-y-2\">\n                  <div className=\"text-4xl font-bold text-primary\">30min</div>\n                  <div className=\"text-sm text-muted-foreground\">Average Delivery</div>\n                </div>\n                <div className=\"space-y-2\">\n                  <div className=\"text-4xl font-bold text-primary\">24/7</div>\n                  <div className=\"text-sm text-muted-foreground\">Customer Support</div>\n                </div>\n              </div>\n            </div>\n\n            {/* Right Content - Feature Cards */}\n            <div className=\"relative\">\n              <div className=\"space-y-4\">\n                {[\n                  {\n                    icon: \"fas fa-map-marked-alt\",\n                    title: \"Wide Coverage\",\n                    description: \"Serving major cities across Zimbabwe with expanding reach to new areas every month\"\n                  },\n                  {\n                    icon: \"fas fa-bolt\",\n                    title: \"Lightning Fast\",\n                    description: \"Real-time order tracking and optimized routing for the fastest delivery times\"\n                  },\n                  {\n                    icon: \"fas fa-heart\",\n                    title: \"Local Favorites\",\n                    description: \"Supporting Zimbabwean businesses while giving you access to authentic local flavors\"\n                  },\n                  {\n                    icon: \"fas fa-mobile-alt\",\n                    title: \"Easy Ordering\",\n                    description: \"Seamless experience from browsing menus to checkout with just a few taps\"\n                  }\n                ].map((item, index) => (\n                  <div \n                    key={index}\n                    className=\"group flex items-start gap-4 p-6 rounded-2xl bg-card border border-border hover:border-primary/20 transition-all duration-300 hover:shadow-[0_8px_30px_-8px_hsl(var(--primary)/0.12)] animate-fade-in\"\n                    style={{ animationDelay: `${index * 0.1}s` }}\n                  >\n                    <div className=\"w-12 h-12 flex-shrink-0 bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300\">\n                      <i className={`${item.icon} text-primary text-xl`}></i>\n                    </div>\n                    <div>\n                      <h4 className=\"font-semibold text-lg mb-1\">{item.title}</h4>\n                      <p className=\"text-muted-foreground text-sm leading-relaxed\">\n                        {item.description}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n              \n              {/* Decorative gradient blob */}\n              <div className=\"absolute -z-10 top-1/2 -right-20 w-72 h-72 bg-gradient-to-br from-primary/10 to-transparent rounded-full blur-3xl\" />\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Business Partnership Section */}\n      <section className=\"py-20 bg-gradient-to-b from-transparent via-muted/30 to-transparent\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent\">\n              Partner with ZimFeast\n            </h2>\n            <p className=\"text-muted-foreground text-lg sm:text-xl mb-8 max-w-2xl mx-auto\">\n              Join Zimbabwe's fastest-growing food delivery platform\n            </p>\n          </div>\n          \n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12\">\n            {[\n              {\n                icon: \"fas fa-store\",\n                title: \"Restaurant Partners\",\n                description: \"Grow your business with thousands of hungry customers. Easy setup, real-time orders, secure payments.\",\n                benefits: [\n                  \"Zero setup fees\",\n                  \"Weekly payments\",\n                  \"Marketing support\",\n                  \"Real-time analytics\"\n                ]\n              },\n              {\n                icon: \"fas fa-motorcycle\",\n                title: \"Delivery Drivers\",\n                description: \"Earn money on your schedule. Flexible hours, daily earnings, fuel bonuses available.\",\n                benefits: [\n                  \"Flexible working hours\",\n                  \"Weekly cash payments\",\n                  \"Fuel incentives\",\n                  \"24/7 support\"\n                ]\n              }\n            ].map((partner, index) => (\n              <div \n                key={index}\n                className=\"group relative overflow-hidden rounded-3xl bg-card border border-border p-8 sm:p-10 hover:border-primary/20 transition-all duration-500 hover:shadow-[0_20px_60px_-15px_hsl(var(--primary)/0.2)]\"\n              >\n                <div className=\"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/5 to-transparent rounded-full blur-3xl group-hover:scale-150 transition-transform duration-700\" />\n                \n                <div className=\"relative\">\n                  <div className=\"w-24 h-24 bg-gradient-to-br from-primary/10 to-primary/5 rounded-3xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg\">\n                    <i className={`${partner.icon} text-primary text-4xl`}></i>\n                  </div>\n                  \n                  <h3 className=\"text-3xl font-bold mb-4\">{partner.title}</h3>\n                  <p className=\"text-muted-foreground text-lg mb-6 leading-relaxed\">\n                    {partner.description}\n                  </p>\n                  \n                  <ul className=\"space-y-3\">\n                    {partner.benefits.map((benefit, idx) => (\n                      <li key={idx} className=\"flex items-center text-muted-foreground\">\n                        <svg className=\"w-5 h-5 text-primary mr-3 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                        </svg>\n                        {benefit}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div className=\"text-center\">\n            <Button \n              onClick={() => window.location.href = '/business-hub'}\n              size=\"lg\"\n              className=\"bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-105 transition-all duration-300 shadow-xl hover:shadow-2xl px-8 py-6 text-lg font-semibold rounded-full\"\n              data-testid=\"button-business-hub\"\n            >\n              <i className=\"fas fa-handshake mr-2\"></i>\n              Join Business Hub\n            </Button>\n            <p className=\"text-sm text-muted-foreground mt-4 font-medium\">\n              Quick application process â€¢ Get approved in 24-48 hours\n            </p>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n","size_bytes":14070},"ZimFeast/ZimFeast/urls.py":{"content":"from django.contrib import admin\nfrom django.urls import path, include\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('api/restaurants/', include('restaurants.urls')),\n    path(\"api/payments/\", include(\"payments.urls\")),\n    path(\"api/orders/\", include(\"orders.urls\")),\n    path(\"api/drivers/\", include(\"drivers.urls\")),\n    path(\"api/accounts/\", include(\"accounts.urls\")),\n]\n\n#python manage.py runserver 0.0.0.0:8000\n","size_bytes":434},"src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\n// Generic API request with JWT auth\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown\n): Promise<any> {\n  const token = localStorage.getItem(\"token\");\n\n  const res = await fetch(url, {\n    method,\n    headers: {\n      ...(data ? { \"Content-Type\": \"application/json\" } : {}),\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\n    },\n    body: data ? JSON.stringify(data) : undefined,\n  });\n\n  await throwIfResNotOk(res);\n  return res.json();\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\n\nexport const getQueryFn: <T>(options: { on401: UnauthorizedBehavior }) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const url = queryKey[0] as string;\n    const token = localStorage.getItem(\"token\");\n\n    const res = await fetch(url, {\n      headers: token ? { Authorization: `Bearer ${token}` } : {},\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});","size_bytes":1602},"src/pages/Home.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { useEffect } from \"react\";\nimport { Header } from \"./home-components/Header\";\nimport { PortalSelection } from \"./home-components/PortalSelection\";\nimport { BusinessHub } from \"./home-components/BusinessHub\";\nimport { apiRequest } from \"@/hooks/useAuth\";\nimport { User } from \"./home-components/types\";\n\nexport default function Home() {\n  const [, setLocation] = useLocation();\n\n  // Fetch user profile with JWT\n  const { data: userProfile, isLoading, error } = useQuery<User>({\n    queryKey: [\"user-profile\"],\n    queryFn: () =>\n      apiRequest<User>(\"/api/accounts/profile/\"),\n    retry: false,\n    refetchOnWindowFocus: false,\n  });\n\n  // Handle redirect in useEffect to avoid setState during render\n  useEffect(() => {\n    if (error) {\n      setLocation(\"/login\");\n    }\n  }, [error, setLocation]);\n\n  if (isLoading) return <div>Loading...</div>;\n\n  if (error) {\n    return null;\n  }\n\n  // Handle portal navigation with role check\n  const handlePortalNavigation = (portal: string) => {\n    if (\n      portal === userProfile?.role ||\n      userProfile?.role === \"admin\"\n    ) {\n      setLocation(`/${portal}`);\n    } else {\n      setLocation(\"/404\");\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header user={userProfile} />\n      <PortalSelection\n        user={userProfile}\n        onNavigate={handlePortalNavigation}\n      />\n      <BusinessHub />\n    </div>\n  );\n}\n","size_bytes":1501},"src/pages/driver-components/DeliveryHistory.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { getDriverOrderHistory } from \"./apiRequest\";\nimport { Order } from \"./types\";\n\nexport default function DeliveryHistory() {\n  const [cursor, setCursor] = useState<string | null>(null);\n  const [nextCursor, setNextCursor] = useState<string | null>(null);\n  const [prevCursor, setPrevCursor] = useState<string | null>(null);\n\n  const { data, isLoading } = useQuery({\n    queryKey: [\"driver-order-history\", cursor],\n    queryFn: async () => {\n      const res = await getDriverOrderHistory(cursor || \"\");\n      setNextCursor(res.next);\n      setPrevCursor(res.previous);\n      return res.results.map((o) => ({\n        id: o.id,\n        status: o.status,\n        deliveryFee: o.fee,\n        deliveryAddress: o.location || \"\",\n        orderDate: o.completed_at,\n      }));\n    },\n  });\n\n  if (isLoading)\n    return (\n      <div className=\"flex justify-center py-6\">\n        <div className=\"animate-spin w-6 h-6 border-2 border-primary border-t-transparent rounded-full\" />\n      </div>\n    );\n\n  const deliveries = data || [];\n\n  return (\n    <Card className=\"mt-6\">\n      <CardHeader>\n        <CardTitle>Delivery History</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {deliveries.length === 0 ? (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            No Deliveries made\n          </div>\n        ) : (\n          deliveries.map((order) => {\n            const badgeText =\n              order.status.charAt(0).toUpperCase() + order.status.slice(1);\n\n            return (\n              <div\n                key={order.id}\n                className=\"border-l-4 border-accent pl-4 bg-accent/5 rounded-r-lg p-4\">\n                <div className=\"flex justify-between mb-2 items-center\">\n                  <p className=\"font-medium\">Order #{order.id.slice(-6)}</p>\n                  <Badge className=\"bg-accent text-accent-foreground flex items-center justify-center text-center px-3 py-1\">\n                    {badgeText}\n                  </Badge>\n                </div>\n                <p className=\"text-sm text-muted-foreground mb-2\">\n                  Address: {order.deliveryAddress}\n                </p>\n                <p className=\"text-sm text-muted-foreground mb-2\">\n                  Date: {order.orderDate}\n                </p>\n                <div className=\"flex justify-between items-center\">\n                  <span>Delivery Fee: ${order.deliveryFee}</span>\n                </div>\n              </div>\n            );\n          })\n        )}\n\n        <div className=\"flex justify-between mt-6\">\n          <Button\n            variant=\"outline\"\n            disabled={!prevCursor}\n            onClick={() => setCursor(prevCursor)}>\n            Previous\n          </Button>\n          <Button\n            variant=\"outline\"\n            disabled={!nextCursor}\n            onClick={() => setCursor(nextCursor)}>\n            Next\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":3227},"src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"ZimFeast/accounts/admin.py":{"content":"from django.contrib import admin\n\n# Register your models here.\n","size_bytes":63},"src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(0 0% 100%);\n  --foreground: hsl(222.2 84% 4.9%);\n  --card: hsl(0 0% 100%);\n  --card-foreground: hsl(222.2 84% 4.9%);\n  --popover: hsl(0 0% 100%);\n  --popover-foreground: hsl(222.2 84% 4.9%);\n  --primary: hsl(160 84% 39%);\n  --primary-foreground: hsl(0 0% 100%);\n  --secondary: hsl(215 28% 17%);\n  --secondary-foreground: hsl(0 0% 100%);\n  --muted: hsl(210 40% 96%);\n  --muted-foreground: hsl(215.4 16.3% 46.9%);\n  --accent: hsl(20 90% 48%);\n  --accent-foreground: hsl(0 0% 100%);\n  --destructive: hsl(356.3033 90.5579% 54.3137%);\n  --destructive-foreground: hsl(0 0% 100%);\n  --border: hsl(214.3 31.8% 91.4%);\n  --input: hsl(214.3 31.8% 91.4%);\n  --ring: hsl(160 84% 39%);\n  --chart-1: hsl(160 84% 39%);\n  --chart-2: hsl(159.7826 100% 36.0784%);\n  --chart-3: hsl(42.0290 92.8251% 56.2745%);\n  --chart-4: hsl(147.1429 78.5047% 41.9608%);\n  --chart-5: hsl(341.4894 75.2000% 50.9804%);\n  --sidebar: hsl(0 0% 100%);\n  --sidebar-foreground: hsl(222.2 84% 4.9%);\n  --sidebar-primary: hsl(160 84% 39%);\n  --sidebar-primary-foreground: hsl(0 0% 100%);\n  --sidebar-accent: hsl(210 40% 96%);\n  --sidebar-accent-foreground: hsl(160 84% 39%);\n  --sidebar-border: hsl(214.3 31.8% 91.4%);\n  --sidebar-ring: hsl(160 84% 39%);\n  --font-sans: 'Inter', system-ui, -apple-system, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.75rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(160 84% 39% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(160 84% 39% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(160 84% 39% / 0.00), 0px 1px 2px -1px hsl(160 84% 39% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(160 84% 39% / 0.00), 0px 1px 2px -1px hsl(160 84% 39% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(160 84% 39% / 0.00), 0px 2px 4px -1px hsl(160 84% 39% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(160 84% 39% / 0.00), 0px 4px 6px -1px hsl(160 84% 39% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(160 84% 39% / 0.00), 0px 8px 10px -1px hsl(160 84% 39% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(160 84% 39% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n}\n\n.dark {\n  --background: hsl(222.2 84% 4.9%);\n  --foreground: hsl(210 40% 98%);\n  --card: hsl(222.2 84% 4.9%);\n  --card-foreground: hsl(210 40% 98%);\n  --popover: hsl(222.2 84% 4.9%);\n  --popover-foreground: hsl(210 40% 98%);\n  --primary: hsl(160 84% 39%);\n  --primary-foreground: hsl(0 0% 100%);\n  --secondary: hsl(217.2 32.6% 17.5%);\n  --secondary-foreground: hsl(210 40% 98%);\n  --muted: hsl(217.2 32.6% 17.5%);\n  --muted-foreground: hsl(215 20.2% 65.1%);\n  --accent: hsl(20 90% 48%);\n  --accent-foreground: hsl(0 0% 100%);\n  --destructive: hsl(356.3033 90.5579% 54.3137%);\n  --destructive-foreground: hsl(0 0% 100%);\n  --border: hsl(217.2 32.6% 17.5%);\n  --input: hsl(217.2 32.6% 17.5%);\n  --ring: hsl(160 84% 39%);\n  --chart-1: hsl(160 84% 39%);\n  --chart-2: hsl(159.7826 100% 36.0784%);\n  --chart-3: hsl(42.0290 92.8251% 56.2745%);\n  --chart-4: hsl(147.1429 78.5047% 41.9608%);\n  --chart-5: hsl(341.4894 75.2000% 50.9804%);\n  --sidebar: hsl(222.2 84% 4.9%);\n  --sidebar-foreground: hsl(210 40% 98%);\n  --sidebar-primary: hsl(160 84% 39%);\n  --sidebar-primary-foreground: hsl(0 0% 100%);\n  --sidebar-accent: hsl(217.2 32.6% 17.5%);\n  --sidebar-accent-foreground: hsl(160 84% 39%);\n  --sidebar-border: hsl(217.2 32.6% 17.5%);\n  --sidebar-ring: hsl(160 84% 39%);\n  --font-sans: 'Inter', system-ui, -apple-system, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.75rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(160 84% 39% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(160 84% 39% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(160 84% 39% / 0.00), 0px 1px 2px -1px hsl(160 84% 39% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(160 84% 39% / 0.00), 0px 1px 2px -1px hsl(160 84% 39% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(160 84% 39% / 0.00), 0px 2px 4px -1px hsl(160 84% 39% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(160 84% 39% / 0.00), 0px 4px 6px -1px hsl(160 84% 39% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(160 84% 39% / 0.00), 0px 8px 10px -1px hsl(160 84% 39% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(160 84% 39% / 0.00);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n","size_bytes":4360},"ZimFeast/drivers/consumers.py":{"content":"import json\nfrom channels.generic.websocket import AsyncWebsocketConsumer\nfrom channels.db import database_sync_to_async\nfrom .models import Driver\n\nclass DriverLocationConsumer(AsyncWebsocketConsumer):\n    async def connect(self):\n        self.driver_id = self.scope['url_route']['kwargs']['driver_id']\n        self.group_name = f\"driver_{self.driver_id}\"\n\n        # Join driver group\n        await self.channel_layer.group_add(\n            self.group_name,\n            self.channel_name\n        )\n\n        await self.accept()\n\n    async def disconnect(self, close_code):\n        # Leave driver group\n        await self.channel_layer.group_discard(\n            self.group_name,\n            self.channel_name\n        )\n\n    # Receive message from frontend with lat/lng\n    async def receive(self, text_data):\n        data = json.loads(text_data)\n        lat = data.get(\"lat\")\n        lng = data.get(\"lng\")\n\n        if lat is not None and lng is not None:\n            await self.update_driver_location(self.driver_id, lat, lng)\n\n            # Broadcast new location to all connected clients (e.g., customer apps)\n            await self.channel_layer.group_send(\n                f\"driver_location_updates\",\n                {\n                    \"type\": \"driver.location.update\",\n                    \"driver_id\": self.driver_id,\n                    \"lat\": lat,\n                    \"lng\": lng,\n                }\n            )\n\n    @database_sync_to_async\n    def update_driver_location(self, driver_id, lat, lng):\n        try:\n            driver = Driver.objects.get(id=driver_id)\n            driver.lat = lat\n            driver.lng = lng\n            driver.save()\n        except Driver.DoesNotExist:\n            pass\n\n    # Handler for sending driver location updates\n    async def driver_location_update(self, event):\n        await self.send(text_data=json.dumps({\n            \"driver_id\": event[\"driver_id\"],\n            \"lat\": event[\"lat\"],\n            \"lng\": event[\"lng\"],\n        }))\n","size_bytes":1986},"ZimFeast/restaurants/migrations/0002_alter_menuitem_id.py":{"content":"# Generated by Django 5.2.1 on 2025-10-03 07:27\n\nimport uuid\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('restaurants', '0001_initial'),\n    ]\n\n    operations = [\n        migrations.AlterField(\n            model_name='menuitem',\n            name='id',\n            field=models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False),\n        ),\n    ]\n","size_bytes":445},"src/pages/business-components/MenuUpload.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function MenuUpload() {\n  const [file, setFile] = useState<File | null>(null);\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) setFile(e.target.files[0]);\n  };\n\n  const handleUpload = async () => {\n    if (!file) return;\n    const formData = new FormData();\n    formData.append(\"menu\", file);\n\n    await fetch(\"http://127.0.0.1:8000/api/upload-menu/\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    alert(\"Menu uploaded!\");\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\n      <Button onClick={handleUpload} disabled={!file}>\n        Upload Menu\n      </Button>\n    </div>\n  );\n}\n","size_bytes":816},"ZimFeast/drivers/serializer.py":{"content":"from rest_framework import serializers\nfrom .models import Driver, DriverOrderStatus\nfrom accounts.serializers import UserSerializer\nfrom django.conf import settings\nimport requests\n\nclass DriverSerializer(serializers.ModelSerializer):\n    user = UserSerializer(read_only=True)\n    address = serializers.CharField(write_only=True)  # User inputs this\n\n    class Meta:\n        model = Driver\n        fields = [\"id\", \"user\", \"license_number\", \"license_photo\", \"vehicle_details\", \"vehicle_photo\", \"lat\", \"lng\", \"address\",]\n\n    def create(self, validated_data):\n        address = validated_data.pop(\"address\", None)\n        lat, lng = None, None\n\n        if address:\n            try:\n                api_key = settings.GOOGLE_MAPS_API_KEY\n                response = requests.get(\n                    f\"https://maps.googleapis.com/maps/api/geocode/json?address={address}&key={api_key}\"\n                )\n                data = response.json()\n                if data[\"status\"] == \"OK\":\n                    location = data[\"results\"][0][\"geometry\"][\"location\"]\n                    lat, lng = location[\"lat\"], location[\"lng\"]\n            except Exception as e:\n                print(\"Geocoding failed:\", e)\n\n        validated_data[\"lat\"] = lat\n        validated_data[\"lng\"] = lng\n\n        user = self.context[\"request\"].user\n        return Driver.objects.create(user=user, **validated_data)\n        \nclass DriverOrderStatusSerializer(serializers.ModelSerializer):\n    driver = DriverSerializer(read_only=True)\n    order_id = serializers.IntegerField(source=\"order.id\", read_only=True)\n\n    class Meta:\n        model = DriverOrderStatus\n        fields = [\"driver\", \"order_id\", \"status\", \"assigned_at\", \"completed_at\"]","size_bytes":1710},"ZimFeast/drivers/routing.py":{"content":"from django.urls import re_path\nfrom . import consumers\n\nwebsocket_urlpatterns = [\n    re_path(r'ws/drivers/(?P<driver_id>\\d+)/location/$', consumers.DriverLocationConsumer.as_asgi()),\n]\n","size_bytes":187},"src/pages/business-components/DriverForm.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { driverRegistrationSchema, DriverRegistration } from \"./types\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectTrigger,\n  SelectValue,\n  SelectContent,\n  SelectItem,\n} from \"@/components/ui/select\";\nimport { useLocation } from \"wouter\";\n\nexport default function DriverForm() {\n  const [role, setRole] = useState<\"customer\" | \"restaurant\" | \"driver\" | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [licensePhoto, setLicensePhoto] = useState<File | null>(null);\n  const [vehiclePhoto, setVehiclePhoto] = useState<File | null>(null);\n\n  const [location, setLocation] = useLocation();\n\n  const form = useForm<DriverRegistration>({\n    resolver: zodResolver(driverRegistrationSchema),\n  });\n\n  // âœ… Check user role\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      setRole(null);\n      setLoading(false);\n      return;\n    }\n\n    fetch(\"http://127.0.0.1:8000/api/accounts/profile/\", {\n      headers: { Authorization: `Bearer ${token}` },\n    })\n      .then((res) => res.json())\n      .then((data) => setRole(data.role))\n      .catch(() => setRole(null))\n      .finally(() => setLoading(false));\n  }, []);\n\n  if (loading) return <p>Loading...</p>;\n  if (role !== \"driver\") return <p className=\"text-red-500 font-bold\">Unauthorized - Drivers only</p>;\n\n  const onSubmit = async (data: DriverRegistration) => {\n    const token = localStorage.getItem(\"token\");\n    const formData = new FormData();\n\n    const vehicleDetails = {\n      type: data.vehicleType,\n      model: data.vehicleModel,\n      number: data.vehicleNumber,\n      color: data.vehicleColor,\n    };\n\n    formData.append(\"license_number\", data.licenseNumber);\n    formData.append(\"vehicle_details\", JSON.stringify(vehicleDetails));\n    formData.append(\"address\", data.address);\n\n    if (licensePhoto) formData.append(\"license_photo\", licensePhoto);\n    if (vehiclePhoto) formData.append(\"vehicle_photo\", vehiclePhoto);\n\n    try {\n      const res = await fetch(\"http://127.0.0.1:8000/api/drivers/profile/create/\", {\n        method: \"POST\",\n        headers: { Authorization: `Bearer ${token}` },\n        body: formData,\n      });\n\n      if (!res.ok) {\n        const errorData = await res.json();\n        throw new Error(JSON.stringify(errorData));\n      }\n\n      alert(\"Driver profile created successfully!\");\n      form.reset();\n\n      // âœ… Redirect to /home\n      setLocation(\"/home\");\n\n    } catch (err: any) {\n      alert(\"Failed to register driver: \" + err.message);\n    }\n  };\n\n  return (\n    <form\n      onSubmit={form.handleSubmit(onSubmit)}\n      className=\"space-y-6 p-4 max-w-md mx-auto bg-white shadow-md rounded-xl\"\n    >\n      <h2 className=\"text-xl font-bold text-center\">Driver Registration</h2>\n\n      {/* Vehicle Details */}\n      <div className=\"space-y-3\">\n        <h3 className=\"font-semibold text-gray-700\">Vehicle Details</h3>\n\n        {/* Vehicle Type using Select */}\n        <div>\n          <label className=\"block font-medium text-gray-700 mb-1\">Vehicle Type</label>\n          <Select\n            onValueChange={(value) => form.setValue(\"vehicleType\", value as any)}\n            defaultValue=\"\"\n          >\n            <SelectTrigger className=\"w-full\">\n              <SelectValue placeholder=\"Select vehicle type\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"car\">Car</SelectItem>\n              <SelectItem value=\"motorcycle\">Motorcycle</SelectItem>\n              <SelectItem value=\"bicycle\">Bicycle</SelectItem>\n            </SelectContent>\n          </Select>\n          {form.formState.errors.vehicleType && (\n            <p className=\"text-red-500 text-sm mt-1\">\n              {form.formState.errors.vehicleType.message}\n            </p>\n          )}\n        </div>\n\n        <Input placeholder=\"Vehicle Model (e.g. Toyota Corolla)\" {...form.register(\"vehicleModel\")} />\n        <Input placeholder=\"Vehicle Number (e.g. ABC 1234)\" {...form.register(\"vehicleNumber\")} />\n        <Input placeholder=\"Vehicle Color (e.g. White)\" {...form.register(\"vehicleColor\")} />\n      </div>\n\n      {/* License Info */}\n      <div className=\"space-y-3\">\n        <h3 className=\"font-semibold text-gray-700\">Driver Details</h3>\n        <Input placeholder=\"License Number\" {...form.register(\"licenseNumber\")} />\n        <Input\n          placeholder=\"Physical Address (e.g. 7 Martin Drive, Msasa, Harare, Zimbabwe)\"\n          {...form.register(\"address\")}\n        />\n      </div>\n\n      {/* Photo Uploads Side-by-Side */}\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div className=\"flex flex-col items-center\">\n          <label className=\"block font-medium text-gray-600 mb-1\">License Photo</label>\n          <Input\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={(e) => setLicensePhoto(e.target.files?.[0] || null)}\n          />\n          {licensePhoto && (\n            <img\n              src={URL.createObjectURL(licensePhoto)}\n              alt=\"License Preview\"\n              className=\"mt-2 w-28 h-28 object-cover rounded-md border\"\n            />\n          )}\n        </div>\n\n        <div className=\"flex flex-col items-center\">\n          <label className=\"block font-medium text-gray-600 mb-1\">Vehicle Photo</label>\n          <Input\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={(e) => setVehiclePhoto(e.target.files?.[0] || null)}\n          />\n          {vehiclePhoto && (\n            <img\n              src={URL.createObjectURL(vehiclePhoto)}\n              alt=\"Vehicle Preview\"\n              className=\"mt-2 w-28 h-28 object-cover rounded-md border\"\n            />\n          )}\n        </div>\n      </div>\n\n      <Button type=\"submit\" className=\"w-full\">\n        Register Driver\n      </Button>\n    </form>\n  );\n}\n","size_bytes":5999},"ZimFeast/ZimFeast/asgi.py":{"content":"import os\nfrom django.core.asgi import get_asgi_application\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"ZimFeast.settings\")\n\n# Get Django ASGI application first - this initializes Django\ndjango_asgi_app = get_asgi_application()\n\n# Now import channels and routing after Django is initialized\nfrom channels.auth import AuthMiddlewareStack\nfrom channels.routing import ProtocolTypeRouter, URLRouter\nimport restaurants.routing\nimport drivers.routing\n\napplication = ProtocolTypeRouter({\n    \"http\": django_asgi_app,  # Handle traditional HTTP requests\n    \"websocket\": AuthMiddlewareStack(\n        URLRouter(\n            restaurants.routing.websocket_urlpatterns +\n            drivers.routing.websocket_urlpatterns  # combine other apps if needed\n        )\n    ),\n})\n","size_bytes":768},"src/pages/business-components/types.ts":{"content":"import { z } from \"zod\";\n\nexport const restaurantRegistrationSchema = z.object({\n  name: z.string().min(2),\n  description: z.string().min(10),\n  cuisineType: z.string().min(1), // We'll pass as string (id)\n  address: z.string().min(10),\n  city: z.string().default(\"Harare\"),\n  phone: z.string().min(10),\n  minimumOrder: z.number().min(0), // âœ… now number\n  estimatedDeliveryTime: z.number().min(15).max(120), // âœ… number\n  latitude: z.string(),\n  longitude: z.string(),\n  hasExternalMenu: z.boolean().default(false),\n  menuApiEndpoint: z.string().optional(),\n  menuApiKey: z.string().optional(),\n  menuApiName: z.string().optional(),\n  hasExternalOrderSystem: z.boolean().default(false),\n  orderApiEndpoint: z.string().optional(),\n  orderApiKey: z.string().optional(),\n  orderApiName: z.string().optional(),\n});\n\nexport const driverRegistrationSchema = z.object({\n  vehicleType: z.enum(['motorcycle', 'car', 'bicycle']),\n  vehicleModel: z.string().min(2, \"Vehicle model is required\"),\n  vehicleNumber: z.string().min(3, \"Vehicle number is required\"),\n  vehicleColor: z.string().min(3, \"Vehicle color is required\"),\n  licenseNumber: z.string().min(8, \"License number is required\"),\n  address: z.string().min(5, \"Address is required\"),\n});\n\nexport type RestaurantRegistration = z.infer<typeof restaurantRegistrationSchema>;\nexport type DriverRegistration = z.infer<typeof driverRegistrationSchema>;\n","size_bytes":1401},"src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"ZimFeast/restaurants/migrations/__init__.py":{"content":"","size_bytes":0},"src/pages/driver-components/StatsSection.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\n\ninterface StatsSectionProps {\n  todayEarnings: number;\n  todayDeliveries: number;\n  rating: number;\n  hoursOnline: number;\n}\n\nexport default function StatsSection({\n  todayEarnings,\n  todayDeliveries,\n  rating,\n  hoursOnline,\n}: StatsSectionProps) {\n  return (\n    <section className=\"py-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n      <Card>\n        <CardContent className=\"p-6\">\n          <p className=\"text-sm text-muted-foreground\">Today's Earnings</p>\n          <p className=\"text-2xl font-bold\">${todayEarnings.toFixed(2)}</p>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <p className=\"text-sm text-muted-foreground\">Deliveries</p>\n          <p className=\"text-2xl font-bold\">{todayDeliveries}</p>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <p className=\"text-sm text-muted-foreground\">Rating</p>\n          <p className=\"text-2xl font-bold\">{rating.toFixed(1)}</p>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <p className=\"text-sm text-muted-foreground\">Hours Online</p>\n          <p className=\"text-2xl font-bold\">{hoursOnline}h</p>\n        </CardContent>\n      </Card>\n    </section>\n  );\n}\n","size_bytes":1377},"src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"ZimFeast/ZimFeast/__init__.py":{"content":"","size_bytes":0},"ZimFeast/drivers/migrations/__init__.py":{"content":"","size_bytes":0},"src/pages/restaurant-components/MenuManagement.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport MenuItemForm from \"./MenuItemForm\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { AlertDialog, AlertDialogTrigger, AlertDialogContent, AlertDialogHeader, AlertDialogTitle, AlertDialogDescription, AlertDialogFooter, AlertDialogCancel, AlertDialogAction } from \"@/components/ui/alert-dialog\";\n\ninterface MenuManagementProps {\n  handleAddItem: () => void;\n  isAddDialogOpen: boolean;\n  setIsAddDialogOpen: (open: boolean) => void;\n}\n\nexport default function MenuManagement({ handleAddItem, isAddDialogOpen, setIsAddDialogOpen }: MenuManagementProps) {\n  const [menuItems, setMenuItems] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedMenuItemId, setSelectedMenuItemId] = useState<string | null>(null);\n\n  // Fetch restaurant's menu items from backend\n  const fetchMenuItems = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await fetch(\"http://127.0.0.1:8000/api/restaurants/menu/\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch menu items\");\n      const data = await res.json();\n\n      // Map category array to string for display\n      const formattedData = data.map((item: any) => ({\n        ...item,\n        isAvailable: item.available,\n        imageUrl: item.item_image,\n        category: item.category ? item.category.map((c: any) => c.name).join(\", \") : null,\n      }));\n\n      setMenuItems(formattedData);\n    } catch (err) {\n      console.error(\"Error fetching menu items:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchMenuItems();\n  }, []);\n\n  // Delete menu item from backend and local state\n  const deleteMenuItem = async (item: any) => {\n    setSelectedMenuItemId(item.id);\n\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await fetch(`http://127.0.0.1:8000/api/restaurants/menu/${item.id}/delete/`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      if (!res.ok) {\n        const error = await res.json();\n        console.error(\"Failed to delete menu item:\", error);\n        alert(\"Failed to delete menu item. Check console for details.\");\n        return;\n      }\n\n      // Remove deleted item from local state\n      setMenuItems((prev) => prev.filter(menuitem => menuitem.id !== item.id));\n      alert(\"Menu item deleted successfully!\");\n    } catch (err) {\n      console.error(\"Error deleting menu item:\", err);\n      alert(\"An unexpected error occurred while deleting menu item.\");\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader className=\"flex justify-between items-center\">\n        <CardTitle>Menu Management</CardTitle>\n        <Dialog open={isAddDialogOpen} onOpenChange={setIsAddDialogOpen}>\n          <DialogTrigger asChild>\n            <Button onClick={handleAddItem} className=\"bg-primary text-primary-foreground hover:bg-primary/90\">\n              <i className=\"fas fa-plus mr-2\"></i>Add Item\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"sm:max-w-[600px]\">\n            <DialogHeader>\n              <DialogTitle>Add New Menu Item</DialogTitle>\n            </DialogHeader>\n            <MenuItemForm isEdit={false} />\n          </DialogContent>\n        </Dialog>\n      </CardHeader>\n      <CardContent>\n        {loading ? (\n          <div className=\"text-center py-8 text-muted-foreground\">Loading menu items...</div>\n        ) : menuItems.length === 0 ? (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            <i className=\"fas fa-utensils text-4xl mb-4\"></i>\n            No menu items\n          </div>\n        ) : (\n          menuItems.map(item => (\n            <div key={item.id} className=\"flex items-center justify-between p-4 border border-border rounded-lg\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-16 h-16 bg-gray-200 rounded-lg overflow-hidden\">\n                  {item.imageUrl ? (\n                    <img src={item.imageUrl} alt={item.name} className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center\">\n                      <i className=\"fas fa-utensils text-gray-400\"></i>\n                    </div>\n                  )}\n                </div>\n                <div>\n                  <p className=\"font-medium\">{item.name}</p>\n                  <p className=\"text-sm text-muted-foreground\">${item.price}</p>\n                  {item.category && (\n                    <span className=\"inline-block px-2 py-1 text-xs bg-secondary text-secondary-foreground rounded-full mt-1\">\n                      {item.category}\n                    </span>\n                  )}\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"flex items-center space-x-1\">\n                  <span className={`w-2 h-2 rounded-full ${item.isAvailable ? 'bg-green-500' : 'bg-red-500'}`}></span>\n                  <span className=\"text-xs text-muted-foreground\">{item.isAvailable ? 'Available' : 'Unavailable'}</span>\n                </div>\n                <Button variant=\"ghost\" size=\"sm\" >\n                  <i className=\"fas fa-edit\">N/A</i>\n                </Button>\n                <AlertDialog>\n                  <AlertDialogTrigger asChild>\n                    <Button variant=\"ghost\" size=\"sm\" className=\"text-red-600 hover:text-red-700 hover:bg-red-50\">\n                      <i className=\"fas fa-trash\">Delete</i>\n                    </Button>\n                  </AlertDialogTrigger>\n                  <AlertDialogContent>\n                    <AlertDialogHeader>\n                      <AlertDialogTitle>Delete Menu Item</AlertDialogTitle>\n                      <AlertDialogDescription>\n                        Are you sure you want to delete \"{item.name}\"? This action cannot be undone.\n                      </AlertDialogDescription>\n                    </AlertDialogHeader>\n                    <AlertDialogFooter>\n                      <AlertDialogCancel>Cancel</AlertDialogCancel>\n                      <AlertDialogAction onClick={() => deleteMenuItem(item)} className=\"bg-red-600 hover:bg-red-700\">\n                        Delete\n                      </AlertDialogAction>\n                    </AlertDialogFooter>\n                  </AlertDialogContent>\n                </AlertDialog>\n              </div>\n            </div>\n          ))\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":6869},"src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"src/pages/driver-components/LocationAlert.tsx":{"content":"import { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { AlertCircle } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface LocationAlertProps {\n  requestPermission: () => void;\n}\n\nexport default function LocationAlert({ requestPermission }: LocationAlertProps) {\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n      <Alert>\n        <AlertCircle className=\"h-4 w-4\" />\n        <AlertDescription>\n          Location access is required to receive delivery requests.\n          <Button\n            variant=\"link\"\n            className=\"p-0 h-auto ml-1\"\n            onClick={requestPermission}\n            data-testid=\"button-enable-location\"\n          >\n            Enable now\n          </Button>\n        </AlertDescription>\n      </Alert>\n    </div>\n  );\n}\n","size_bytes":829},"ZimFeast/orders/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"ZimFeast/restaurants/routing.py":{"content":"from django.urls import re_path\nfrom . import consumers\n\nwebsocket_urlpatterns = [\n    # WebSocket URL for restaurant dashboard\n    re_path(r'ws/restaurants/(?P<restaurant_id>\\d+)/dashboard/$', consumers.RestaurantDashboardConsumer.as_asgi()),\n]\n","size_bytes":246},"src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\n\nexport interface User {\n  id: string;\n  email: string;\n  first_name: string;\n  last_name: string;\n  phone_number: string;\n  role: \"admin\" | \"customer\" | \"driver\" | \"restaurant\" | \"admin\";\n}\n\n// Helper to call API with JWT\nexport async function apiRequest<T>(\n  url: string,\n  method: \"GET\" | \"POST\" | \"PUT\" | \"PATCH\" | \"DELETE\" = \"GET\",\n  data?: any\n): Promise<T> {\n  const token = localStorage.getItem(\"token\");\n  const headers: Record<string, string> = {};\n  if (data) headers[\"Content-Type\"] = \"application/json\";\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`;\n\n  const res = await fetch(url, {\n    method,\n    headers,\n    body: data ? JSON.stringify(data) : undefined,\n  });\n\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(`${res.status}: ${text}`);\n  }\n\n  return res.json();\n}\n\n// Auth hook\nexport function useAuth() {\n  const token = localStorage.getItem(\"token\");\n\n  const { data, isLoading, error, refetch } = useQuery<User>({\n    queryKey: [\"/api/accounts/profile/\"],\n    queryFn: () => apiRequest<User>(\"http://127.0.0.1:8000/api/accounts/profile/\"),\n    enabled: !!token, // only fetch if token exists\n    retry: false,\n    refetchOnWindowFocus: false,\n  });\n\n  return {\n    user: data,\n    isAuthenticated: !!data,\n    isLoading,\n    error,\n    refetch, // expose refetch for manual calls\n  };\n}\n","size_bytes":1397},"ZimFeast/ZimFeast/settings.py":{"content":"from pathlib import Path\nimport os\nfrom decouple import config\nfrom corsheaders.defaults import default_headers\n\n# Build paths inside the project like this: BASE_DIR / 'subdir'.\nBASE_DIR = Path(__file__).resolve().parent.parent\n\nSECRET_KEY = config(\"SECRET_KEY\")\n\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = True\n\nALLOWED_HOSTS = ['*']  # For testing only\n\nCORS_ALLOW_ALL_ORIGINS = True  # For development in Replit environment\n\nCORS_ALLOW_HEADERS = list(default_headers) + [\n    'Authorization',\n]\n\n# Application definition\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'rest_framework',\n    'channels',\n\n    'corsheaders',\n\n    'accounts',\n    'restaurants',\n    'orders',\n    'drivers',\n    'payments',\n]\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'corsheaders.middleware.CorsMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n\nGOOGLE_MAPS_API_KEY = config(\"GOOGLE_API_KEY\")\n\nSENDGRID_API_KEY = config(\"SENDGRID_API_KEY\")\n\nPAYNOW_SANDBOX_URL = config(\"PAYNOW_SANDBOX_URL\")  # change to live URL in production\nPAYNOW_RETURN_URL = config(\"PAYNOW_RETURN_URL\")\nPAYNOW_RESULT_URL = config(\"PAYNOW_RESULT_URL\")\n\nPAYNOW_INTEGRATION_ID = config(\"PAYNOW_Integration_ID\")\nPAYNOW_INTEGRATION_KEY = config(\"PAYNOW_Integration_Key\")\n\nROOT_URLCONF = 'ZimFeast.urls'\n\n# Channels (example: Redis URL via env)\nCHANNEL_LAYERS = {\n    'default': {\n        'BACKEND': 'channels_redis.core.RedisChannelLayer',\n        'CONFIG': { 'hosts': [os.environ.get('REDIS_URL','redis://127.0.0.1:6379')] },\n    },\n}\n\nREST_FRAMEWORK = {\n    'DEFAULT_AUTHENTICATION_CLASSES': (\n        'accounts.token.JWTAuthentication',\n    ),\n    'DEFAULT_PERMISSION_CLASSES': (\n        'rest_framework.permissions.IsAuthenticated',\n    ),\n    'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.CursorPagination',\n    'PAGE_SIZE': 10,\n    'CURSOR_PAGINATION_ORDERING': '-id',\n}\n\nSIMPLE_JWT = {\n    'AUTH_HEADER_TYPES': ('Bearer',),\n}\n\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n\nWSGI_APPLICATION = 'ZimFeast.wsgi.application'\n\n\n# Database\n# https://docs.djangoproject.com/en/5.2/ref/settings/#databases\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': BASE_DIR / 'db.sqlite3',\n    }\n}\n\nAUTH_USER_MODEL = 'accounts.CustomUser'\n\n# Password validation\n# https://docs.djangoproject.com/en/5.2/ref/settings/#auth-password-validators\n\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n\n\n# Internationalization\n# https://docs.djangoproject.com/en/5.2/topics/i18n/\n\nLANGUAGE_CODE = 'en-us'\n\nTIME_ZONE = 'UTC'\n\nUSE_I18N = True\n\nUSE_TZ = True\n\n\n# Static files (CSS, JavaScript, Images)\n# https://docs.djangoproject.com/en/5.2/howto/static-files/\n\nSTATIC_URL = 'static/'\n\n# Default primary key field type\n# https://docs.djangoproject.com/en/5.2/ref/settings/#default-auto-field\n\nDEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'\n","size_bytes":4114},"ZimFeast/payments/models.py":{"content":"from django.db import models\nfrom django.conf import settings\nfrom decimal import Decimal\nfrom orders.models import Order  # adjust import based on your project\n\nclass FeastVoucher(models.Model):\n    \"\"\"\n    Represents the user's e-wallet. \n    Users can deposit multiple times and use it for multiple payments.\n    \"\"\"\n    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name=\"feast_vouchers\")\n    balance = models.DecimalField(max_digits=12, decimal_places=2, default=Decimal('0.00'))\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n\n    def deposit(self, amount: Decimal):\n        self.balance += amount\n        self.save()\n\n    def withdraw(self, amount: Decimal):\n        if amount > self.balance:\n            raise ValueError(\"Insufficient voucher balance\")\n        self.balance -= amount\n        self.save()\n\n    def __str__(self):\n        return f\"{self.user.email} - Balance: ${self.balance}\"\n\n\nclass Payment(models.Model):\n    PAYMENT_METHODS = (\n        (\"paynow\", \"PayNow\"),\n        (\"voucher\", \"FeastVoucher\"),\n    )\n\n    STATUS_CHOICES = (\n        (\"pending\", \"Pending\"),\n        (\"paid\", \"Paid\"),\n        (\"failed\", \"Failed\"),\n    )\n\n    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name=\"payments\")\n    order = models.ForeignKey(Order, on_delete=models.CASCADE, related_name=\"payments\", null=True, blank=True)\n    reference = models.CharField(max_length=100, unique=True)\n    amount = models.DecimalField(max_digits=12, decimal_places=2)\n    method = models.CharField(max_length=20, choices=PAYMENT_METHODS)\n    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default=\"pending\")\n    created_at = models.DateTimeField(auto_now_add=True)\n\n    def __str__(self):\n        return f\"{self.user.email} - {self.method} - {self.status} - ${self.amount}\"\n","size_bytes":1917},"src/pages/RestaurantDashboard.tsx":{"content":"// src/pages/RestaurantDashboard.tsx\nimport { useState, useEffect, useRef, useCallback } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport DashboardLayout from \"./restaurant-components/DashboardLayout\";\nimport DashboardHeader from \"./restaurant-components/DashboardHeader\";\nimport StatsCards from \"./restaurant-components/StatsCards\";\nimport LiveOrders from \"./restaurant-components/LiveOrders\";\nimport MenuManagement from \"./restaurant-components/MenuManagement\";\nimport ExternalAPIDialog from \"./restaurant-components/ExternalAPIDialog\";\n\n// -------------------\n// Types\n// -------------------\ntype OrderItem = { id: string; name: string; quantity: number; price?: number };\ntype Order = {\n  id: string;\n  customerPhone?: string;\n  createdAt?: string;\n  items?: OrderItem[];\n  total?: number;\n  total_fee?: number;\n  status: string;\n};\ntype OrdersPage = {\n  next: string | null;\n  previous: string | null;\n  results: Order[];\n};\n\n// -------------------\n// REST API helpers\n// -------------------\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem(\"token\");\n  return {\n    \"Content-Type\": \"application/json\",\n    ...(token ? { Authorization: `Bearer ${token}` } : {}),\n  };\n};\n\nconst fetchOrdersPage = async (url: string): Promise<OrdersPage> => {\n  const res = await fetch(url, { headers: getAuthHeaders() });\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || \"Failed to fetch orders\");\n  }\n  return await res.json();\n};\n\nconst fetchMenuItems = async (restaurantId: number) => {\n  const res = await fetch(`http://127.0.0.1:8000/api/restaurants/${restaurantId}/menu-items/`, { headers: getAuthHeaders() });\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || \"Failed to fetch menu items\");\n  }\n  return await res.json();\n};\n\n// Calls backend endpoints to update order. statusArg must be \"preparing\" or \"completed\".\nconst updateOrderStatusRest = async (orderId: string, statusArg: \"preparing\" | \"completed\") => {\n  const url = `http://127.0.0.1:8000/api/orders/${orderId}/${statusArg}/`;\n  const res = await fetch(url, {\n    method: \"POST\",\n    headers: getAuthHeaders(),\n  });\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || \"Failed to update order status\");\n  }\n  return res.json();\n};\n\n// -------------------\n// Main Component\n// -------------------\nexport default function RestaurantDashboard() {\n  const { user, isAuthenticated, isLoading } = useAuth();\n  const { toast } = useToast();\n\n  const [dashboardData, setDashboardData] = useState({\n    restaurantName: \"\",\n    todayOrders: 0,\n    todayRevenue: 0,\n    avgRating: 0,\n    preparing: 0,\n    pending: 0,\n    completed: 0,\n  });\n\n  const [ordersData, setOrdersData] = useState<OrdersPage>({\n    next: null,\n    previous: null,\n    results: [],\n  });\n\n  const [menuItems, setMenuItems] = useState<any[]>([]);\n  const [selectedStatus, setSelectedStatus] = useState<string>(\"\");\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n  const [isExternalAPIDialogOpen, setIsExternalAPIDialogOpen] = useState(false);\n\n  // preserve websocket instance in ref so handlers can access state safely\n  const wsRef = useRef<WebSocket | null>(null);\n  const reconnectAttemptsRef = useRef(0);\n  const restaurantId =\n    // try common shapes: user.restaurantId, user.restaurant_id, fallback to user.id (not ideal)\n    (user as any)?.restaurantId ?? (user as any)?.restaurant_id ?? (user as any)?.restaurant?.id ?? (user as any)?.id;\n\n  // Auth redirect: if not authenticated, go to login\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"Logging in...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/login\";\n      }, 500);\n    }\n  }, [isAuthenticated, isLoading, toast]);\n\n  // Load initial data once restaurantId is known\n  useEffect(() => {\n    if (!restaurantId) return;\n\n    const loadDashboardData = async () => {\n      try {\n        // initial orders page (use a dedicated endpoint)\n        const ordersResponse = await fetchOrdersPage(\"http://127.0.0.1:8000/api/orders/list/\");\n        setOrdersData(ordersResponse);\n\n        // derive stats from loaded orders (fallback / initial)\n        const todayOrders = ordersResponse.results.length;\n        const todayRevenue = ordersResponse.results.reduce((acc: number, o: any) => acc + (o.total_fee ?? o.total ?? 0), 0);\n\n        setDashboardData((prev) => ({\n          ...prev,\n          restaurantName: (user as any)?.restaurant_name ?? \"My Restaurant\",\n          todayOrders,\n          todayRevenue,\n        }));\n\n        // load menu items\n        const menuRes = await fetchMenuItems(Number(restaurantId));\n        setMenuItems(menuRes);\n      } catch (err: any) {\n        toast({\n          title: \"Error\",\n          description: err.message || \"Failed to load dashboard data\",\n          variant: \"destructive\",\n        });\n      }\n    };\n\n    loadDashboardData();\n  }, [restaurantId, toast, user]);\n\n  // Pagination handlers\n  const handleNext = async () => {\n    if (!ordersData.next) return;\n    try {\n      const nextPage = await fetchOrdersPage(ordersData.next);\n      setOrdersData(nextPage);\n    } catch (err: any) {\n      toast({ title: \"Error\", description: err.message || \"Failed to fetch next page\", variant: \"destructive\" });\n    }\n  };\n\n  const handlePrevious = async () => {\n    if (!ordersData.previous) return;\n    try {\n      const prevPage = await fetchOrdersPage(ordersData.previous);\n      setOrdersData(prevPage);\n    } catch (err: any) {\n      toast({ title: \"Error\", description: err.message || \"Failed to fetch previous page\", variant: \"destructive\" });\n    }\n  };\n\n  // Helper to merge/update an order inside ordersData.results\n  const upsertOrder = useCallback((order: Order) => {\n    setOrdersData((prev) => {\n      const exists = prev.results.some((o) => o.id === order.id);\n      let newResults = exists ? prev.results.map((o) => (o.id === order.id ? { ...o, ...order } : o)) : [order, ...prev.results];\n      return { ...prev, results: newResults };\n    });\n  }, []);\n\n  // Update order via REST, called when user clicks UI actions\n  const handleUpdateOrder = async (orderId: string, status: \"preparing\" | \"completed\") => {\n    // optimistic UI update\n    setOrdersData((prev) => ({\n      ...prev,\n      results: prev.results.map((o) => (o.id === orderId ? { ...o, status } : o)),\n    }));\n\n    try {\n      const resp = await updateOrderStatusRest(orderId, status);\n      // backend may return updated order object; upsert it\n      if (resp && typeof resp === \"object\") {\n        upsertOrder(resp as Order);\n      }\n      // optionally show toast\n      toast({ title: \"Order updated\", description: `Order ${orderId} set to ${status}`, variant: \"default\" });\n    } catch (err: any) {\n      // revert optimistic update when error\n      setOrdersData((prev) => ({\n        ...prev,\n        results: prev.results.map((o) => (o.id === orderId ? { ...o, status: o.status } : o)),\n      }));\n      toast({ title: \"Error\", description: err.message || \"Failed to update order\", variant: \"destructive\" });\n    }\n  };\n\n  // -------------------\n  // WebSocket connection for live orders + stats\n  // -------------------\n  useEffect(() => {\n    if (!restaurantId) return;\n\n    const connect = () => {\n      const protocol = window.location.protocol === \"https:\" ? \"wss\" : \"ws\";\n      // make sure backend path matches your Channels consumer route\n      const wsUrl = `${protocol}://${window.location.host}/ws/restaurants/${restaurantId}/dashboard/`;\n      const ws = new WebSocket(wsUrl);\n      wsRef.current = ws;\n\n      ws.onopen = () => {\n        console.info(\"Dashboard WS connected\");\n        reconnectAttemptsRef.current = 0;\n      };\n\n      ws.onmessage = (event) => {\n        try {\n          const payload = JSON.parse(event.data);\n\n          // Stats update\n          if (payload.today_orders !== undefined || payload.today_revenue !== undefined || payload.today_average_rating !== undefined) {\n            setDashboardData((prev) => ({\n              ...prev,\n              todayOrders: payload.today_orders ?? prev.todayOrders,\n              todayRevenue: payload.today_revenue ?? prev.todayRevenue,\n              avgRating: payload.today_average_rating ?? prev.avgRating,\n              preparing: payload.preparing ?? prev.preparing,\n              pending: payload.pending ?? prev.pending,\n              completed: payload.completed ?? prev.completed,\n            }));\n          }\n\n          // New order: add to head of list\n          if (payload.new_order) {\n            upsertOrder(payload.new_order as Order);\n          }\n\n          // Updated order: update inside list\n          if (payload.updated_order) {\n            upsertOrder(payload.updated_order as Order);\n          }\n        } catch (e) {\n          console.error(\"WS message parse error\", e);\n        }\n      };\n\n      ws.onclose = (ev) => {\n        console.warn(\"Dashboard WS closed\", ev);\n        // attempt reconnect with backoff\n        const tries = reconnectAttemptsRef.current;\n        const delay = Math.min(1000 * 2 ** tries, 30000); // cap 30s\n        reconnectAttemptsRef.current += 1;\n        setTimeout(() => connect(), delay);\n      };\n\n      ws.onerror = (err) => {\n        console.error(\"Dashboard WS error\", err);\n        ws.close();\n      };\n    };\n\n    connect();\n\n    // cleanup on unmount\n    return () => {\n      wsRef.current?.close();\n      wsRef.current = null;\n    };\n  }, [restaurantId, upsertOrder]);\n\n  return (\n    <DashboardLayout>\n      <DashboardHeader restaurantName={dashboardData.restaurantName} />\n\n      <main className=\"max-w-7xl mx-auto p-4 space-y-8\">\n        {/* External API Button */}\n        <div className=\"flex justify-end\">\n          <button\n            onClick={() => setIsExternalAPIDialogOpen(true)}\n            className=\"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg shadow-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-200 hover:shadow-xl transform hover:-translate-y-0.5\"\n          >\n            <i className=\"fas fa-plug\"></i>\n            <span className=\"font-semibold\">External APIs</span>\n          </button>\n        </div>\n\n        <StatsCards\n          todayOrders={dashboardData.todayOrders}\n          todayRevenue={dashboardData.todayRevenue}\n          avgRating={dashboardData.avgRating}\n          menuItemsCount={menuItems.length}\n        />\n\n        <section>\n          <h2 className=\"text-xl font-bold mb-4\">Live Orders</h2>\n          <LiveOrders\n            orders={ordersData.results}\n            selectedStatus={selectedStatus}\n            setSelectedStatus={setSelectedStatus}\n            updateOrder={(orderId: string, status: string) => {\n              // map \"preparing\" and \"completed\" to REST calls\n              if (status === \"preparing\") handleUpdateOrder(orderId, \"preparing\");\n              else if (status === \"completed\") handleUpdateOrder(orderId, \"completed\");\n              else {\n                // handle other status changes if needed\n                handleUpdateOrder(orderId, status as any);\n              }\n            }}\n          />\n\n          <div className=\"flex justify-between mt-4\">\n            <button\n              onClick={handlePrevious}\n              disabled={!ordersData.previous}\n              className=\"px-4 py-2 bg-gray-300 rounded disabled:opacity-50\"\n            >\n              Previous 10\n            </button>\n            <button\n              onClick={handleNext}\n              disabled={!ordersData.next}\n              className=\"px-4 py-2 bg-gray-300 rounded disabled:opacity-50\"\n            >\n              Next 10\n            </button>\n          </div>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold mb-4\">Menu Management</h2>\n          <MenuManagement\n            handleAddItem={() => setIsAddDialogOpen(true)}\n            isAddDialogOpen={isAddDialogOpen}\n            setIsAddDialogOpen={setIsAddDialogOpen}\n          />\n        </section>\n      </main>\n\n      {/* External API Dialog */}\n      <ExternalAPIDialog\n        isOpen={isExternalAPIDialogOpen}\n        onClose={() => setIsExternalAPIDialogOpen(false)}\n        restaurantId={restaurantId}\n      />\n    </DashboardLayout>\n  );\n}\n","size_bytes":12423},"src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"ZimFeast/drivers/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass DriversConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'drivers'\n","size_bytes":146},"src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"ZimFeast/payments/migrations/__init__.py":{"content":"","size_bytes":0},"src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"node_modules/.vite/deps/@radix-ui_react-dialog.js":{"content":"\"use client\";\nimport {\n  Close,\n  Content,\n  Description,\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n  Overlay,\n  Portal,\n  Root,\n  Title,\n  Trigger,\n  WarningProvider,\n  createDialogScope\n} from \"./chunk-OL5WVRMA.js\";\nimport \"./chunk-SPW4NC5B.js\";\nimport \"./chunk-JNX36Q56.js\";\nimport \"./chunk-ZD6YADYP.js\";\nimport \"./chunk-AEL5JHOW.js\";\nimport \"./chunk-KQC75CTR.js\";\nimport \"./chunk-UPK5WUJ5.js\";\nimport \"./chunk-LJH5O6ZH.js\";\nimport \"./chunk-UPELNCPK.js\";\nimport \"./chunk-WKPQ4ZTV.js\";\nimport \"./chunk-BG45W2ER.js\";\nimport \"./chunk-HXA6O6EE.js\";\nexport {\n  Close,\n  Content,\n  Description,\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n  Overlay,\n  Portal,\n  Root,\n  Title,\n  Trigger,\n  WarningProvider,\n  createDialogScope\n};\n//# sourceMappingURL=@radix-ui_react-dialog.js.map\n","size_bytes":948},"start_backend.sh":{"content":"#!/bin/bash\ncd ZimFeast\nexport DJANGO_SETTINGS_MODULE=ZimFeast.settings\ndaphne -b localhost -p 8000 ZimFeast.asgi:application\n","size_bytes":126},"node_modules/.vite/deps/@radix-ui_react-toast.js":{"content":"\"use client\";\nimport {\n  createCollection\n} from \"./chunk-OG4DZOYC.js\";\nimport {\n  VisuallyHidden\n} from \"./chunk-RRMGE3QL.js\";\nimport {\n  Branch,\n  Portal,\n  Root\n} from \"./chunk-ZD6YADYP.js\";\nimport {\n  Presence\n} from \"./chunk-AEL5JHOW.js\";\nimport {\n  composeEventHandlers,\n  createContextScope,\n  useCallbackRef,\n  useControllableState,\n  useLayoutEffect2\n} from \"./chunk-KQC75CTR.js\";\nimport {\n  Primitive,\n  dispatchDiscreteCustomEvent\n} from \"./chunk-UPK5WUJ5.js\";\nimport {\n  useComposedRefs\n} from \"./chunk-LJH5O6ZH.js\";\nimport {\n  require_react_dom\n} from \"./chunk-UPELNCPK.js\";\nimport {\n  require_jsx_runtime\n} from \"./chunk-WKPQ4ZTV.js\";\nimport {\n  require_react\n} from \"./chunk-BG45W2ER.js\";\nimport {\n  __toESM\n} from \"./chunk-HXA6O6EE.js\";\n\n// node_modules/@radix-ui/react-toast/dist/index.mjs\nvar React = __toESM(require_react(), 1);\nvar ReactDOM = __toESM(require_react_dom(), 1);\nvar import_jsx_runtime = __toESM(require_jsx_runtime(), 1);\nvar PROVIDER_NAME = \"ToastProvider\";\nvar [Collection, useCollection, createCollectionScope] = createCollection(\"Toast\");\nvar [createToastContext, createToastScope] = createContextScope(\"Toast\", [createCollectionScope]);\nvar [ToastProviderProvider, useToastProviderContext] = createToastContext(PROVIDER_NAME);\nvar ToastProvider = (props) => {\n  const {\n    __scopeToast,\n    label = \"Notification\",\n    duration = 5e3,\n    swipeDirection = \"right\",\n    swipeThreshold = 50,\n    children\n  } = props;\n  const [viewport, setViewport] = React.useState(null);\n  const [toastCount, setToastCount] = React.useState(0);\n  const isFocusedToastEscapeKeyDownRef = React.useRef(false);\n  const isClosePausedRef = React.useRef(false);\n  if (!label.trim()) {\n    console.error(\n      `Invalid prop \\`label\\` supplied to \\`${PROVIDER_NAME}\\`. Expected non-empty \\`string\\`.`\n    );\n  }\n  return (0, import_jsx_runtime.jsx)(Collection.Provider, { scope: __scopeToast, children: (0, import_jsx_runtime.jsx)(\n    ToastProviderProvider,\n    {\n      scope: __scopeToast,\n      label,\n      duration,\n      swipeDirection,\n      swipeThreshold,\n      toastCount,\n      viewport,\n      onViewportChange: setViewport,\n      onToastAdd: React.useCallback(() => setToastCount((prevCount) => prevCount + 1), []),\n      onToastRemove: React.useCallback(() => setToastCount((prevCount) => prevCount - 1), []),\n      isFocusedToastEscapeKeyDownRef,\n      isClosePausedRef,\n      children\n    }\n  ) });\n};\nToastProvider.displayName = PROVIDER_NAME;\nvar VIEWPORT_NAME = \"ToastViewport\";\nvar VIEWPORT_DEFAULT_HOTKEY = [\"F8\"];\nvar VIEWPORT_PAUSE = \"toast.viewportPause\";\nvar VIEWPORT_RESUME = \"toast.viewportResume\";\nvar ToastViewport = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeToast,\n      hotkey = VIEWPORT_DEFAULT_HOTKEY,\n      label = \"Notifications ({hotkey})\",\n      ...viewportProps\n    } = props;\n    const context = useToastProviderContext(VIEWPORT_NAME, __scopeToast);\n    const getItems = useCollection(__scopeToast);\n    const wrapperRef = React.useRef(null);\n    const headFocusProxyRef = React.useRef(null);\n    const tailFocusProxyRef = React.useRef(null);\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref, context.onViewportChange);\n    const hotkeyLabel = hotkey.join(\"+\").replace(/Key/g, \"\").replace(/Digit/g, \"\");\n    const hasToasts = context.toastCount > 0;\n    React.useEffect(() => {\n      const handleKeyDown = (event) => {\n        var _a;\n        const isHotkeyPressed = hotkey.length !== 0 && hotkey.every((key) => event[key] || event.code === key);\n        if (isHotkeyPressed) (_a = ref.current) == null ? void 0 : _a.focus();\n      };\n      document.addEventListener(\"keydown\", handleKeyDown);\n      return () => document.removeEventListener(\"keydown\", handleKeyDown);\n    }, [hotkey]);\n    React.useEffect(() => {\n      const wrapper = wrapperRef.current;\n      const viewport = ref.current;\n      if (hasToasts && wrapper && viewport) {\n        const handlePause = () => {\n          if (!context.isClosePausedRef.current) {\n            const pauseEvent = new CustomEvent(VIEWPORT_PAUSE);\n            viewport.dispatchEvent(pauseEvent);\n            context.isClosePausedRef.current = true;\n          }\n        };\n        const handleResume = () => {\n          if (context.isClosePausedRef.current) {\n            const resumeEvent = new CustomEvent(VIEWPORT_RESUME);\n            viewport.dispatchEvent(resumeEvent);\n            context.isClosePausedRef.current = false;\n          }\n        };\n        const handleFocusOutResume = (event) => {\n          const isFocusMovingOutside = !wrapper.contains(event.relatedTarget);\n          if (isFocusMovingOutside) handleResume();\n        };\n        const handlePointerLeaveResume = () => {\n          const isFocusInside = wrapper.contains(document.activeElement);\n          if (!isFocusInside) handleResume();\n        };\n        wrapper.addEventListener(\"focusin\", handlePause);\n        wrapper.addEventListener(\"focusout\", handleFocusOutResume);\n        wrapper.addEventListener(\"pointermove\", handlePause);\n        wrapper.addEventListener(\"pointerleave\", handlePointerLeaveResume);\n        window.addEventListener(\"blur\", handlePause);\n        window.addEventListener(\"focus\", handleResume);\n        return () => {\n          wrapper.removeEventListener(\"focusin\", handlePause);\n          wrapper.removeEventListener(\"focusout\", handleFocusOutResume);\n          wrapper.removeEventListener(\"pointermove\", handlePause);\n          wrapper.removeEventListener(\"pointerleave\", handlePointerLeaveResume);\n          window.removeEventListener(\"blur\", handlePause);\n          window.removeEventListener(\"focus\", handleResume);\n        };\n      }\n    }, [hasToasts, context.isClosePausedRef]);\n    const getSortedTabbableCandidates = React.useCallback(\n      ({ tabbingDirection }) => {\n        const toastItems = getItems();\n        const tabbableCandidates = toastItems.map((toastItem) => {\n          const toastNode = toastItem.ref.current;\n          const toastTabbableCandidates = [toastNode, ...getTabbableCandidates(toastNode)];\n          return tabbingDirection === \"forwards\" ? toastTabbableCandidates : toastTabbableCandidates.reverse();\n        });\n        return (tabbingDirection === \"forwards\" ? tabbableCandidates.reverse() : tabbableCandidates).flat();\n      },\n      [getItems]\n    );\n    React.useEffect(() => {\n      const viewport = ref.current;\n      if (viewport) {\n        const handleKeyDown = (event) => {\n          var _a, _b, _c;\n          const isMetaKey = event.altKey || event.ctrlKey || event.metaKey;\n          const isTabKey = event.key === \"Tab\" && !isMetaKey;\n          if (isTabKey) {\n            const focusedElement = document.activeElement;\n            const isTabbingBackwards = event.shiftKey;\n            const targetIsViewport = event.target === viewport;\n            if (targetIsViewport && isTabbingBackwards) {\n              (_a = headFocusProxyRef.current) == null ? void 0 : _a.focus();\n              return;\n            }\n            const tabbingDirection = isTabbingBackwards ? \"backwards\" : \"forwards\";\n            const sortedCandidates = getSortedTabbableCandidates({ tabbingDirection });\n            const index = sortedCandidates.findIndex((candidate) => candidate === focusedElement);\n            if (focusFirst(sortedCandidates.slice(index + 1))) {\n              event.preventDefault();\n            } else {\n              isTabbingBackwards ? (_b = headFocusProxyRef.current) == null ? void 0 : _b.focus() : (_c = tailFocusProxyRef.current) == null ? void 0 : _c.focus();\n            }\n          }\n        };\n        viewport.addEventListener(\"keydown\", handleKeyDown);\n        return () => viewport.removeEventListener(\"keydown\", handleKeyDown);\n      }\n    }, [getItems, getSortedTabbableCandidates]);\n    return (0, import_jsx_runtime.jsxs)(\n      Branch,\n      {\n        ref: wrapperRef,\n        role: \"region\",\n        \"aria-label\": label.replace(\"{hotkey}\", hotkeyLabel),\n        tabIndex: -1,\n        style: { pointerEvents: hasToasts ? void 0 : \"none\" },\n        children: [\n          hasToasts && (0, import_jsx_runtime.jsx)(\n            FocusProxy,\n            {\n              ref: headFocusProxyRef,\n              onFocusFromOutsideViewport: () => {\n                const tabbableCandidates = getSortedTabbableCandidates({\n                  tabbingDirection: \"forwards\"\n                });\n                focusFirst(tabbableCandidates);\n              }\n            }\n          ),\n          (0, import_jsx_runtime.jsx)(Collection.Slot, { scope: __scopeToast, children: (0, import_jsx_runtime.jsx)(Primitive.ol, { tabIndex: -1, ...viewportProps, ref: composedRefs }) }),\n          hasToasts && (0, import_jsx_runtime.jsx)(\n            FocusProxy,\n            {\n              ref: tailFocusProxyRef,\n              onFocusFromOutsideViewport: () => {\n                const tabbableCandidates = getSortedTabbableCandidates({\n                  tabbingDirection: \"backwards\"\n                });\n                focusFirst(tabbableCandidates);\n              }\n            }\n          )\n        ]\n      }\n    );\n  }\n);\nToastViewport.displayName = VIEWPORT_NAME;\nvar FOCUS_PROXY_NAME = \"ToastFocusProxy\";\nvar FocusProxy = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeToast, onFocusFromOutsideViewport, ...proxyProps } = props;\n    const context = useToastProviderContext(FOCUS_PROXY_NAME, __scopeToast);\n    return (0, import_jsx_runtime.jsx)(\n      VisuallyHidden,\n      {\n        \"aria-hidden\": true,\n        tabIndex: 0,\n        ...proxyProps,\n        ref: forwardedRef,\n        style: { position: \"fixed\" },\n        onFocus: (event) => {\n          var _a;\n          const prevFocusedElement = event.relatedTarget;\n          const isFocusFromOutsideViewport = !((_a = context.viewport) == null ? void 0 : _a.contains(prevFocusedElement));\n          if (isFocusFromOutsideViewport) onFocusFromOutsideViewport();\n        }\n      }\n    );\n  }\n);\nFocusProxy.displayName = FOCUS_PROXY_NAME;\nvar TOAST_NAME = \"Toast\";\nvar TOAST_SWIPE_START = \"toast.swipeStart\";\nvar TOAST_SWIPE_MOVE = \"toast.swipeMove\";\nvar TOAST_SWIPE_CANCEL = \"toast.swipeCancel\";\nvar TOAST_SWIPE_END = \"toast.swipeEnd\";\nvar Toast = React.forwardRef(\n  (props, forwardedRef) => {\n    const { forceMount, open: openProp, defaultOpen, onOpenChange, ...toastProps } = props;\n    const [open = true, setOpen] = useControllableState({\n      prop: openProp,\n      defaultProp: defaultOpen,\n      onChange: onOpenChange\n    });\n    return (0, import_jsx_runtime.jsx)(Presence, { present: forceMount || open, children: (0, import_jsx_runtime.jsx)(\n      ToastImpl,\n      {\n        open,\n        ...toastProps,\n        ref: forwardedRef,\n        onClose: () => setOpen(false),\n        onPause: useCallbackRef(props.onPause),\n        onResume: useCallbackRef(props.onResume),\n        onSwipeStart: composeEventHandlers(props.onSwipeStart, (event) => {\n          event.currentTarget.setAttribute(\"data-swipe\", \"start\");\n        }),\n        onSwipeMove: composeEventHandlers(props.onSwipeMove, (event) => {\n          const { x, y } = event.detail.delta;\n          event.currentTarget.setAttribute(\"data-swipe\", \"move\");\n          event.currentTarget.style.setProperty(\"--radix-toast-swipe-move-x\", `${x}px`);\n          event.currentTarget.style.setProperty(\"--radix-toast-swipe-move-y\", `${y}px`);\n        }),\n        onSwipeCancel: composeEventHandlers(props.onSwipeCancel, (event) => {\n          event.currentTarget.setAttribute(\"data-swipe\", \"cancel\");\n          event.currentTarget.style.removeProperty(\"--radix-toast-swipe-move-x\");\n          event.currentTarget.style.removeProperty(\"--radix-toast-swipe-move-y\");\n          event.currentTarget.style.removeProperty(\"--radix-toast-swipe-end-x\");\n          event.currentTarget.style.removeProperty(\"--radix-toast-swipe-end-y\");\n        }),\n        onSwipeEnd: composeEventHandlers(props.onSwipeEnd, (event) => {\n          const { x, y } = event.detail.delta;\n          event.currentTarget.setAttribute(\"data-swipe\", \"end\");\n          event.currentTarget.style.removeProperty(\"--radix-toast-swipe-move-x\");\n          event.currentTarget.style.removeProperty(\"--radix-toast-swipe-move-y\");\n          event.currentTarget.style.setProperty(\"--radix-toast-swipe-end-x\", `${x}px`);\n          event.currentTarget.style.setProperty(\"--radix-toast-swipe-end-y\", `${y}px`);\n          setOpen(false);\n        })\n      }\n    ) });\n  }\n);\nToast.displayName = TOAST_NAME;\nvar [ToastInteractiveProvider, useToastInteractiveContext] = createToastContext(TOAST_NAME, {\n  onClose() {\n  }\n});\nvar ToastImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeToast,\n      type = \"foreground\",\n      duration: durationProp,\n      open,\n      onClose,\n      onEscapeKeyDown,\n      onPause,\n      onResume,\n      onSwipeStart,\n      onSwipeMove,\n      onSwipeCancel,\n      onSwipeEnd,\n      ...toastProps\n    } = props;\n    const context = useToastProviderContext(TOAST_NAME, __scopeToast);\n    const [node, setNode] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node2) => setNode(node2));\n    const pointerStartRef = React.useRef(null);\n    const swipeDeltaRef = React.useRef(null);\n    const duration = durationProp || context.duration;\n    const closeTimerStartTimeRef = React.useRef(0);\n    const closeTimerRemainingTimeRef = React.useRef(duration);\n    const closeTimerRef = React.useRef(0);\n    const { onToastAdd, onToastRemove } = context;\n    const handleClose = useCallbackRef(() => {\n      var _a;\n      const isFocusInToast = node == null ? void 0 : node.contains(document.activeElement);\n      if (isFocusInToast) (_a = context.viewport) == null ? void 0 : _a.focus();\n      onClose();\n    });\n    const startTimer = React.useCallback(\n      (duration2) => {\n        if (!duration2 || duration2 === Infinity) return;\n        window.clearTimeout(closeTimerRef.current);\n        closeTimerStartTimeRef.current = (/* @__PURE__ */ new Date()).getTime();\n        closeTimerRef.current = window.setTimeout(handleClose, duration2);\n      },\n      [handleClose]\n    );\n    React.useEffect(() => {\n      const viewport = context.viewport;\n      if (viewport) {\n        const handleResume = () => {\n          startTimer(closeTimerRemainingTimeRef.current);\n          onResume == null ? void 0 : onResume();\n        };\n        const handlePause = () => {\n          const elapsedTime = (/* @__PURE__ */ new Date()).getTime() - closeTimerStartTimeRef.current;\n          closeTimerRemainingTimeRef.current = closeTimerRemainingTimeRef.current - elapsedTime;\n          window.clearTimeout(closeTimerRef.current);\n          onPause == null ? void 0 : onPause();\n        };\n        viewport.addEventListener(VIEWPORT_PAUSE, handlePause);\n        viewport.addEventListener(VIEWPORT_RESUME, handleResume);\n        return () => {\n          viewport.removeEventListener(VIEWPORT_PAUSE, handlePause);\n          viewport.removeEventListener(VIEWPORT_RESUME, handleResume);\n        };\n      }\n    }, [context.viewport, duration, onPause, onResume, startTimer]);\n    React.useEffect(() => {\n      if (open && !context.isClosePausedRef.current) startTimer(duration);\n    }, [open, duration, context.isClosePausedRef, startTimer]);\n    React.useEffect(() => {\n      onToastAdd();\n      return () => onToastRemove();\n    }, [onToastAdd, onToastRemove]);\n    const announceTextContent = React.useMemo(() => {\n      return node ? getAnnounceTextContent(node) : null;\n    }, [node]);\n    if (!context.viewport) return null;\n    return (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [\n      announceTextContent && (0, import_jsx_runtime.jsx)(\n        ToastAnnounce,\n        {\n          __scopeToast,\n          role: \"status\",\n          \"aria-live\": type === \"foreground\" ? \"assertive\" : \"polite\",\n          \"aria-atomic\": true,\n          children: announceTextContent\n        }\n      ),\n      (0, import_jsx_runtime.jsx)(ToastInteractiveProvider, { scope: __scopeToast, onClose: handleClose, children: ReactDOM.createPortal(\n        (0, import_jsx_runtime.jsx)(Collection.ItemSlot, { scope: __scopeToast, children: (0, import_jsx_runtime.jsx)(\n          Root,\n          {\n            asChild: true,\n            onEscapeKeyDown: composeEventHandlers(onEscapeKeyDown, () => {\n              if (!context.isFocusedToastEscapeKeyDownRef.current) handleClose();\n              context.isFocusedToastEscapeKeyDownRef.current = false;\n            }),\n            children: (0, import_jsx_runtime.jsx)(\n              Primitive.li,\n              {\n                role: \"status\",\n                \"aria-live\": \"off\",\n                \"aria-atomic\": true,\n                tabIndex: 0,\n                \"data-state\": open ? \"open\" : \"closed\",\n                \"data-swipe-direction\": context.swipeDirection,\n                ...toastProps,\n                ref: composedRefs,\n                style: { userSelect: \"none\", touchAction: \"none\", ...props.style },\n                onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n                  if (event.key !== \"Escape\") return;\n                  onEscapeKeyDown == null ? void 0 : onEscapeKeyDown(event.nativeEvent);\n                  if (!event.nativeEvent.defaultPrevented) {\n                    context.isFocusedToastEscapeKeyDownRef.current = true;\n                    handleClose();\n                  }\n                }),\n                onPointerDown: composeEventHandlers(props.onPointerDown, (event) => {\n                  if (event.button !== 0) return;\n                  pointerStartRef.current = { x: event.clientX, y: event.clientY };\n                }),\n                onPointerMove: composeEventHandlers(props.onPointerMove, (event) => {\n                  if (!pointerStartRef.current) return;\n                  const x = event.clientX - pointerStartRef.current.x;\n                  const y = event.clientY - pointerStartRef.current.y;\n                  const hasSwipeMoveStarted = Boolean(swipeDeltaRef.current);\n                  const isHorizontalSwipe = [\"left\", \"right\"].includes(context.swipeDirection);\n                  const clamp = [\"left\", \"up\"].includes(context.swipeDirection) ? Math.min : Math.max;\n                  const clampedX = isHorizontalSwipe ? clamp(0, x) : 0;\n                  const clampedY = !isHorizontalSwipe ? clamp(0, y) : 0;\n                  const moveStartBuffer = event.pointerType === \"touch\" ? 10 : 2;\n                  const delta = { x: clampedX, y: clampedY };\n                  const eventDetail = { originalEvent: event, delta };\n                  if (hasSwipeMoveStarted) {\n                    swipeDeltaRef.current = delta;\n                    handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE, onSwipeMove, eventDetail, {\n                      discrete: false\n                    });\n                  } else if (isDeltaInDirection(delta, context.swipeDirection, moveStartBuffer)) {\n                    swipeDeltaRef.current = delta;\n                    handleAndDispatchCustomEvent(TOAST_SWIPE_START, onSwipeStart, eventDetail, {\n                      discrete: false\n                    });\n                    event.target.setPointerCapture(event.pointerId);\n                  } else if (Math.abs(x) > moveStartBuffer || Math.abs(y) > moveStartBuffer) {\n                    pointerStartRef.current = null;\n                  }\n                }),\n                onPointerUp: composeEventHandlers(props.onPointerUp, (event) => {\n                  const delta = swipeDeltaRef.current;\n                  const target = event.target;\n                  if (target.hasPointerCapture(event.pointerId)) {\n                    target.releasePointerCapture(event.pointerId);\n                  }\n                  swipeDeltaRef.current = null;\n                  pointerStartRef.current = null;\n                  if (delta) {\n                    const toast = event.currentTarget;\n                    const eventDetail = { originalEvent: event, delta };\n                    if (isDeltaInDirection(delta, context.swipeDirection, context.swipeThreshold)) {\n                      handleAndDispatchCustomEvent(TOAST_SWIPE_END, onSwipeEnd, eventDetail, {\n                        discrete: true\n                      });\n                    } else {\n                      handleAndDispatchCustomEvent(\n                        TOAST_SWIPE_CANCEL,\n                        onSwipeCancel,\n                        eventDetail,\n                        {\n                          discrete: true\n                        }\n                      );\n                    }\n                    toast.addEventListener(\"click\", (event2) => event2.preventDefault(), {\n                      once: true\n                    });\n                  }\n                })\n              }\n            )\n          }\n        ) }),\n        context.viewport\n      ) })\n    ] });\n  }\n);\nvar ToastAnnounce = (props) => {\n  const { __scopeToast, children, ...announceProps } = props;\n  const context = useToastProviderContext(TOAST_NAME, __scopeToast);\n  const [renderAnnounceText, setRenderAnnounceText] = React.useState(false);\n  const [isAnnounced, setIsAnnounced] = React.useState(false);\n  useNextFrame(() => setRenderAnnounceText(true));\n  React.useEffect(() => {\n    const timer = window.setTimeout(() => setIsAnnounced(true), 1e3);\n    return () => window.clearTimeout(timer);\n  }, []);\n  return isAnnounced ? null : (0, import_jsx_runtime.jsx)(Portal, { asChild: true, children: (0, import_jsx_runtime.jsx)(VisuallyHidden, { ...announceProps, children: renderAnnounceText && (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [\n    context.label,\n    \" \",\n    children\n  ] }) }) });\n};\nvar TITLE_NAME = \"ToastTitle\";\nvar ToastTitle = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeToast, ...titleProps } = props;\n    return (0, import_jsx_runtime.jsx)(Primitive.div, { ...titleProps, ref: forwardedRef });\n  }\n);\nToastTitle.displayName = TITLE_NAME;\nvar DESCRIPTION_NAME = \"ToastDescription\";\nvar ToastDescription = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeToast, ...descriptionProps } = props;\n    return (0, import_jsx_runtime.jsx)(Primitive.div, { ...descriptionProps, ref: forwardedRef });\n  }\n);\nToastDescription.displayName = DESCRIPTION_NAME;\nvar ACTION_NAME = \"ToastAction\";\nvar ToastAction = React.forwardRef(\n  (props, forwardedRef) => {\n    const { altText, ...actionProps } = props;\n    if (!altText.trim()) {\n      console.error(\n        `Invalid prop \\`altText\\` supplied to \\`${ACTION_NAME}\\`. Expected non-empty \\`string\\`.`\n      );\n      return null;\n    }\n    return (0, import_jsx_runtime.jsx)(ToastAnnounceExclude, { altText, asChild: true, children: (0, import_jsx_runtime.jsx)(ToastClose, { ...actionProps, ref: forwardedRef }) });\n  }\n);\nToastAction.displayName = ACTION_NAME;\nvar CLOSE_NAME = \"ToastClose\";\nvar ToastClose = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeToast, ...closeProps } = props;\n    const interactiveContext = useToastInteractiveContext(CLOSE_NAME, __scopeToast);\n    return (0, import_jsx_runtime.jsx)(ToastAnnounceExclude, { asChild: true, children: (0, import_jsx_runtime.jsx)(\n      Primitive.button,\n      {\n        type: \"button\",\n        ...closeProps,\n        ref: forwardedRef,\n        onClick: composeEventHandlers(props.onClick, interactiveContext.onClose)\n      }\n    ) });\n  }\n);\nToastClose.displayName = CLOSE_NAME;\nvar ToastAnnounceExclude = React.forwardRef((props, forwardedRef) => {\n  const { __scopeToast, altText, ...announceExcludeProps } = props;\n  return (0, import_jsx_runtime.jsx)(\n    Primitive.div,\n    {\n      \"data-radix-toast-announce-exclude\": \"\",\n      \"data-radix-toast-announce-alt\": altText || void 0,\n      ...announceExcludeProps,\n      ref: forwardedRef\n    }\n  );\n});\nfunction getAnnounceTextContent(container) {\n  const textContent = [];\n  const childNodes = Array.from(container.childNodes);\n  childNodes.forEach((node) => {\n    if (node.nodeType === node.TEXT_NODE && node.textContent) textContent.push(node.textContent);\n    if (isHTMLElement(node)) {\n      const isHidden = node.ariaHidden || node.hidden || node.style.display === \"none\";\n      const isExcluded = node.dataset.radixToastAnnounceExclude === \"\";\n      if (!isHidden) {\n        if (isExcluded) {\n          const altText = node.dataset.radixToastAnnounceAlt;\n          if (altText) textContent.push(altText);\n        } else {\n          textContent.push(...getAnnounceTextContent(node));\n        }\n      }\n    }\n  });\n  return textContent;\n}\nfunction handleAndDispatchCustomEvent(name, handler, detail, { discrete }) {\n  const currentTarget = detail.originalEvent.currentTarget;\n  const event = new CustomEvent(name, { bubbles: true, cancelable: true, detail });\n  if (handler) currentTarget.addEventListener(name, handler, { once: true });\n  if (discrete) {\n    dispatchDiscreteCustomEvent(currentTarget, event);\n  } else {\n    currentTarget.dispatchEvent(event);\n  }\n}\nvar isDeltaInDirection = (delta, direction, threshold = 0) => {\n  const deltaX = Math.abs(delta.x);\n  const deltaY = Math.abs(delta.y);\n  const isDeltaX = deltaX > deltaY;\n  if (direction === \"left\" || direction === \"right\") {\n    return isDeltaX && deltaX > threshold;\n  } else {\n    return !isDeltaX && deltaY > threshold;\n  }\n};\nfunction useNextFrame(callback = () => {\n}) {\n  const fn = useCallbackRef(callback);\n  useLayoutEffect2(() => {\n    let raf1 = 0;\n    let raf2 = 0;\n    raf1 = window.requestAnimationFrame(() => raf2 = window.requestAnimationFrame(fn));\n    return () => {\n      window.cancelAnimationFrame(raf1);\n      window.cancelAnimationFrame(raf2);\n    };\n  }, [fn]);\n}\nfunction isHTMLElement(node) {\n  return node.nodeType === node.ELEMENT_NODE;\n}\nfunction getTabbableCandidates(container) {\n  const nodes = [];\n  const walker = document.createTreeWalker(container, NodeFilter.SHOW_ELEMENT, {\n    acceptNode: (node) => {\n      const isHiddenInput = node.tagName === \"INPUT\" && node.type === \"hidden\";\n      if (node.disabled || node.hidden || isHiddenInput) return NodeFilter.FILTER_SKIP;\n      return node.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n    }\n  });\n  while (walker.nextNode()) nodes.push(walker.currentNode);\n  return nodes;\n}\nfunction focusFirst(candidates) {\n  const previouslyFocusedElement = document.activeElement;\n  return candidates.some((candidate) => {\n    if (candidate === previouslyFocusedElement) return true;\n    candidate.focus();\n    return document.activeElement !== previouslyFocusedElement;\n  });\n}\nvar Provider = ToastProvider;\nvar Viewport = ToastViewport;\nvar Root2 = Toast;\nvar Title = ToastTitle;\nvar Description = ToastDescription;\nvar Action = ToastAction;\nvar Close = ToastClose;\nexport {\n  Action,\n  Close,\n  Description,\n  Provider,\n  Root2 as Root,\n  Title,\n  Toast,\n  ToastAction,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n  Viewport,\n  createToastScope\n};\n//# sourceMappingURL=@radix-ui_react-toast.js.map\n","size_bytes":27104},"node_modules/.vite/deps/@radix-ui_react-switch.js":{"content":"\"use client\";\nimport {\n  usePrevious\n} from \"./chunk-GBMYLVF3.js\";\nimport {\n  useSize\n} from \"./chunk-TGZA6QQB.js\";\nimport {\n  composeEventHandlers,\n  createContextScope,\n  useControllableState\n} from \"./chunk-KQC75CTR.js\";\nimport {\n  Primitive\n} from \"./chunk-UPK5WUJ5.js\";\nimport {\n  useComposedRefs\n} from \"./chunk-LJH5O6ZH.js\";\nimport \"./chunk-UPELNCPK.js\";\nimport {\n  require_jsx_runtime\n} from \"./chunk-WKPQ4ZTV.js\";\nimport {\n  require_react\n} from \"./chunk-BG45W2ER.js\";\nimport {\n  __toESM\n} from \"./chunk-HXA6O6EE.js\";\n\n// node_modules/@radix-ui/react-switch/dist/index.mjs\nvar React = __toESM(require_react(), 1);\nvar import_jsx_runtime = __toESM(require_jsx_runtime(), 1);\nvar SWITCH_NAME = \"Switch\";\nvar [createSwitchContext, createSwitchScope] = createContextScope(SWITCH_NAME);\nvar [SwitchProvider, useSwitchContext] = createSwitchContext(SWITCH_NAME);\nvar Switch = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeSwitch,\n      name,\n      checked: checkedProp,\n      defaultChecked,\n      required,\n      disabled,\n      value = \"on\",\n      onCheckedChange,\n      form,\n      ...switchProps\n    } = props;\n    const [button, setButton] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    const isFormControl = button ? form || !!button.closest(\"form\") : true;\n    const [checked = false, setChecked] = useControllableState({\n      prop: checkedProp,\n      defaultProp: defaultChecked,\n      onChange: onCheckedChange\n    });\n    return (0, import_jsx_runtime.jsxs)(SwitchProvider, { scope: __scopeSwitch, checked, disabled, children: [\n      (0, import_jsx_runtime.jsx)(\n        Primitive.button,\n        {\n          type: \"button\",\n          role: \"switch\",\n          \"aria-checked\": checked,\n          \"aria-required\": required,\n          \"data-state\": getState(checked),\n          \"data-disabled\": disabled ? \"\" : void 0,\n          disabled,\n          value,\n          ...switchProps,\n          ref: composedRefs,\n          onClick: composeEventHandlers(props.onClick, (event) => {\n            setChecked((prevChecked) => !prevChecked);\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })\n        }\n      ),\n      isFormControl && (0, import_jsx_runtime.jsx)(\n        BubbleInput,\n        {\n          control: button,\n          bubbles: !hasConsumerStoppedPropagationRef.current,\n          name,\n          value,\n          checked,\n          required,\n          disabled,\n          form,\n          style: { transform: \"translateX(-100%)\" }\n        }\n      )\n    ] });\n  }\n);\nSwitch.displayName = SWITCH_NAME;\nvar THUMB_NAME = \"SwitchThumb\";\nvar SwitchThumb = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSwitch, ...thumbProps } = props;\n    const context = useSwitchContext(THUMB_NAME, __scopeSwitch);\n    return (0, import_jsx_runtime.jsx)(\n      Primitive.span,\n      {\n        \"data-state\": getState(context.checked),\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...thumbProps,\n        ref: forwardedRef\n      }\n    );\n  }\n);\nSwitchThumb.displayName = THUMB_NAME;\nvar BubbleInput = (props) => {\n  const { control, checked, bubbles = true, ...inputProps } = props;\n  const ref = React.useRef(null);\n  const prevChecked = usePrevious(checked);\n  const controlSize = useSize(control);\n  React.useEffect(() => {\n    const input = ref.current;\n    const inputProto = window.HTMLInputElement.prototype;\n    const descriptor = Object.getOwnPropertyDescriptor(inputProto, \"checked\");\n    const setChecked = descriptor.set;\n    if (prevChecked !== checked && setChecked) {\n      const event = new Event(\"click\", { bubbles });\n      setChecked.call(input, checked);\n      input.dispatchEvent(event);\n    }\n  }, [prevChecked, checked, bubbles]);\n  return (0, import_jsx_runtime.jsx)(\n    \"input\",\n    {\n      type: \"checkbox\",\n      \"aria-hidden\": true,\n      defaultChecked: checked,\n      ...inputProps,\n      tabIndex: -1,\n      ref,\n      style: {\n        ...props.style,\n        ...controlSize,\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        opacity: 0,\n        margin: 0\n      }\n    }\n  );\n};\nfunction getState(checked) {\n  return checked ? \"checked\" : \"unchecked\";\n}\nvar Root = Switch;\nvar Thumb = SwitchThumb;\nexport {\n  Root,\n  Switch,\n  SwitchThumb,\n  Thumb,\n  createSwitchScope\n};\n//# sourceMappingURL=@radix-ui_react-switch.js.map\n","size_bytes":4645},"node_modules/.vite/deps/@radix-ui_react-label.js":{"content":"\"use client\";\nimport {\n  Primitive\n} from \"./chunk-UPK5WUJ5.js\";\nimport \"./chunk-LJH5O6ZH.js\";\nimport \"./chunk-UPELNCPK.js\";\nimport {\n  require_jsx_runtime\n} from \"./chunk-WKPQ4ZTV.js\";\nimport {\n  require_react\n} from \"./chunk-BG45W2ER.js\";\nimport {\n  __toESM\n} from \"./chunk-HXA6O6EE.js\";\n\n// node_modules/@radix-ui/react-label/dist/index.mjs\nvar React = __toESM(require_react(), 1);\nvar import_jsx_runtime = __toESM(require_jsx_runtime(), 1);\nvar NAME = \"Label\";\nvar Label = React.forwardRef((props, forwardedRef) => {\n  return (0, import_jsx_runtime.jsx)(\n    Primitive.label,\n    {\n      ...props,\n      ref: forwardedRef,\n      onMouseDown: (event) => {\n        var _a;\n        const target = event.target;\n        if (target.closest(\"button, input, select, textarea\")) return;\n        (_a = props.onMouseDown) == null ? void 0 : _a.call(props, event);\n        if (!event.defaultPrevented && event.detail > 1) event.preventDefault();\n      }\n    }\n  );\n});\nLabel.displayName = NAME;\nvar Root = Label;\nexport {\n  Label,\n  Root\n};\n//# sourceMappingURL=@radix-ui_react-label.js.map\n","size_bytes":1084},"node_modules/.vite/deps/@radix-ui_react-select.js":{"content":"\"use client\";\nimport {\n  usePrevious\n} from \"./chunk-GBMYLVF3.js\";\nimport {\n  useDirection\n} from \"./chunk-OW74AC7Q.js\";\nimport {\n  createCollection\n} from \"./chunk-OG4DZOYC.js\";\nimport {\n  Anchor,\n  Arrow,\n  Content,\n  Root2,\n  createPopperScope\n} from \"./chunk-2MQNN5E6.js\";\nimport \"./chunk-TGZA6QQB.js\";\nimport {\n  VisuallyHidden\n} from \"./chunk-RRMGE3QL.js\";\nimport {\n  Combination_default,\n  FocusScope,\n  hideOthers,\n  useFocusGuards\n} from \"./chunk-SPW4NC5B.js\";\nimport {\n  useId\n} from \"./chunk-JNX36Q56.js\";\nimport {\n  DismissableLayer,\n  Portal\n} from \"./chunk-ZD6YADYP.js\";\nimport {\n  composeEventHandlers,\n  createContextScope,\n  useCallbackRef,\n  useControllableState,\n  useLayoutEffect2\n} from \"./chunk-KQC75CTR.js\";\nimport {\n  Primitive\n} from \"./chunk-UPK5WUJ5.js\";\nimport {\n  createSlot,\n  useComposedRefs\n} from \"./chunk-LJH5O6ZH.js\";\nimport {\n  require_react_dom\n} from \"./chunk-UPELNCPK.js\";\nimport {\n  require_jsx_runtime\n} from \"./chunk-WKPQ4ZTV.js\";\nimport {\n  require_react\n} from \"./chunk-BG45W2ER.js\";\nimport {\n  __toESM\n} from \"./chunk-HXA6O6EE.js\";\n\n// node_modules/@radix-ui/react-select/dist/index.mjs\nvar React = __toESM(require_react(), 1);\nvar ReactDOM = __toESM(require_react_dom(), 1);\n\n// node_modules/@radix-ui/number/dist/index.mjs\nfunction clamp(value, [min, max]) {\n  return Math.min(max, Math.max(min, value));\n}\n\n// node_modules/@radix-ui/react-select/dist/index.mjs\nvar import_jsx_runtime = __toESM(require_jsx_runtime(), 1);\nvar OPEN_KEYS = [\" \", \"Enter\", \"ArrowUp\", \"ArrowDown\"];\nvar SELECTION_KEYS = [\" \", \"Enter\"];\nvar SELECT_NAME = \"Select\";\nvar [Collection, useCollection, createCollectionScope] = createCollection(SELECT_NAME);\nvar [createSelectContext, createSelectScope] = createContextScope(SELECT_NAME, [\n  createCollectionScope,\n  createPopperScope\n]);\nvar usePopperScope = createPopperScope();\nvar [SelectProvider, useSelectContext] = createSelectContext(SELECT_NAME);\nvar [SelectNativeOptionsProvider, useSelectNativeOptionsContext] = createSelectContext(SELECT_NAME);\nvar Select = (props) => {\n  const {\n    __scopeSelect,\n    children,\n    open: openProp,\n    defaultOpen,\n    onOpenChange,\n    value: valueProp,\n    defaultValue,\n    onValueChange,\n    dir,\n    name,\n    autoComplete,\n    disabled,\n    required,\n    form\n  } = props;\n  const popperScope = usePopperScope(__scopeSelect);\n  const [trigger, setTrigger] = React.useState(null);\n  const [valueNode, setValueNode] = React.useState(null);\n  const [valueNodeHasChildren, setValueNodeHasChildren] = React.useState(false);\n  const direction = useDirection(dir);\n  const [open = false, setOpen] = useControllableState({\n    prop: openProp,\n    defaultProp: defaultOpen,\n    onChange: onOpenChange\n  });\n  const [value, setValue] = useControllableState({\n    prop: valueProp,\n    defaultProp: defaultValue,\n    onChange: onValueChange\n  });\n  const triggerPointerDownPosRef = React.useRef(null);\n  const isFormControl = trigger ? form || !!trigger.closest(\"form\") : true;\n  const [nativeOptionsSet, setNativeOptionsSet] = React.useState(/* @__PURE__ */ new Set());\n  const nativeSelectKey = Array.from(nativeOptionsSet).map((option) => option.props.value).join(\";\");\n  return (0, import_jsx_runtime.jsx)(Root2, { ...popperScope, children: (0, import_jsx_runtime.jsxs)(\n    SelectProvider,\n    {\n      required,\n      scope: __scopeSelect,\n      trigger,\n      onTriggerChange: setTrigger,\n      valueNode,\n      onValueNodeChange: setValueNode,\n      valueNodeHasChildren,\n      onValueNodeHasChildrenChange: setValueNodeHasChildren,\n      contentId: useId(),\n      value,\n      onValueChange: setValue,\n      open,\n      onOpenChange: setOpen,\n      dir: direction,\n      triggerPointerDownPosRef,\n      disabled,\n      children: [\n        (0, import_jsx_runtime.jsx)(Collection.Provider, { scope: __scopeSelect, children: (0, import_jsx_runtime.jsx)(\n          SelectNativeOptionsProvider,\n          {\n            scope: props.__scopeSelect,\n            onNativeOptionAdd: React.useCallback((option) => {\n              setNativeOptionsSet((prev) => new Set(prev).add(option));\n            }, []),\n            onNativeOptionRemove: React.useCallback((option) => {\n              setNativeOptionsSet((prev) => {\n                const optionsSet = new Set(prev);\n                optionsSet.delete(option);\n                return optionsSet;\n              });\n            }, []),\n            children\n          }\n        ) }),\n        isFormControl ? (0, import_jsx_runtime.jsxs)(\n          BubbleSelect,\n          {\n            \"aria-hidden\": true,\n            required,\n            tabIndex: -1,\n            name,\n            autoComplete,\n            value,\n            onChange: (event) => setValue(event.target.value),\n            disabled,\n            form,\n            children: [\n              value === void 0 ? (0, import_jsx_runtime.jsx)(\"option\", { value: \"\" }) : null,\n              Array.from(nativeOptionsSet)\n            ]\n          },\n          nativeSelectKey\n        ) : null\n      ]\n    }\n  ) });\n};\nSelect.displayName = SELECT_NAME;\nvar TRIGGER_NAME = \"SelectTrigger\";\nvar SelectTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, disabled = false, ...triggerProps } = props;\n    const popperScope = usePopperScope(__scopeSelect);\n    const context = useSelectContext(TRIGGER_NAME, __scopeSelect);\n    const isDisabled = context.disabled || disabled;\n    const composedRefs = useComposedRefs(forwardedRef, context.onTriggerChange);\n    const getItems = useCollection(__scopeSelect);\n    const pointerTypeRef = React.useRef(\"touch\");\n    const [searchRef, handleTypeaheadSearch, resetTypeahead] = useTypeaheadSearch((search) => {\n      const enabledItems = getItems().filter((item) => !item.disabled);\n      const currentItem = enabledItems.find((item) => item.value === context.value);\n      const nextItem = findNextItem(enabledItems, search, currentItem);\n      if (nextItem !== void 0) {\n        context.onValueChange(nextItem.value);\n      }\n    });\n    const handleOpen = (pointerEvent) => {\n      if (!isDisabled) {\n        context.onOpenChange(true);\n        resetTypeahead();\n      }\n      if (pointerEvent) {\n        context.triggerPointerDownPosRef.current = {\n          x: Math.round(pointerEvent.pageX),\n          y: Math.round(pointerEvent.pageY)\n        };\n      }\n    };\n    return (0, import_jsx_runtime.jsx)(Anchor, { asChild: true, ...popperScope, children: (0, import_jsx_runtime.jsx)(\n      Primitive.button,\n      {\n        type: \"button\",\n        role: \"combobox\",\n        \"aria-controls\": context.contentId,\n        \"aria-expanded\": context.open,\n        \"aria-required\": context.required,\n        \"aria-autocomplete\": \"none\",\n        dir: context.dir,\n        \"data-state\": context.open ? \"open\" : \"closed\",\n        disabled: isDisabled,\n        \"data-disabled\": isDisabled ? \"\" : void 0,\n        \"data-placeholder\": shouldShowPlaceholder(context.value) ? \"\" : void 0,\n        ...triggerProps,\n        ref: composedRefs,\n        onClick: composeEventHandlers(triggerProps.onClick, (event) => {\n          event.currentTarget.focus();\n          if (pointerTypeRef.current !== \"mouse\") {\n            handleOpen(event);\n          }\n        }),\n        onPointerDown: composeEventHandlers(triggerProps.onPointerDown, (event) => {\n          pointerTypeRef.current = event.pointerType;\n          const target = event.target;\n          if (target.hasPointerCapture(event.pointerId)) {\n            target.releasePointerCapture(event.pointerId);\n          }\n          if (event.button === 0 && event.ctrlKey === false && event.pointerType === \"mouse\") {\n            handleOpen(event);\n            event.preventDefault();\n          }\n        }),\n        onKeyDown: composeEventHandlers(triggerProps.onKeyDown, (event) => {\n          const isTypingAhead = searchRef.current !== \"\";\n          const isModifierKey = event.ctrlKey || event.altKey || event.metaKey;\n          if (!isModifierKey && event.key.length === 1) handleTypeaheadSearch(event.key);\n          if (isTypingAhead && event.key === \" \") return;\n          if (OPEN_KEYS.includes(event.key)) {\n            handleOpen();\n            event.preventDefault();\n          }\n        })\n      }\n    ) });\n  }\n);\nSelectTrigger.displayName = TRIGGER_NAME;\nvar VALUE_NAME = \"SelectValue\";\nvar SelectValue = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, className, style, children, placeholder = \"\", ...valueProps } = props;\n    const context = useSelectContext(VALUE_NAME, __scopeSelect);\n    const { onValueNodeHasChildrenChange } = context;\n    const hasChildren = children !== void 0;\n    const composedRefs = useComposedRefs(forwardedRef, context.onValueNodeChange);\n    useLayoutEffect2(() => {\n      onValueNodeHasChildrenChange(hasChildren);\n    }, [onValueNodeHasChildrenChange, hasChildren]);\n    return (0, import_jsx_runtime.jsx)(\n      Primitive.span,\n      {\n        ...valueProps,\n        ref: composedRefs,\n        style: { pointerEvents: \"none\" },\n        children: shouldShowPlaceholder(context.value) ? (0, import_jsx_runtime.jsx)(import_jsx_runtime.Fragment, { children: placeholder }) : children\n      }\n    );\n  }\n);\nSelectValue.displayName = VALUE_NAME;\nvar ICON_NAME = \"SelectIcon\";\nvar SelectIcon = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, children, ...iconProps } = props;\n    return (0, import_jsx_runtime.jsx)(Primitive.span, { \"aria-hidden\": true, ...iconProps, ref: forwardedRef, children: children || \"â–¼\" });\n  }\n);\nSelectIcon.displayName = ICON_NAME;\nvar PORTAL_NAME = \"SelectPortal\";\nvar SelectPortal = (props) => {\n  return (0, import_jsx_runtime.jsx)(Portal, { asChild: true, ...props });\n};\nSelectPortal.displayName = PORTAL_NAME;\nvar CONTENT_NAME = \"SelectContent\";\nvar SelectContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const context = useSelectContext(CONTENT_NAME, props.__scopeSelect);\n    const [fragment, setFragment] = React.useState();\n    useLayoutEffect2(() => {\n      setFragment(new DocumentFragment());\n    }, []);\n    if (!context.open) {\n      const frag = fragment;\n      return frag ? ReactDOM.createPortal(\n        (0, import_jsx_runtime.jsx)(SelectContentProvider, { scope: props.__scopeSelect, children: (0, import_jsx_runtime.jsx)(Collection.Slot, { scope: props.__scopeSelect, children: (0, import_jsx_runtime.jsx)(\"div\", { children: props.children }) }) }),\n        frag\n      ) : null;\n    }\n    return (0, import_jsx_runtime.jsx)(SelectContentImpl, { ...props, ref: forwardedRef });\n  }\n);\nSelectContent.displayName = CONTENT_NAME;\nvar CONTENT_MARGIN = 10;\nvar [SelectContentProvider, useSelectContentContext] = createSelectContext(CONTENT_NAME);\nvar CONTENT_IMPL_NAME = \"SelectContentImpl\";\nvar Slot = createSlot(\"SelectContent.RemoveScroll\");\nvar SelectContentImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeSelect,\n      position = \"item-aligned\",\n      onCloseAutoFocus,\n      onEscapeKeyDown,\n      onPointerDownOutside,\n      //\n      // PopperContent props\n      side,\n      sideOffset,\n      align,\n      alignOffset,\n      arrowPadding,\n      collisionBoundary,\n      collisionPadding,\n      sticky,\n      hideWhenDetached,\n      avoidCollisions,\n      //\n      ...contentProps\n    } = props;\n    const context = useSelectContext(CONTENT_NAME, __scopeSelect);\n    const [content, setContent] = React.useState(null);\n    const [viewport, setViewport] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setContent(node));\n    const [selectedItem, setSelectedItem] = React.useState(null);\n    const [selectedItemText, setSelectedItemText] = React.useState(\n      null\n    );\n    const getItems = useCollection(__scopeSelect);\n    const [isPositioned, setIsPositioned] = React.useState(false);\n    const firstValidItemFoundRef = React.useRef(false);\n    React.useEffect(() => {\n      if (content) return hideOthers(content);\n    }, [content]);\n    useFocusGuards();\n    const focusFirst = React.useCallback(\n      (candidates) => {\n        const [firstItem, ...restItems] = getItems().map((item) => item.ref.current);\n        const [lastItem] = restItems.slice(-1);\n        const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;\n        for (const candidate of candidates) {\n          if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;\n          candidate == null ? void 0 : candidate.scrollIntoView({ block: \"nearest\" });\n          if (candidate === firstItem && viewport) viewport.scrollTop = 0;\n          if (candidate === lastItem && viewport) viewport.scrollTop = viewport.scrollHeight;\n          candidate == null ? void 0 : candidate.focus();\n          if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;\n        }\n      },\n      [getItems, viewport]\n    );\n    const focusSelectedItem = React.useCallback(\n      () => focusFirst([selectedItem, content]),\n      [focusFirst, selectedItem, content]\n    );\n    React.useEffect(() => {\n      if (isPositioned) {\n        focusSelectedItem();\n      }\n    }, [isPositioned, focusSelectedItem]);\n    const { onOpenChange, triggerPointerDownPosRef } = context;\n    React.useEffect(() => {\n      if (content) {\n        let pointerMoveDelta = { x: 0, y: 0 };\n        const handlePointerMove = (event) => {\n          var _a, _b;\n          pointerMoveDelta = {\n            x: Math.abs(Math.round(event.pageX) - (((_a = triggerPointerDownPosRef.current) == null ? void 0 : _a.x) ?? 0)),\n            y: Math.abs(Math.round(event.pageY) - (((_b = triggerPointerDownPosRef.current) == null ? void 0 : _b.y) ?? 0))\n          };\n        };\n        const handlePointerUp = (event) => {\n          if (pointerMoveDelta.x <= 10 && pointerMoveDelta.y <= 10) {\n            event.preventDefault();\n          } else {\n            if (!content.contains(event.target)) {\n              onOpenChange(false);\n            }\n          }\n          document.removeEventListener(\"pointermove\", handlePointerMove);\n          triggerPointerDownPosRef.current = null;\n        };\n        if (triggerPointerDownPosRef.current !== null) {\n          document.addEventListener(\"pointermove\", handlePointerMove);\n          document.addEventListener(\"pointerup\", handlePointerUp, { capture: true, once: true });\n        }\n        return () => {\n          document.removeEventListener(\"pointermove\", handlePointerMove);\n          document.removeEventListener(\"pointerup\", handlePointerUp, { capture: true });\n        };\n      }\n    }, [content, onOpenChange, triggerPointerDownPosRef]);\n    React.useEffect(() => {\n      const close = () => onOpenChange(false);\n      window.addEventListener(\"blur\", close);\n      window.addEventListener(\"resize\", close);\n      return () => {\n        window.removeEventListener(\"blur\", close);\n        window.removeEventListener(\"resize\", close);\n      };\n    }, [onOpenChange]);\n    const [searchRef, handleTypeaheadSearch] = useTypeaheadSearch((search) => {\n      const enabledItems = getItems().filter((item) => !item.disabled);\n      const currentItem = enabledItems.find((item) => item.ref.current === document.activeElement);\n      const nextItem = findNextItem(enabledItems, search, currentItem);\n      if (nextItem) {\n        setTimeout(() => nextItem.ref.current.focus());\n      }\n    });\n    const itemRefCallback = React.useCallback(\n      (node, value, disabled) => {\n        const isFirstValidItem = !firstValidItemFoundRef.current && !disabled;\n        const isSelectedItem = context.value !== void 0 && context.value === value;\n        if (isSelectedItem || isFirstValidItem) {\n          setSelectedItem(node);\n          if (isFirstValidItem) firstValidItemFoundRef.current = true;\n        }\n      },\n      [context.value]\n    );\n    const handleItemLeave = React.useCallback(() => content == null ? void 0 : content.focus(), [content]);\n    const itemTextRefCallback = React.useCallback(\n      (node, value, disabled) => {\n        const isFirstValidItem = !firstValidItemFoundRef.current && !disabled;\n        const isSelectedItem = context.value !== void 0 && context.value === value;\n        if (isSelectedItem || isFirstValidItem) {\n          setSelectedItemText(node);\n        }\n      },\n      [context.value]\n    );\n    const SelectPosition = position === \"popper\" ? SelectPopperPosition : SelectItemAlignedPosition;\n    const popperContentProps = SelectPosition === SelectPopperPosition ? {\n      side,\n      sideOffset,\n      align,\n      alignOffset,\n      arrowPadding,\n      collisionBoundary,\n      collisionPadding,\n      sticky,\n      hideWhenDetached,\n      avoidCollisions\n    } : {};\n    return (0, import_jsx_runtime.jsx)(\n      SelectContentProvider,\n      {\n        scope: __scopeSelect,\n        content,\n        viewport,\n        onViewportChange: setViewport,\n        itemRefCallback,\n        selectedItem,\n        onItemLeave: handleItemLeave,\n        itemTextRefCallback,\n        focusSelectedItem,\n        selectedItemText,\n        position,\n        isPositioned,\n        searchRef,\n        children: (0, import_jsx_runtime.jsx)(Combination_default, { as: Slot, allowPinchZoom: true, children: (0, import_jsx_runtime.jsx)(\n          FocusScope,\n          {\n            asChild: true,\n            trapped: context.open,\n            onMountAutoFocus: (event) => {\n              event.preventDefault();\n            },\n            onUnmountAutoFocus: composeEventHandlers(onCloseAutoFocus, (event) => {\n              var _a;\n              (_a = context.trigger) == null ? void 0 : _a.focus({ preventScroll: true });\n              event.preventDefault();\n            }),\n            children: (0, import_jsx_runtime.jsx)(\n              DismissableLayer,\n              {\n                asChild: true,\n                disableOutsidePointerEvents: true,\n                onEscapeKeyDown,\n                onPointerDownOutside,\n                onFocusOutside: (event) => event.preventDefault(),\n                onDismiss: () => context.onOpenChange(false),\n                children: (0, import_jsx_runtime.jsx)(\n                  SelectPosition,\n                  {\n                    role: \"listbox\",\n                    id: context.contentId,\n                    \"data-state\": context.open ? \"open\" : \"closed\",\n                    dir: context.dir,\n                    onContextMenu: (event) => event.preventDefault(),\n                    ...contentProps,\n                    ...popperContentProps,\n                    onPlaced: () => setIsPositioned(true),\n                    ref: composedRefs,\n                    style: {\n                      // flex layout so we can place the scroll buttons properly\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                      // reset the outline by default as the content MAY get focused\n                      outline: \"none\",\n                      ...contentProps.style\n                    },\n                    onKeyDown: composeEventHandlers(contentProps.onKeyDown, (event) => {\n                      const isModifierKey = event.ctrlKey || event.altKey || event.metaKey;\n                      if (event.key === \"Tab\") event.preventDefault();\n                      if (!isModifierKey && event.key.length === 1) handleTypeaheadSearch(event.key);\n                      if ([\"ArrowUp\", \"ArrowDown\", \"Home\", \"End\"].includes(event.key)) {\n                        const items = getItems().filter((item) => !item.disabled);\n                        let candidateNodes = items.map((item) => item.ref.current);\n                        if ([\"ArrowUp\", \"End\"].includes(event.key)) {\n                          candidateNodes = candidateNodes.slice().reverse();\n                        }\n                        if ([\"ArrowUp\", \"ArrowDown\"].includes(event.key)) {\n                          const currentElement = event.target;\n                          const currentIndex = candidateNodes.indexOf(currentElement);\n                          candidateNodes = candidateNodes.slice(currentIndex + 1);\n                        }\n                        setTimeout(() => focusFirst(candidateNodes));\n                        event.preventDefault();\n                      }\n                    })\n                  }\n                )\n              }\n            )\n          }\n        ) })\n      }\n    );\n  }\n);\nSelectContentImpl.displayName = CONTENT_IMPL_NAME;\nvar ITEM_ALIGNED_POSITION_NAME = \"SelectItemAlignedPosition\";\nvar SelectItemAlignedPosition = React.forwardRef((props, forwardedRef) => {\n  const { __scopeSelect, onPlaced, ...popperProps } = props;\n  const context = useSelectContext(CONTENT_NAME, __scopeSelect);\n  const contentContext = useSelectContentContext(CONTENT_NAME, __scopeSelect);\n  const [contentWrapper, setContentWrapper] = React.useState(null);\n  const [content, setContent] = React.useState(null);\n  const composedRefs = useComposedRefs(forwardedRef, (node) => setContent(node));\n  const getItems = useCollection(__scopeSelect);\n  const shouldExpandOnScrollRef = React.useRef(false);\n  const shouldRepositionRef = React.useRef(true);\n  const { viewport, selectedItem, selectedItemText, focusSelectedItem } = contentContext;\n  const position = React.useCallback(() => {\n    if (context.trigger && context.valueNode && contentWrapper && content && viewport && selectedItem && selectedItemText) {\n      const triggerRect = context.trigger.getBoundingClientRect();\n      const contentRect = content.getBoundingClientRect();\n      const valueNodeRect = context.valueNode.getBoundingClientRect();\n      const itemTextRect = selectedItemText.getBoundingClientRect();\n      if (context.dir !== \"rtl\") {\n        const itemTextOffset = itemTextRect.left - contentRect.left;\n        const left = valueNodeRect.left - itemTextOffset;\n        const leftDelta = triggerRect.left - left;\n        const minContentWidth = triggerRect.width + leftDelta;\n        const contentWidth = Math.max(minContentWidth, contentRect.width);\n        const rightEdge = window.innerWidth - CONTENT_MARGIN;\n        const clampedLeft = clamp(left, [\n          CONTENT_MARGIN,\n          // Prevents the content from going off the starting edge of the\n          // viewport. It may still go off the ending edge, but this can be\n          // controlled by the user since they may want to manage overflow in a\n          // specific way.\n          // https://github.com/radix-ui/primitives/issues/2049\n          Math.max(CONTENT_MARGIN, rightEdge - contentWidth)\n        ]);\n        contentWrapper.style.minWidth = minContentWidth + \"px\";\n        contentWrapper.style.left = clampedLeft + \"px\";\n      } else {\n        const itemTextOffset = contentRect.right - itemTextRect.right;\n        const right = window.innerWidth - valueNodeRect.right - itemTextOffset;\n        const rightDelta = window.innerWidth - triggerRect.right - right;\n        const minContentWidth = triggerRect.width + rightDelta;\n        const contentWidth = Math.max(minContentWidth, contentRect.width);\n        const leftEdge = window.innerWidth - CONTENT_MARGIN;\n        const clampedRight = clamp(right, [\n          CONTENT_MARGIN,\n          Math.max(CONTENT_MARGIN, leftEdge - contentWidth)\n        ]);\n        contentWrapper.style.minWidth = minContentWidth + \"px\";\n        contentWrapper.style.right = clampedRight + \"px\";\n      }\n      const items = getItems();\n      const availableHeight = window.innerHeight - CONTENT_MARGIN * 2;\n      const itemsHeight = viewport.scrollHeight;\n      const contentStyles = window.getComputedStyle(content);\n      const contentBorderTopWidth = parseInt(contentStyles.borderTopWidth, 10);\n      const contentPaddingTop = parseInt(contentStyles.paddingTop, 10);\n      const contentBorderBottomWidth = parseInt(contentStyles.borderBottomWidth, 10);\n      const contentPaddingBottom = parseInt(contentStyles.paddingBottom, 10);\n      const fullContentHeight = contentBorderTopWidth + contentPaddingTop + itemsHeight + contentPaddingBottom + contentBorderBottomWidth;\n      const minContentHeight = Math.min(selectedItem.offsetHeight * 5, fullContentHeight);\n      const viewportStyles = window.getComputedStyle(viewport);\n      const viewportPaddingTop = parseInt(viewportStyles.paddingTop, 10);\n      const viewportPaddingBottom = parseInt(viewportStyles.paddingBottom, 10);\n      const topEdgeToTriggerMiddle = triggerRect.top + triggerRect.height / 2 - CONTENT_MARGIN;\n      const triggerMiddleToBottomEdge = availableHeight - topEdgeToTriggerMiddle;\n      const selectedItemHalfHeight = selectedItem.offsetHeight / 2;\n      const itemOffsetMiddle = selectedItem.offsetTop + selectedItemHalfHeight;\n      const contentTopToItemMiddle = contentBorderTopWidth + contentPaddingTop + itemOffsetMiddle;\n      const itemMiddleToContentBottom = fullContentHeight - contentTopToItemMiddle;\n      const willAlignWithoutTopOverflow = contentTopToItemMiddle <= topEdgeToTriggerMiddle;\n      if (willAlignWithoutTopOverflow) {\n        const isLastItem = items.length > 0 && selectedItem === items[items.length - 1].ref.current;\n        contentWrapper.style.bottom = \"0px\";\n        const viewportOffsetBottom = content.clientHeight - viewport.offsetTop - viewport.offsetHeight;\n        const clampedTriggerMiddleToBottomEdge = Math.max(\n          triggerMiddleToBottomEdge,\n          selectedItemHalfHeight + // viewport might have padding bottom, include it to avoid a scrollable viewport\n          (isLastItem ? viewportPaddingBottom : 0) + viewportOffsetBottom + contentBorderBottomWidth\n        );\n        const height = contentTopToItemMiddle + clampedTriggerMiddleToBottomEdge;\n        contentWrapper.style.height = height + \"px\";\n      } else {\n        const isFirstItem = items.length > 0 && selectedItem === items[0].ref.current;\n        contentWrapper.style.top = \"0px\";\n        const clampedTopEdgeToTriggerMiddle = Math.max(\n          topEdgeToTriggerMiddle,\n          contentBorderTopWidth + viewport.offsetTop + // viewport might have padding top, include it to avoid a scrollable viewport\n          (isFirstItem ? viewportPaddingTop : 0) + selectedItemHalfHeight\n        );\n        const height = clampedTopEdgeToTriggerMiddle + itemMiddleToContentBottom;\n        contentWrapper.style.height = height + \"px\";\n        viewport.scrollTop = contentTopToItemMiddle - topEdgeToTriggerMiddle + viewport.offsetTop;\n      }\n      contentWrapper.style.margin = `${CONTENT_MARGIN}px 0`;\n      contentWrapper.style.minHeight = minContentHeight + \"px\";\n      contentWrapper.style.maxHeight = availableHeight + \"px\";\n      onPlaced == null ? void 0 : onPlaced();\n      requestAnimationFrame(() => shouldExpandOnScrollRef.current = true);\n    }\n  }, [\n    getItems,\n    context.trigger,\n    context.valueNode,\n    contentWrapper,\n    content,\n    viewport,\n    selectedItem,\n    selectedItemText,\n    context.dir,\n    onPlaced\n  ]);\n  useLayoutEffect2(() => position(), [position]);\n  const [contentZIndex, setContentZIndex] = React.useState();\n  useLayoutEffect2(() => {\n    if (content) setContentZIndex(window.getComputedStyle(content).zIndex);\n  }, [content]);\n  const handleScrollButtonChange = React.useCallback(\n    (node) => {\n      if (node && shouldRepositionRef.current === true) {\n        position();\n        focusSelectedItem == null ? void 0 : focusSelectedItem();\n        shouldRepositionRef.current = false;\n      }\n    },\n    [position, focusSelectedItem]\n  );\n  return (0, import_jsx_runtime.jsx)(\n    SelectViewportProvider,\n    {\n      scope: __scopeSelect,\n      contentWrapper,\n      shouldExpandOnScrollRef,\n      onScrollButtonChange: handleScrollButtonChange,\n      children: (0, import_jsx_runtime.jsx)(\n        \"div\",\n        {\n          ref: setContentWrapper,\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            position: \"fixed\",\n            zIndex: contentZIndex\n          },\n          children: (0, import_jsx_runtime.jsx)(\n            Primitive.div,\n            {\n              ...popperProps,\n              ref: composedRefs,\n              style: {\n                // When we get the height of the content, it includes borders. If we were to set\n                // the height without having `boxSizing: 'border-box'` it would be too big.\n                boxSizing: \"border-box\",\n                // We need to ensure the content doesn't get taller than the wrapper\n                maxHeight: \"100%\",\n                ...popperProps.style\n              }\n            }\n          )\n        }\n      )\n    }\n  );\n});\nSelectItemAlignedPosition.displayName = ITEM_ALIGNED_POSITION_NAME;\nvar POPPER_POSITION_NAME = \"SelectPopperPosition\";\nvar SelectPopperPosition = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeSelect,\n    align = \"start\",\n    collisionPadding = CONTENT_MARGIN,\n    ...popperProps\n  } = props;\n  const popperScope = usePopperScope(__scopeSelect);\n  return (0, import_jsx_runtime.jsx)(\n    Content,\n    {\n      ...popperScope,\n      ...popperProps,\n      ref: forwardedRef,\n      align,\n      collisionPadding,\n      style: {\n        // Ensure border-box for floating-ui calculations\n        boxSizing: \"border-box\",\n        ...popperProps.style,\n        // re-namespace exposed content custom properties\n        ...{\n          \"--radix-select-content-transform-origin\": \"var(--radix-popper-transform-origin)\",\n          \"--radix-select-content-available-width\": \"var(--radix-popper-available-width)\",\n          \"--radix-select-content-available-height\": \"var(--radix-popper-available-height)\",\n          \"--radix-select-trigger-width\": \"var(--radix-popper-anchor-width)\",\n          \"--radix-select-trigger-height\": \"var(--radix-popper-anchor-height)\"\n        }\n      }\n    }\n  );\n});\nSelectPopperPosition.displayName = POPPER_POSITION_NAME;\nvar [SelectViewportProvider, useSelectViewportContext] = createSelectContext(CONTENT_NAME, {});\nvar VIEWPORT_NAME = \"SelectViewport\";\nvar SelectViewport = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, nonce, ...viewportProps } = props;\n    const contentContext = useSelectContentContext(VIEWPORT_NAME, __scopeSelect);\n    const viewportContext = useSelectViewportContext(VIEWPORT_NAME, __scopeSelect);\n    const composedRefs = useComposedRefs(forwardedRef, contentContext.onViewportChange);\n    const prevScrollTopRef = React.useRef(0);\n    return (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [\n      (0, import_jsx_runtime.jsx)(\n        \"style\",\n        {\n          dangerouslySetInnerHTML: {\n            __html: `[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}`\n          },\n          nonce\n        }\n      ),\n      (0, import_jsx_runtime.jsx)(Collection.Slot, { scope: __scopeSelect, children: (0, import_jsx_runtime.jsx)(\n        Primitive.div,\n        {\n          \"data-radix-select-viewport\": \"\",\n          role: \"presentation\",\n          ...viewportProps,\n          ref: composedRefs,\n          style: {\n            // we use position: 'relative' here on the `viewport` so that when we call\n            // `selectedItem.offsetTop` in calculations, the offset is relative to the viewport\n            // (independent of the scrollUpButton).\n            position: \"relative\",\n            flex: 1,\n            // Viewport should only be scrollable in the vertical direction.\n            // This won't work in vertical writing modes, so we'll need to\n            // revisit this if/when that is supported\n            // https://developer.chrome.com/blog/vertical-form-controls\n            overflow: \"hidden auto\",\n            ...viewportProps.style\n          },\n          onScroll: composeEventHandlers(viewportProps.onScroll, (event) => {\n            const viewport = event.currentTarget;\n            const { contentWrapper, shouldExpandOnScrollRef } = viewportContext;\n            if ((shouldExpandOnScrollRef == null ? void 0 : shouldExpandOnScrollRef.current) && contentWrapper) {\n              const scrolledBy = Math.abs(prevScrollTopRef.current - viewport.scrollTop);\n              if (scrolledBy > 0) {\n                const availableHeight = window.innerHeight - CONTENT_MARGIN * 2;\n                const cssMinHeight = parseFloat(contentWrapper.style.minHeight);\n                const cssHeight = parseFloat(contentWrapper.style.height);\n                const prevHeight = Math.max(cssMinHeight, cssHeight);\n                if (prevHeight < availableHeight) {\n                  const nextHeight = prevHeight + scrolledBy;\n                  const clampedNextHeight = Math.min(availableHeight, nextHeight);\n                  const heightDiff = nextHeight - clampedNextHeight;\n                  contentWrapper.style.height = clampedNextHeight + \"px\";\n                  if (contentWrapper.style.bottom === \"0px\") {\n                    viewport.scrollTop = heightDiff > 0 ? heightDiff : 0;\n                    contentWrapper.style.justifyContent = \"flex-end\";\n                  }\n                }\n              }\n            }\n            prevScrollTopRef.current = viewport.scrollTop;\n          })\n        }\n      ) })\n    ] });\n  }\n);\nSelectViewport.displayName = VIEWPORT_NAME;\nvar GROUP_NAME = \"SelectGroup\";\nvar [SelectGroupContextProvider, useSelectGroupContext] = createSelectContext(GROUP_NAME);\nvar SelectGroup = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, ...groupProps } = props;\n    const groupId = useId();\n    return (0, import_jsx_runtime.jsx)(SelectGroupContextProvider, { scope: __scopeSelect, id: groupId, children: (0, import_jsx_runtime.jsx)(Primitive.div, { role: \"group\", \"aria-labelledby\": groupId, ...groupProps, ref: forwardedRef }) });\n  }\n);\nSelectGroup.displayName = GROUP_NAME;\nvar LABEL_NAME = \"SelectLabel\";\nvar SelectLabel = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, ...labelProps } = props;\n    const groupContext = useSelectGroupContext(LABEL_NAME, __scopeSelect);\n    return (0, import_jsx_runtime.jsx)(Primitive.div, { id: groupContext.id, ...labelProps, ref: forwardedRef });\n  }\n);\nSelectLabel.displayName = LABEL_NAME;\nvar ITEM_NAME = \"SelectItem\";\nvar [SelectItemContextProvider, useSelectItemContext] = createSelectContext(ITEM_NAME);\nvar SelectItem = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeSelect,\n      value,\n      disabled = false,\n      textValue: textValueProp,\n      ...itemProps\n    } = props;\n    const context = useSelectContext(ITEM_NAME, __scopeSelect);\n    const contentContext = useSelectContentContext(ITEM_NAME, __scopeSelect);\n    const isSelected = context.value === value;\n    const [textValue, setTextValue] = React.useState(textValueProp ?? \"\");\n    const [isFocused, setIsFocused] = React.useState(false);\n    const composedRefs = useComposedRefs(\n      forwardedRef,\n      (node) => {\n        var _a;\n        return (_a = contentContext.itemRefCallback) == null ? void 0 : _a.call(contentContext, node, value, disabled);\n      }\n    );\n    const textId = useId();\n    const pointerTypeRef = React.useRef(\"touch\");\n    const handleSelect = () => {\n      if (!disabled) {\n        context.onValueChange(value);\n        context.onOpenChange(false);\n      }\n    };\n    if (value === \"\") {\n      throw new Error(\n        \"A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.\"\n      );\n    }\n    return (0, import_jsx_runtime.jsx)(\n      SelectItemContextProvider,\n      {\n        scope: __scopeSelect,\n        value,\n        disabled,\n        textId,\n        isSelected,\n        onItemTextChange: React.useCallback((node) => {\n          setTextValue((prevTextValue) => prevTextValue || ((node == null ? void 0 : node.textContent) ?? \"\").trim());\n        }, []),\n        children: (0, import_jsx_runtime.jsx)(\n          Collection.ItemSlot,\n          {\n            scope: __scopeSelect,\n            value,\n            disabled,\n            textValue,\n            children: (0, import_jsx_runtime.jsx)(\n              Primitive.div,\n              {\n                role: \"option\",\n                \"aria-labelledby\": textId,\n                \"data-highlighted\": isFocused ? \"\" : void 0,\n                \"aria-selected\": isSelected && isFocused,\n                \"data-state\": isSelected ? \"checked\" : \"unchecked\",\n                \"aria-disabled\": disabled || void 0,\n                \"data-disabled\": disabled ? \"\" : void 0,\n                tabIndex: disabled ? void 0 : -1,\n                ...itemProps,\n                ref: composedRefs,\n                onFocus: composeEventHandlers(itemProps.onFocus, () => setIsFocused(true)),\n                onBlur: composeEventHandlers(itemProps.onBlur, () => setIsFocused(false)),\n                onClick: composeEventHandlers(itemProps.onClick, () => {\n                  if (pointerTypeRef.current !== \"mouse\") handleSelect();\n                }),\n                onPointerUp: composeEventHandlers(itemProps.onPointerUp, () => {\n                  if (pointerTypeRef.current === \"mouse\") handleSelect();\n                }),\n                onPointerDown: composeEventHandlers(itemProps.onPointerDown, (event) => {\n                  pointerTypeRef.current = event.pointerType;\n                }),\n                onPointerMove: composeEventHandlers(itemProps.onPointerMove, (event) => {\n                  var _a;\n                  pointerTypeRef.current = event.pointerType;\n                  if (disabled) {\n                    (_a = contentContext.onItemLeave) == null ? void 0 : _a.call(contentContext);\n                  } else if (pointerTypeRef.current === \"mouse\") {\n                    event.currentTarget.focus({ preventScroll: true });\n                  }\n                }),\n                onPointerLeave: composeEventHandlers(itemProps.onPointerLeave, (event) => {\n                  var _a;\n                  if (event.currentTarget === document.activeElement) {\n                    (_a = contentContext.onItemLeave) == null ? void 0 : _a.call(contentContext);\n                  }\n                }),\n                onKeyDown: composeEventHandlers(itemProps.onKeyDown, (event) => {\n                  var _a;\n                  const isTypingAhead = ((_a = contentContext.searchRef) == null ? void 0 : _a.current) !== \"\";\n                  if (isTypingAhead && event.key === \" \") return;\n                  if (SELECTION_KEYS.includes(event.key)) handleSelect();\n                  if (event.key === \" \") event.preventDefault();\n                })\n              }\n            )\n          }\n        )\n      }\n    );\n  }\n);\nSelectItem.displayName = ITEM_NAME;\nvar ITEM_TEXT_NAME = \"SelectItemText\";\nvar SelectItemText = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, className, style, ...itemTextProps } = props;\n    const context = useSelectContext(ITEM_TEXT_NAME, __scopeSelect);\n    const contentContext = useSelectContentContext(ITEM_TEXT_NAME, __scopeSelect);\n    const itemContext = useSelectItemContext(ITEM_TEXT_NAME, __scopeSelect);\n    const nativeOptionsContext = useSelectNativeOptionsContext(ITEM_TEXT_NAME, __scopeSelect);\n    const [itemTextNode, setItemTextNode] = React.useState(null);\n    const composedRefs = useComposedRefs(\n      forwardedRef,\n      (node) => setItemTextNode(node),\n      itemContext.onItemTextChange,\n      (node) => {\n        var _a;\n        return (_a = contentContext.itemTextRefCallback) == null ? void 0 : _a.call(contentContext, node, itemContext.value, itemContext.disabled);\n      }\n    );\n    const textContent = itemTextNode == null ? void 0 : itemTextNode.textContent;\n    const nativeOption = React.useMemo(\n      () => (0, import_jsx_runtime.jsx)(\"option\", { value: itemContext.value, disabled: itemContext.disabled, children: textContent }, itemContext.value),\n      [itemContext.disabled, itemContext.value, textContent]\n    );\n    const { onNativeOptionAdd, onNativeOptionRemove } = nativeOptionsContext;\n    useLayoutEffect2(() => {\n      onNativeOptionAdd(nativeOption);\n      return () => onNativeOptionRemove(nativeOption);\n    }, [onNativeOptionAdd, onNativeOptionRemove, nativeOption]);\n    return (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [\n      (0, import_jsx_runtime.jsx)(Primitive.span, { id: itemContext.textId, ...itemTextProps, ref: composedRefs }),\n      itemContext.isSelected && context.valueNode && !context.valueNodeHasChildren ? ReactDOM.createPortal(itemTextProps.children, context.valueNode) : null\n    ] });\n  }\n);\nSelectItemText.displayName = ITEM_TEXT_NAME;\nvar ITEM_INDICATOR_NAME = \"SelectItemIndicator\";\nvar SelectItemIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, ...itemIndicatorProps } = props;\n    const itemContext = useSelectItemContext(ITEM_INDICATOR_NAME, __scopeSelect);\n    return itemContext.isSelected ? (0, import_jsx_runtime.jsx)(Primitive.span, { \"aria-hidden\": true, ...itemIndicatorProps, ref: forwardedRef }) : null;\n  }\n);\nSelectItemIndicator.displayName = ITEM_INDICATOR_NAME;\nvar SCROLL_UP_BUTTON_NAME = \"SelectScrollUpButton\";\nvar SelectScrollUpButton = React.forwardRef((props, forwardedRef) => {\n  const contentContext = useSelectContentContext(SCROLL_UP_BUTTON_NAME, props.__scopeSelect);\n  const viewportContext = useSelectViewportContext(SCROLL_UP_BUTTON_NAME, props.__scopeSelect);\n  const [canScrollUp, setCanScrollUp] = React.useState(false);\n  const composedRefs = useComposedRefs(forwardedRef, viewportContext.onScrollButtonChange);\n  useLayoutEffect2(() => {\n    if (contentContext.viewport && contentContext.isPositioned) {\n      let handleScroll2 = function() {\n        const canScrollUp2 = viewport.scrollTop > 0;\n        setCanScrollUp(canScrollUp2);\n      };\n      var handleScroll = handleScroll2;\n      const viewport = contentContext.viewport;\n      handleScroll2();\n      viewport.addEventListener(\"scroll\", handleScroll2);\n      return () => viewport.removeEventListener(\"scroll\", handleScroll2);\n    }\n  }, [contentContext.viewport, contentContext.isPositioned]);\n  return canScrollUp ? (0, import_jsx_runtime.jsx)(\n    SelectScrollButtonImpl,\n    {\n      ...props,\n      ref: composedRefs,\n      onAutoScroll: () => {\n        const { viewport, selectedItem } = contentContext;\n        if (viewport && selectedItem) {\n          viewport.scrollTop = viewport.scrollTop - selectedItem.offsetHeight;\n        }\n      }\n    }\n  ) : null;\n});\nSelectScrollUpButton.displayName = SCROLL_UP_BUTTON_NAME;\nvar SCROLL_DOWN_BUTTON_NAME = \"SelectScrollDownButton\";\nvar SelectScrollDownButton = React.forwardRef((props, forwardedRef) => {\n  const contentContext = useSelectContentContext(SCROLL_DOWN_BUTTON_NAME, props.__scopeSelect);\n  const viewportContext = useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME, props.__scopeSelect);\n  const [canScrollDown, setCanScrollDown] = React.useState(false);\n  const composedRefs = useComposedRefs(forwardedRef, viewportContext.onScrollButtonChange);\n  useLayoutEffect2(() => {\n    if (contentContext.viewport && contentContext.isPositioned) {\n      let handleScroll2 = function() {\n        const maxScroll = viewport.scrollHeight - viewport.clientHeight;\n        const canScrollDown2 = Math.ceil(viewport.scrollTop) < maxScroll;\n        setCanScrollDown(canScrollDown2);\n      };\n      var handleScroll = handleScroll2;\n      const viewport = contentContext.viewport;\n      handleScroll2();\n      viewport.addEventListener(\"scroll\", handleScroll2);\n      return () => viewport.removeEventListener(\"scroll\", handleScroll2);\n    }\n  }, [contentContext.viewport, contentContext.isPositioned]);\n  return canScrollDown ? (0, import_jsx_runtime.jsx)(\n    SelectScrollButtonImpl,\n    {\n      ...props,\n      ref: composedRefs,\n      onAutoScroll: () => {\n        const { viewport, selectedItem } = contentContext;\n        if (viewport && selectedItem) {\n          viewport.scrollTop = viewport.scrollTop + selectedItem.offsetHeight;\n        }\n      }\n    }\n  ) : null;\n});\nSelectScrollDownButton.displayName = SCROLL_DOWN_BUTTON_NAME;\nvar SelectScrollButtonImpl = React.forwardRef((props, forwardedRef) => {\n  const { __scopeSelect, onAutoScroll, ...scrollIndicatorProps } = props;\n  const contentContext = useSelectContentContext(\"SelectScrollButton\", __scopeSelect);\n  const autoScrollTimerRef = React.useRef(null);\n  const getItems = useCollection(__scopeSelect);\n  const clearAutoScrollTimer = React.useCallback(() => {\n    if (autoScrollTimerRef.current !== null) {\n      window.clearInterval(autoScrollTimerRef.current);\n      autoScrollTimerRef.current = null;\n    }\n  }, []);\n  React.useEffect(() => {\n    return () => clearAutoScrollTimer();\n  }, [clearAutoScrollTimer]);\n  useLayoutEffect2(() => {\n    var _a;\n    const activeItem = getItems().find((item) => item.ref.current === document.activeElement);\n    (_a = activeItem == null ? void 0 : activeItem.ref.current) == null ? void 0 : _a.scrollIntoView({ block: \"nearest\" });\n  }, [getItems]);\n  return (0, import_jsx_runtime.jsx)(\n    Primitive.div,\n    {\n      \"aria-hidden\": true,\n      ...scrollIndicatorProps,\n      ref: forwardedRef,\n      style: { flexShrink: 0, ...scrollIndicatorProps.style },\n      onPointerDown: composeEventHandlers(scrollIndicatorProps.onPointerDown, () => {\n        if (autoScrollTimerRef.current === null) {\n          autoScrollTimerRef.current = window.setInterval(onAutoScroll, 50);\n        }\n      }),\n      onPointerMove: composeEventHandlers(scrollIndicatorProps.onPointerMove, () => {\n        var _a;\n        (_a = contentContext.onItemLeave) == null ? void 0 : _a.call(contentContext);\n        if (autoScrollTimerRef.current === null) {\n          autoScrollTimerRef.current = window.setInterval(onAutoScroll, 50);\n        }\n      }),\n      onPointerLeave: composeEventHandlers(scrollIndicatorProps.onPointerLeave, () => {\n        clearAutoScrollTimer();\n      })\n    }\n  );\n});\nvar SEPARATOR_NAME = \"SelectSeparator\";\nvar SelectSeparator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, ...separatorProps } = props;\n    return (0, import_jsx_runtime.jsx)(Primitive.div, { \"aria-hidden\": true, ...separatorProps, ref: forwardedRef });\n  }\n);\nSelectSeparator.displayName = SEPARATOR_NAME;\nvar ARROW_NAME = \"SelectArrow\";\nvar SelectArrow = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, ...arrowProps } = props;\n    const popperScope = usePopperScope(__scopeSelect);\n    const context = useSelectContext(ARROW_NAME, __scopeSelect);\n    const contentContext = useSelectContentContext(ARROW_NAME, __scopeSelect);\n    return context.open && contentContext.position === \"popper\" ? (0, import_jsx_runtime.jsx)(Arrow, { ...popperScope, ...arrowProps, ref: forwardedRef }) : null;\n  }\n);\nSelectArrow.displayName = ARROW_NAME;\nfunction shouldShowPlaceholder(value) {\n  return value === \"\" || value === void 0;\n}\nvar BubbleSelect = React.forwardRef(\n  (props, forwardedRef) => {\n    const { value, ...selectProps } = props;\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const prevValue = usePrevious(value);\n    React.useEffect(() => {\n      const select = ref.current;\n      const selectProto = window.HTMLSelectElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        selectProto,\n        \"value\"\n      );\n      const setValue = descriptor.set;\n      if (prevValue !== value && setValue) {\n        const event = new Event(\"change\", { bubbles: true });\n        setValue.call(select, value);\n        select.dispatchEvent(event);\n      }\n    }, [prevValue, value]);\n    return (0, import_jsx_runtime.jsx)(VisuallyHidden, { asChild: true, children: (0, import_jsx_runtime.jsx)(\"select\", { ...selectProps, ref: composedRefs, defaultValue: value }) });\n  }\n);\nBubbleSelect.displayName = \"BubbleSelect\";\nfunction useTypeaheadSearch(onSearchChange) {\n  const handleSearchChange = useCallbackRef(onSearchChange);\n  const searchRef = React.useRef(\"\");\n  const timerRef = React.useRef(0);\n  const handleTypeaheadSearch = React.useCallback(\n    (key) => {\n      const search = searchRef.current + key;\n      handleSearchChange(search);\n      (function updateSearch(value) {\n        searchRef.current = value;\n        window.clearTimeout(timerRef.current);\n        if (value !== \"\") timerRef.current = window.setTimeout(() => updateSearch(\"\"), 1e3);\n      })(search);\n    },\n    [handleSearchChange]\n  );\n  const resetTypeahead = React.useCallback(() => {\n    searchRef.current = \"\";\n    window.clearTimeout(timerRef.current);\n  }, []);\n  React.useEffect(() => {\n    return () => window.clearTimeout(timerRef.current);\n  }, []);\n  return [searchRef, handleTypeaheadSearch, resetTypeahead];\n}\nfunction findNextItem(items, search, currentItem) {\n  const isRepeated = search.length > 1 && Array.from(search).every((char) => char === search[0]);\n  const normalizedSearch = isRepeated ? search[0] : search;\n  const currentItemIndex = currentItem ? items.indexOf(currentItem) : -1;\n  let wrappedItems = wrapArray(items, Math.max(currentItemIndex, 0));\n  const excludeCurrentItem = normalizedSearch.length === 1;\n  if (excludeCurrentItem) wrappedItems = wrappedItems.filter((v) => v !== currentItem);\n  const nextItem = wrappedItems.find(\n    (item) => item.textValue.toLowerCase().startsWith(normalizedSearch.toLowerCase())\n  );\n  return nextItem !== currentItem ? nextItem : void 0;\n}\nfunction wrapArray(array, startIndex) {\n  return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\nvar Root22 = Select;\nvar Trigger = SelectTrigger;\nvar Value = SelectValue;\nvar Icon = SelectIcon;\nvar Portal2 = SelectPortal;\nvar Content2 = SelectContent;\nvar Viewport = SelectViewport;\nvar Group = SelectGroup;\nvar Label = SelectLabel;\nvar Item = SelectItem;\nvar ItemText = SelectItemText;\nvar ItemIndicator = SelectItemIndicator;\nvar ScrollUpButton = SelectScrollUpButton;\nvar ScrollDownButton = SelectScrollDownButton;\nvar Separator = SelectSeparator;\nvar Arrow2 = SelectArrow;\nexport {\n  Arrow2 as Arrow,\n  Content2 as Content,\n  Group,\n  Icon,\n  Item,\n  ItemIndicator,\n  ItemText,\n  Label,\n  Portal2 as Portal,\n  Root22 as Root,\n  ScrollDownButton,\n  ScrollUpButton,\n  Select,\n  SelectArrow,\n  SelectContent,\n  SelectGroup,\n  SelectIcon,\n  SelectItem,\n  SelectItemIndicator,\n  SelectItemText,\n  SelectLabel,\n  SelectPortal,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n  SelectViewport,\n  Separator,\n  Trigger,\n  Value,\n  Viewport,\n  createSelectScope\n};\n//# sourceMappingURL=@radix-ui_react-select.js.map\n","size_bytes":50682},"node_modules/.vite/deps/@radix-ui_react-alert-dialog.js":{"content":"\"use client\";\nimport {\n  Close,\n  Content,\n  Description,\n  Overlay,\n  Portal,\n  Root,\n  Title,\n  Trigger,\n  WarningProvider,\n  createDialogScope\n} from \"./chunk-OL5WVRMA.js\";\nimport \"./chunk-SPW4NC5B.js\";\nimport \"./chunk-JNX36Q56.js\";\nimport \"./chunk-ZD6YADYP.js\";\nimport \"./chunk-AEL5JHOW.js\";\nimport {\n  composeEventHandlers,\n  createContextScope\n} from \"./chunk-KQC75CTR.js\";\nimport \"./chunk-UPK5WUJ5.js\";\nimport {\n  createSlottable,\n  useComposedRefs\n} from \"./chunk-LJH5O6ZH.js\";\nimport \"./chunk-UPELNCPK.js\";\nimport {\n  require_jsx_runtime\n} from \"./chunk-WKPQ4ZTV.js\";\nimport {\n  require_react\n} from \"./chunk-BG45W2ER.js\";\nimport {\n  __toESM\n} from \"./chunk-HXA6O6EE.js\";\n\n// node_modules/@radix-ui/react-alert-dialog/dist/index.mjs\nvar React = __toESM(require_react(), 1);\nvar import_jsx_runtime = __toESM(require_jsx_runtime(), 1);\nvar ROOT_NAME = \"AlertDialog\";\nvar [createAlertDialogContext, createAlertDialogScope] = createContextScope(ROOT_NAME, [\n  createDialogScope\n]);\nvar useDialogScope = createDialogScope();\nvar AlertDialog = (props) => {\n  const { __scopeAlertDialog, ...alertDialogProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return (0, import_jsx_runtime.jsx)(Root, { ...dialogScope, ...alertDialogProps, modal: true });\n};\nAlertDialog.displayName = ROOT_NAME;\nvar TRIGGER_NAME = \"AlertDialogTrigger\";\nvar AlertDialogTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...triggerProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return (0, import_jsx_runtime.jsx)(Trigger, { ...dialogScope, ...triggerProps, ref: forwardedRef });\n  }\n);\nAlertDialogTrigger.displayName = TRIGGER_NAME;\nvar PORTAL_NAME = \"AlertDialogPortal\";\nvar AlertDialogPortal = (props) => {\n  const { __scopeAlertDialog, ...portalProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return (0, import_jsx_runtime.jsx)(Portal, { ...dialogScope, ...portalProps });\n};\nAlertDialogPortal.displayName = PORTAL_NAME;\nvar OVERLAY_NAME = \"AlertDialogOverlay\";\nvar AlertDialogOverlay = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...overlayProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return (0, import_jsx_runtime.jsx)(Overlay, { ...dialogScope, ...overlayProps, ref: forwardedRef });\n  }\n);\nAlertDialogOverlay.displayName = OVERLAY_NAME;\nvar CONTENT_NAME = \"AlertDialogContent\";\nvar [AlertDialogContentProvider, useAlertDialogContentContext] = createAlertDialogContext(CONTENT_NAME);\nvar Slottable = createSlottable(\"AlertDialogContent\");\nvar AlertDialogContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, children, ...contentProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    const contentRef = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, contentRef);\n    const cancelRef = React.useRef(null);\n    return (0, import_jsx_runtime.jsx)(\n      WarningProvider,\n      {\n        contentName: CONTENT_NAME,\n        titleName: TITLE_NAME,\n        docsSlug: \"alert-dialog\",\n        children: (0, import_jsx_runtime.jsx)(AlertDialogContentProvider, { scope: __scopeAlertDialog, cancelRef, children: (0, import_jsx_runtime.jsxs)(\n          Content,\n          {\n            role: \"alertdialog\",\n            ...dialogScope,\n            ...contentProps,\n            ref: composedRefs,\n            onOpenAutoFocus: composeEventHandlers(contentProps.onOpenAutoFocus, (event) => {\n              var _a;\n              event.preventDefault();\n              (_a = cancelRef.current) == null ? void 0 : _a.focus({ preventScroll: true });\n            }),\n            onPointerDownOutside: (event) => event.preventDefault(),\n            onInteractOutside: (event) => event.preventDefault(),\n            children: [\n              (0, import_jsx_runtime.jsx)(Slottable, { children }),\n              (0, import_jsx_runtime.jsx)(DescriptionWarning, { contentRef })\n            ]\n          }\n        ) })\n      }\n    );\n  }\n);\nAlertDialogContent.displayName = CONTENT_NAME;\nvar TITLE_NAME = \"AlertDialogTitle\";\nvar AlertDialogTitle = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...titleProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return (0, import_jsx_runtime.jsx)(Title, { ...dialogScope, ...titleProps, ref: forwardedRef });\n  }\n);\nAlertDialogTitle.displayName = TITLE_NAME;\nvar DESCRIPTION_NAME = \"AlertDialogDescription\";\nvar AlertDialogDescription = React.forwardRef((props, forwardedRef) => {\n  const { __scopeAlertDialog, ...descriptionProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return (0, import_jsx_runtime.jsx)(Description, { ...dialogScope, ...descriptionProps, ref: forwardedRef });\n});\nAlertDialogDescription.displayName = DESCRIPTION_NAME;\nvar ACTION_NAME = \"AlertDialogAction\";\nvar AlertDialogAction = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...actionProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return (0, import_jsx_runtime.jsx)(Close, { ...dialogScope, ...actionProps, ref: forwardedRef });\n  }\n);\nAlertDialogAction.displayName = ACTION_NAME;\nvar CANCEL_NAME = \"AlertDialogCancel\";\nvar AlertDialogCancel = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...cancelProps } = props;\n    const { cancelRef } = useAlertDialogContentContext(CANCEL_NAME, __scopeAlertDialog);\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    const ref = useComposedRefs(forwardedRef, cancelRef);\n    return (0, import_jsx_runtime.jsx)(Close, { ...dialogScope, ...cancelProps, ref });\n  }\n);\nAlertDialogCancel.displayName = CANCEL_NAME;\nvar DescriptionWarning = ({ contentRef }) => {\n  const MESSAGE = `\\`${CONTENT_NAME}\\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \\`${CONTENT_NAME}\\` by passing a \\`${DESCRIPTION_NAME}\\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \\`id\\` and passing the same value to the \\`aria-describedby\\` prop in \\`${CONTENT_NAME}\\`. If the description is confusing or duplicative for sighted users, you can use the \\`@radix-ui/react-visually-hidden\\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;\n  React.useEffect(() => {\n    var _a;\n    const hasDescription = document.getElementById(\n      (_a = contentRef.current) == null ? void 0 : _a.getAttribute(\"aria-describedby\")\n    );\n    if (!hasDescription) console.warn(MESSAGE);\n  }, [MESSAGE, contentRef]);\n  return null;\n};\nvar Root2 = AlertDialog;\nvar Trigger2 = AlertDialogTrigger;\nvar Portal2 = AlertDialogPortal;\nvar Overlay2 = AlertDialogOverlay;\nvar Content2 = AlertDialogContent;\nvar Action = AlertDialogAction;\nvar Cancel = AlertDialogCancel;\nvar Title2 = AlertDialogTitle;\nvar Description2 = AlertDialogDescription;\nexport {\n  Action,\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogOverlay,\n  AlertDialogPortal,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n  Cancel,\n  Content2 as Content,\n  Description2 as Description,\n  Overlay2 as Overlay,\n  Portal2 as Portal,\n  Root2 as Root,\n  Title2 as Title,\n  Trigger2 as Trigger,\n  createAlertDialogScope\n};\n//# sourceMappingURL=@radix-ui_react-alert-dialog.js.map\n","size_bytes":7647},"node_modules/.vite/deps/@radix-ui_react-tooltip.js":{"content":"\"use client\";\nimport {\n  Anchor,\n  Arrow,\n  Content,\n  Root2,\n  createPopperScope\n} from \"./chunk-2MQNN5E6.js\";\nimport \"./chunk-TGZA6QQB.js\";\nimport {\n  Root\n} from \"./chunk-RRMGE3QL.js\";\nimport {\n  useId\n} from \"./chunk-JNX36Q56.js\";\nimport {\n  DismissableLayer,\n  Portal\n} from \"./chunk-ZD6YADYP.js\";\nimport {\n  Presence\n} from \"./chunk-AEL5JHOW.js\";\nimport {\n  composeEventHandlers,\n  createContextScope,\n  useControllableState\n} from \"./chunk-KQC75CTR.js\";\nimport {\n  Primitive\n} from \"./chunk-UPK5WUJ5.js\";\nimport {\n  createSlottable,\n  useComposedRefs\n} from \"./chunk-LJH5O6ZH.js\";\nimport \"./chunk-UPELNCPK.js\";\nimport {\n  require_jsx_runtime\n} from \"./chunk-WKPQ4ZTV.js\";\nimport {\n  require_react\n} from \"./chunk-BG45W2ER.js\";\nimport {\n  __toESM\n} from \"./chunk-HXA6O6EE.js\";\n\n// node_modules/@radix-ui/react-tooltip/dist/index.mjs\nvar React = __toESM(require_react(), 1);\nvar import_jsx_runtime = __toESM(require_jsx_runtime(), 1);\nvar [createTooltipContext, createTooltipScope] = createContextScope(\"Tooltip\", [\n  createPopperScope\n]);\nvar usePopperScope = createPopperScope();\nvar PROVIDER_NAME = \"TooltipProvider\";\nvar DEFAULT_DELAY_DURATION = 700;\nvar TOOLTIP_OPEN = \"tooltip.open\";\nvar [TooltipProviderContextProvider, useTooltipProviderContext] = createTooltipContext(PROVIDER_NAME);\nvar TooltipProvider = (props) => {\n  const {\n    __scopeTooltip,\n    delayDuration = DEFAULT_DELAY_DURATION,\n    skipDelayDuration = 300,\n    disableHoverableContent = false,\n    children\n  } = props;\n  const isOpenDelayedRef = React.useRef(true);\n  const isPointerInTransitRef = React.useRef(false);\n  const skipDelayTimerRef = React.useRef(0);\n  React.useEffect(() => {\n    const skipDelayTimer = skipDelayTimerRef.current;\n    return () => window.clearTimeout(skipDelayTimer);\n  }, []);\n  return (0, import_jsx_runtime.jsx)(\n    TooltipProviderContextProvider,\n    {\n      scope: __scopeTooltip,\n      isOpenDelayedRef,\n      delayDuration,\n      onOpen: React.useCallback(() => {\n        window.clearTimeout(skipDelayTimerRef.current);\n        isOpenDelayedRef.current = false;\n      }, []),\n      onClose: React.useCallback(() => {\n        window.clearTimeout(skipDelayTimerRef.current);\n        skipDelayTimerRef.current = window.setTimeout(\n          () => isOpenDelayedRef.current = true,\n          skipDelayDuration\n        );\n      }, [skipDelayDuration]),\n      isPointerInTransitRef,\n      onPointerInTransitChange: React.useCallback((inTransit) => {\n        isPointerInTransitRef.current = inTransit;\n      }, []),\n      disableHoverableContent,\n      children\n    }\n  );\n};\nTooltipProvider.displayName = PROVIDER_NAME;\nvar TOOLTIP_NAME = \"Tooltip\";\nvar [TooltipContextProvider, useTooltipContext] = createTooltipContext(TOOLTIP_NAME);\nvar Tooltip = (props) => {\n  const {\n    __scopeTooltip,\n    children,\n    open: openProp,\n    defaultOpen = false,\n    onOpenChange,\n    disableHoverableContent: disableHoverableContentProp,\n    delayDuration: delayDurationProp\n  } = props;\n  const providerContext = useTooltipProviderContext(TOOLTIP_NAME, props.__scopeTooltip);\n  const popperScope = usePopperScope(__scopeTooltip);\n  const [trigger, setTrigger] = React.useState(null);\n  const contentId = useId();\n  const openTimerRef = React.useRef(0);\n  const disableHoverableContent = disableHoverableContentProp ?? providerContext.disableHoverableContent;\n  const delayDuration = delayDurationProp ?? providerContext.delayDuration;\n  const wasOpenDelayedRef = React.useRef(false);\n  const [open = false, setOpen] = useControllableState({\n    prop: openProp,\n    defaultProp: defaultOpen,\n    onChange: (open2) => {\n      if (open2) {\n        providerContext.onOpen();\n        document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN));\n      } else {\n        providerContext.onClose();\n      }\n      onOpenChange == null ? void 0 : onOpenChange(open2);\n    }\n  });\n  const stateAttribute = React.useMemo(() => {\n    return open ? wasOpenDelayedRef.current ? \"delayed-open\" : \"instant-open\" : \"closed\";\n  }, [open]);\n  const handleOpen = React.useCallback(() => {\n    window.clearTimeout(openTimerRef.current);\n    openTimerRef.current = 0;\n    wasOpenDelayedRef.current = false;\n    setOpen(true);\n  }, [setOpen]);\n  const handleClose = React.useCallback(() => {\n    window.clearTimeout(openTimerRef.current);\n    openTimerRef.current = 0;\n    setOpen(false);\n  }, [setOpen]);\n  const handleDelayedOpen = React.useCallback(() => {\n    window.clearTimeout(openTimerRef.current);\n    openTimerRef.current = window.setTimeout(() => {\n      wasOpenDelayedRef.current = true;\n      setOpen(true);\n      openTimerRef.current = 0;\n    }, delayDuration);\n  }, [delayDuration, setOpen]);\n  React.useEffect(() => {\n    return () => {\n      if (openTimerRef.current) {\n        window.clearTimeout(openTimerRef.current);\n        openTimerRef.current = 0;\n      }\n    };\n  }, []);\n  return (0, import_jsx_runtime.jsx)(Root2, { ...popperScope, children: (0, import_jsx_runtime.jsx)(\n    TooltipContextProvider,\n    {\n      scope: __scopeTooltip,\n      contentId,\n      open,\n      stateAttribute,\n      trigger,\n      onTriggerChange: setTrigger,\n      onTriggerEnter: React.useCallback(() => {\n        if (providerContext.isOpenDelayedRef.current) handleDelayedOpen();\n        else handleOpen();\n      }, [providerContext.isOpenDelayedRef, handleDelayedOpen, handleOpen]),\n      onTriggerLeave: React.useCallback(() => {\n        if (disableHoverableContent) {\n          handleClose();\n        } else {\n          window.clearTimeout(openTimerRef.current);\n          openTimerRef.current = 0;\n        }\n      }, [handleClose, disableHoverableContent]),\n      onOpen: handleOpen,\n      onClose: handleClose,\n      disableHoverableContent,\n      children\n    }\n  ) });\n};\nTooltip.displayName = TOOLTIP_NAME;\nvar TRIGGER_NAME = \"TooltipTrigger\";\nvar TooltipTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTooltip, ...triggerProps } = props;\n    const context = useTooltipContext(TRIGGER_NAME, __scopeTooltip);\n    const providerContext = useTooltipProviderContext(TRIGGER_NAME, __scopeTooltip);\n    const popperScope = usePopperScope(__scopeTooltip);\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref, context.onTriggerChange);\n    const isPointerDownRef = React.useRef(false);\n    const hasPointerMoveOpenedRef = React.useRef(false);\n    const handlePointerUp = React.useCallback(() => isPointerDownRef.current = false, []);\n    React.useEffect(() => {\n      return () => document.removeEventListener(\"pointerup\", handlePointerUp);\n    }, [handlePointerUp]);\n    return (0, import_jsx_runtime.jsx)(Anchor, { asChild: true, ...popperScope, children: (0, import_jsx_runtime.jsx)(\n      Primitive.button,\n      {\n        \"aria-describedby\": context.open ? context.contentId : void 0,\n        \"data-state\": context.stateAttribute,\n        ...triggerProps,\n        ref: composedRefs,\n        onPointerMove: composeEventHandlers(props.onPointerMove, (event) => {\n          if (event.pointerType === \"touch\") return;\n          if (!hasPointerMoveOpenedRef.current && !providerContext.isPointerInTransitRef.current) {\n            context.onTriggerEnter();\n            hasPointerMoveOpenedRef.current = true;\n          }\n        }),\n        onPointerLeave: composeEventHandlers(props.onPointerLeave, () => {\n          context.onTriggerLeave();\n          hasPointerMoveOpenedRef.current = false;\n        }),\n        onPointerDown: composeEventHandlers(props.onPointerDown, () => {\n          if (context.open) {\n            context.onClose();\n          }\n          isPointerDownRef.current = true;\n          document.addEventListener(\"pointerup\", handlePointerUp, { once: true });\n        }),\n        onFocus: composeEventHandlers(props.onFocus, () => {\n          if (!isPointerDownRef.current) context.onOpen();\n        }),\n        onBlur: composeEventHandlers(props.onBlur, context.onClose),\n        onClick: composeEventHandlers(props.onClick, context.onClose)\n      }\n    ) });\n  }\n);\nTooltipTrigger.displayName = TRIGGER_NAME;\nvar PORTAL_NAME = \"TooltipPortal\";\nvar [PortalProvider, usePortalContext] = createTooltipContext(PORTAL_NAME, {\n  forceMount: void 0\n});\nvar TooltipPortal = (props) => {\n  const { __scopeTooltip, forceMount, children, container } = props;\n  const context = useTooltipContext(PORTAL_NAME, __scopeTooltip);\n  return (0, import_jsx_runtime.jsx)(PortalProvider, { scope: __scopeTooltip, forceMount, children: (0, import_jsx_runtime.jsx)(Presence, { present: forceMount || context.open, children: (0, import_jsx_runtime.jsx)(Portal, { asChild: true, container, children }) }) });\n};\nTooltipPortal.displayName = PORTAL_NAME;\nvar CONTENT_NAME = \"TooltipContent\";\nvar TooltipContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const portalContext = usePortalContext(CONTENT_NAME, props.__scopeTooltip);\n    const { forceMount = portalContext.forceMount, side = \"top\", ...contentProps } = props;\n    const context = useTooltipContext(CONTENT_NAME, props.__scopeTooltip);\n    return (0, import_jsx_runtime.jsx)(Presence, { present: forceMount || context.open, children: context.disableHoverableContent ? (0, import_jsx_runtime.jsx)(TooltipContentImpl, { side, ...contentProps, ref: forwardedRef }) : (0, import_jsx_runtime.jsx)(TooltipContentHoverable, { side, ...contentProps, ref: forwardedRef }) });\n  }\n);\nvar TooltipContentHoverable = React.forwardRef((props, forwardedRef) => {\n  const context = useTooltipContext(CONTENT_NAME, props.__scopeTooltip);\n  const providerContext = useTooltipProviderContext(CONTENT_NAME, props.__scopeTooltip);\n  const ref = React.useRef(null);\n  const composedRefs = useComposedRefs(forwardedRef, ref);\n  const [pointerGraceArea, setPointerGraceArea] = React.useState(null);\n  const { trigger, onClose } = context;\n  const content = ref.current;\n  const { onPointerInTransitChange } = providerContext;\n  const handleRemoveGraceArea = React.useCallback(() => {\n    setPointerGraceArea(null);\n    onPointerInTransitChange(false);\n  }, [onPointerInTransitChange]);\n  const handleCreateGraceArea = React.useCallback(\n    (event, hoverTarget) => {\n      const currentTarget = event.currentTarget;\n      const exitPoint = { x: event.clientX, y: event.clientY };\n      const exitSide = getExitSideFromRect(exitPoint, currentTarget.getBoundingClientRect());\n      const paddedExitPoints = getPaddedExitPoints(exitPoint, exitSide);\n      const hoverTargetPoints = getPointsFromRect(hoverTarget.getBoundingClientRect());\n      const graceArea = getHull([...paddedExitPoints, ...hoverTargetPoints]);\n      setPointerGraceArea(graceArea);\n      onPointerInTransitChange(true);\n    },\n    [onPointerInTransitChange]\n  );\n  React.useEffect(() => {\n    return () => handleRemoveGraceArea();\n  }, [handleRemoveGraceArea]);\n  React.useEffect(() => {\n    if (trigger && content) {\n      const handleTriggerLeave = (event) => handleCreateGraceArea(event, content);\n      const handleContentLeave = (event) => handleCreateGraceArea(event, trigger);\n      trigger.addEventListener(\"pointerleave\", handleTriggerLeave);\n      content.addEventListener(\"pointerleave\", handleContentLeave);\n      return () => {\n        trigger.removeEventListener(\"pointerleave\", handleTriggerLeave);\n        content.removeEventListener(\"pointerleave\", handleContentLeave);\n      };\n    }\n  }, [trigger, content, handleCreateGraceArea, handleRemoveGraceArea]);\n  React.useEffect(() => {\n    if (pointerGraceArea) {\n      const handleTrackPointerGrace = (event) => {\n        const target = event.target;\n        const pointerPosition = { x: event.clientX, y: event.clientY };\n        const hasEnteredTarget = (trigger == null ? void 0 : trigger.contains(target)) || (content == null ? void 0 : content.contains(target));\n        const isPointerOutsideGraceArea = !isPointInPolygon(pointerPosition, pointerGraceArea);\n        if (hasEnteredTarget) {\n          handleRemoveGraceArea();\n        } else if (isPointerOutsideGraceArea) {\n          handleRemoveGraceArea();\n          onClose();\n        }\n      };\n      document.addEventListener(\"pointermove\", handleTrackPointerGrace);\n      return () => document.removeEventListener(\"pointermove\", handleTrackPointerGrace);\n    }\n  }, [trigger, content, pointerGraceArea, onClose, handleRemoveGraceArea]);\n  return (0, import_jsx_runtime.jsx)(TooltipContentImpl, { ...props, ref: composedRefs });\n});\nvar [VisuallyHiddenContentContextProvider, useVisuallyHiddenContentContext] = createTooltipContext(TOOLTIP_NAME, { isInside: false });\nvar Slottable = createSlottable(\"TooltipContent\");\nvar TooltipContentImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeTooltip,\n      children,\n      \"aria-label\": ariaLabel,\n      onEscapeKeyDown,\n      onPointerDownOutside,\n      ...contentProps\n    } = props;\n    const context = useTooltipContext(CONTENT_NAME, __scopeTooltip);\n    const popperScope = usePopperScope(__scopeTooltip);\n    const { onClose } = context;\n    React.useEffect(() => {\n      document.addEventListener(TOOLTIP_OPEN, onClose);\n      return () => document.removeEventListener(TOOLTIP_OPEN, onClose);\n    }, [onClose]);\n    React.useEffect(() => {\n      if (context.trigger) {\n        const handleScroll = (event) => {\n          const target = event.target;\n          if (target == null ? void 0 : target.contains(context.trigger)) onClose();\n        };\n        window.addEventListener(\"scroll\", handleScroll, { capture: true });\n        return () => window.removeEventListener(\"scroll\", handleScroll, { capture: true });\n      }\n    }, [context.trigger, onClose]);\n    return (0, import_jsx_runtime.jsx)(\n      DismissableLayer,\n      {\n        asChild: true,\n        disableOutsidePointerEvents: false,\n        onEscapeKeyDown,\n        onPointerDownOutside,\n        onFocusOutside: (event) => event.preventDefault(),\n        onDismiss: onClose,\n        children: (0, import_jsx_runtime.jsxs)(\n          Content,\n          {\n            \"data-state\": context.stateAttribute,\n            ...popperScope,\n            ...contentProps,\n            ref: forwardedRef,\n            style: {\n              ...contentProps.style,\n              // re-namespace exposed content custom properties\n              ...{\n                \"--radix-tooltip-content-transform-origin\": \"var(--radix-popper-transform-origin)\",\n                \"--radix-tooltip-content-available-width\": \"var(--radix-popper-available-width)\",\n                \"--radix-tooltip-content-available-height\": \"var(--radix-popper-available-height)\",\n                \"--radix-tooltip-trigger-width\": \"var(--radix-popper-anchor-width)\",\n                \"--radix-tooltip-trigger-height\": \"var(--radix-popper-anchor-height)\"\n              }\n            },\n            children: [\n              (0, import_jsx_runtime.jsx)(Slottable, { children }),\n              (0, import_jsx_runtime.jsx)(VisuallyHiddenContentContextProvider, { scope: __scopeTooltip, isInside: true, children: (0, import_jsx_runtime.jsx)(Root, { id: context.contentId, role: \"tooltip\", children: ariaLabel || children }) })\n            ]\n          }\n        )\n      }\n    );\n  }\n);\nTooltipContent.displayName = CONTENT_NAME;\nvar ARROW_NAME = \"TooltipArrow\";\nvar TooltipArrow = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTooltip, ...arrowProps } = props;\n    const popperScope = usePopperScope(__scopeTooltip);\n    const visuallyHiddenContentContext = useVisuallyHiddenContentContext(\n      ARROW_NAME,\n      __scopeTooltip\n    );\n    return visuallyHiddenContentContext.isInside ? null : (0, import_jsx_runtime.jsx)(Arrow, { ...popperScope, ...arrowProps, ref: forwardedRef });\n  }\n);\nTooltipArrow.displayName = ARROW_NAME;\nfunction getExitSideFromRect(point, rect) {\n  const top = Math.abs(rect.top - point.y);\n  const bottom = Math.abs(rect.bottom - point.y);\n  const right = Math.abs(rect.right - point.x);\n  const left = Math.abs(rect.left - point.x);\n  switch (Math.min(top, bottom, right, left)) {\n    case left:\n      return \"left\";\n    case right:\n      return \"right\";\n    case top:\n      return \"top\";\n    case bottom:\n      return \"bottom\";\n    default:\n      throw new Error(\"unreachable\");\n  }\n}\nfunction getPaddedExitPoints(exitPoint, exitSide, padding = 5) {\n  const paddedExitPoints = [];\n  switch (exitSide) {\n    case \"top\":\n      paddedExitPoints.push(\n        { x: exitPoint.x - padding, y: exitPoint.y + padding },\n        { x: exitPoint.x + padding, y: exitPoint.y + padding }\n      );\n      break;\n    case \"bottom\":\n      paddedExitPoints.push(\n        { x: exitPoint.x - padding, y: exitPoint.y - padding },\n        { x: exitPoint.x + padding, y: exitPoint.y - padding }\n      );\n      break;\n    case \"left\":\n      paddedExitPoints.push(\n        { x: exitPoint.x + padding, y: exitPoint.y - padding },\n        { x: exitPoint.x + padding, y: exitPoint.y + padding }\n      );\n      break;\n    case \"right\":\n      paddedExitPoints.push(\n        { x: exitPoint.x - padding, y: exitPoint.y - padding },\n        { x: exitPoint.x - padding, y: exitPoint.y + padding }\n      );\n      break;\n  }\n  return paddedExitPoints;\n}\nfunction getPointsFromRect(rect) {\n  const { top, right, bottom, left } = rect;\n  return [\n    { x: left, y: top },\n    { x: right, y: top },\n    { x: right, y: bottom },\n    { x: left, y: bottom }\n  ];\n}\nfunction isPointInPolygon(point, polygon) {\n  const { x, y } = point;\n  let inside = false;\n  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n    const xi = polygon[i].x;\n    const yi = polygon[i].y;\n    const xj = polygon[j].x;\n    const yj = polygon[j].y;\n    const intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\n    if (intersect) inside = !inside;\n  }\n  return inside;\n}\nfunction getHull(points) {\n  const newPoints = points.slice();\n  newPoints.sort((a, b) => {\n    if (a.x < b.x) return -1;\n    else if (a.x > b.x) return 1;\n    else if (a.y < b.y) return -1;\n    else if (a.y > b.y) return 1;\n    else return 0;\n  });\n  return getHullPresorted(newPoints);\n}\nfunction getHullPresorted(points) {\n  if (points.length <= 1) return points.slice();\n  const upperHull = [];\n  for (let i = 0; i < points.length; i++) {\n    const p = points[i];\n    while (upperHull.length >= 2) {\n      const q = upperHull[upperHull.length - 1];\n      const r = upperHull[upperHull.length - 2];\n      if ((q.x - r.x) * (p.y - r.y) >= (q.y - r.y) * (p.x - r.x)) upperHull.pop();\n      else break;\n    }\n    upperHull.push(p);\n  }\n  upperHull.pop();\n  const lowerHull = [];\n  for (let i = points.length - 1; i >= 0; i--) {\n    const p = points[i];\n    while (lowerHull.length >= 2) {\n      const q = lowerHull[lowerHull.length - 1];\n      const r = lowerHull[lowerHull.length - 2];\n      if ((q.x - r.x) * (p.y - r.y) >= (q.y - r.y) * (p.x - r.x)) lowerHull.pop();\n      else break;\n    }\n    lowerHull.push(p);\n  }\n  lowerHull.pop();\n  if (upperHull.length === 1 && lowerHull.length === 1 && upperHull[0].x === lowerHull[0].x && upperHull[0].y === lowerHull[0].y) {\n    return upperHull;\n  } else {\n    return upperHull.concat(lowerHull);\n  }\n}\nvar Provider = TooltipProvider;\nvar Root3 = Tooltip;\nvar Trigger = TooltipTrigger;\nvar Portal2 = TooltipPortal;\nvar Content2 = TooltipContent;\nvar Arrow2 = TooltipArrow;\nexport {\n  Arrow2 as Arrow,\n  Content2 as Content,\n  Portal2 as Portal,\n  Provider,\n  Root3 as Root,\n  Tooltip,\n  TooltipArrow,\n  TooltipContent,\n  TooltipPortal,\n  TooltipProvider,\n  TooltipTrigger,\n  Trigger,\n  createTooltipScope\n};\n//# sourceMappingURL=@radix-ui_react-tooltip.js.map\n","size_bytes":19578},"node_modules/.vite/deps/@radix-ui_react-tabs.js":{"content":"\"use client\";\nimport {\n  useDirection\n} from \"./chunk-OW74AC7Q.js\";\nimport {\n  createCollection\n} from \"./chunk-OG4DZOYC.js\";\nimport {\n  useId\n} from \"./chunk-JNX36Q56.js\";\nimport {\n  Presence\n} from \"./chunk-AEL5JHOW.js\";\nimport {\n  composeEventHandlers,\n  createContextScope,\n  useCallbackRef,\n  useControllableState\n} from \"./chunk-KQC75CTR.js\";\nimport {\n  Primitive\n} from \"./chunk-UPK5WUJ5.js\";\nimport {\n  useComposedRefs\n} from \"./chunk-LJH5O6ZH.js\";\nimport \"./chunk-UPELNCPK.js\";\nimport {\n  require_jsx_runtime\n} from \"./chunk-WKPQ4ZTV.js\";\nimport {\n  require_react\n} from \"./chunk-BG45W2ER.js\";\nimport {\n  __toESM\n} from \"./chunk-HXA6O6EE.js\";\n\n// node_modules/@radix-ui/react-tabs/dist/index.mjs\nvar React2 = __toESM(require_react(), 1);\n\n// node_modules/@radix-ui/react-roving-focus/dist/index.mjs\nvar React = __toESM(require_react(), 1);\nvar import_jsx_runtime = __toESM(require_jsx_runtime(), 1);\nvar ENTRY_FOCUS = \"rovingFocusGroup.onEntryFocus\";\nvar EVENT_OPTIONS = { bubbles: false, cancelable: true };\nvar GROUP_NAME = \"RovingFocusGroup\";\nvar [Collection, useCollection, createCollectionScope] = createCollection(GROUP_NAME);\nvar [createRovingFocusGroupContext, createRovingFocusGroupScope] = createContextScope(\n  GROUP_NAME,\n  [createCollectionScope]\n);\nvar [RovingFocusProvider, useRovingFocusContext] = createRovingFocusGroupContext(GROUP_NAME);\nvar RovingFocusGroup = React.forwardRef(\n  (props, forwardedRef) => {\n    return (0, import_jsx_runtime.jsx)(Collection.Provider, { scope: props.__scopeRovingFocusGroup, children: (0, import_jsx_runtime.jsx)(Collection.Slot, { scope: props.__scopeRovingFocusGroup, children: (0, import_jsx_runtime.jsx)(RovingFocusGroupImpl, { ...props, ref: forwardedRef }) }) });\n  }\n);\nRovingFocusGroup.displayName = GROUP_NAME;\nvar RovingFocusGroupImpl = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeRovingFocusGroup,\n    orientation,\n    loop = false,\n    dir,\n    currentTabStopId: currentTabStopIdProp,\n    defaultCurrentTabStopId,\n    onCurrentTabStopIdChange,\n    onEntryFocus,\n    preventScrollOnEntryFocus = false,\n    ...groupProps\n  } = props;\n  const ref = React.useRef(null);\n  const composedRefs = useComposedRefs(forwardedRef, ref);\n  const direction = useDirection(dir);\n  const [currentTabStopId = null, setCurrentTabStopId] = useControllableState({\n    prop: currentTabStopIdProp,\n    defaultProp: defaultCurrentTabStopId,\n    onChange: onCurrentTabStopIdChange\n  });\n  const [isTabbingBackOut, setIsTabbingBackOut] = React.useState(false);\n  const handleEntryFocus = useCallbackRef(onEntryFocus);\n  const getItems = useCollection(__scopeRovingFocusGroup);\n  const isClickFocusRef = React.useRef(false);\n  const [focusableItemsCount, setFocusableItemsCount] = React.useState(0);\n  React.useEffect(() => {\n    const node = ref.current;\n    if (node) {\n      node.addEventListener(ENTRY_FOCUS, handleEntryFocus);\n      return () => node.removeEventListener(ENTRY_FOCUS, handleEntryFocus);\n    }\n  }, [handleEntryFocus]);\n  return (0, import_jsx_runtime.jsx)(\n    RovingFocusProvider,\n    {\n      scope: __scopeRovingFocusGroup,\n      orientation,\n      dir: direction,\n      loop,\n      currentTabStopId,\n      onItemFocus: React.useCallback(\n        (tabStopId) => setCurrentTabStopId(tabStopId),\n        [setCurrentTabStopId]\n      ),\n      onItemShiftTab: React.useCallback(() => setIsTabbingBackOut(true), []),\n      onFocusableItemAdd: React.useCallback(\n        () => setFocusableItemsCount((prevCount) => prevCount + 1),\n        []\n      ),\n      onFocusableItemRemove: React.useCallback(\n        () => setFocusableItemsCount((prevCount) => prevCount - 1),\n        []\n      ),\n      children: (0, import_jsx_runtime.jsx)(\n        Primitive.div,\n        {\n          tabIndex: isTabbingBackOut || focusableItemsCount === 0 ? -1 : 0,\n          \"data-orientation\": orientation,\n          ...groupProps,\n          ref: composedRefs,\n          style: { outline: \"none\", ...props.style },\n          onMouseDown: composeEventHandlers(props.onMouseDown, () => {\n            isClickFocusRef.current = true;\n          }),\n          onFocus: composeEventHandlers(props.onFocus, (event) => {\n            const isKeyboardFocus = !isClickFocusRef.current;\n            if (event.target === event.currentTarget && isKeyboardFocus && !isTabbingBackOut) {\n              const entryFocusEvent = new CustomEvent(ENTRY_FOCUS, EVENT_OPTIONS);\n              event.currentTarget.dispatchEvent(entryFocusEvent);\n              if (!entryFocusEvent.defaultPrevented) {\n                const items = getItems().filter((item) => item.focusable);\n                const activeItem = items.find((item) => item.active);\n                const currentItem = items.find((item) => item.id === currentTabStopId);\n                const candidateItems = [activeItem, currentItem, ...items].filter(\n                  Boolean\n                );\n                const candidateNodes = candidateItems.map((item) => item.ref.current);\n                focusFirst(candidateNodes, preventScrollOnEntryFocus);\n              }\n            }\n            isClickFocusRef.current = false;\n          }),\n          onBlur: composeEventHandlers(props.onBlur, () => setIsTabbingBackOut(false))\n        }\n      )\n    }\n  );\n});\nvar ITEM_NAME = \"RovingFocusGroupItem\";\nvar RovingFocusGroupItem = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRovingFocusGroup,\n      focusable = true,\n      active = false,\n      tabStopId,\n      ...itemProps\n    } = props;\n    const autoId = useId();\n    const id = tabStopId || autoId;\n    const context = useRovingFocusContext(ITEM_NAME, __scopeRovingFocusGroup);\n    const isCurrentTabStop = context.currentTabStopId === id;\n    const getItems = useCollection(__scopeRovingFocusGroup);\n    const { onFocusableItemAdd, onFocusableItemRemove } = context;\n    React.useEffect(() => {\n      if (focusable) {\n        onFocusableItemAdd();\n        return () => onFocusableItemRemove();\n      }\n    }, [focusable, onFocusableItemAdd, onFocusableItemRemove]);\n    return (0, import_jsx_runtime.jsx)(\n      Collection.ItemSlot,\n      {\n        scope: __scopeRovingFocusGroup,\n        id,\n        focusable,\n        active,\n        children: (0, import_jsx_runtime.jsx)(\n          Primitive.span,\n          {\n            tabIndex: isCurrentTabStop ? 0 : -1,\n            \"data-orientation\": context.orientation,\n            ...itemProps,\n            ref: forwardedRef,\n            onMouseDown: composeEventHandlers(props.onMouseDown, (event) => {\n              if (!focusable) event.preventDefault();\n              else context.onItemFocus(id);\n            }),\n            onFocus: composeEventHandlers(props.onFocus, () => context.onItemFocus(id)),\n            onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n              if (event.key === \"Tab\" && event.shiftKey) {\n                context.onItemShiftTab();\n                return;\n              }\n              if (event.target !== event.currentTarget) return;\n              const focusIntent = getFocusIntent(event, context.orientation, context.dir);\n              if (focusIntent !== void 0) {\n                if (event.metaKey || event.ctrlKey || event.altKey || event.shiftKey) return;\n                event.preventDefault();\n                const items = getItems().filter((item) => item.focusable);\n                let candidateNodes = items.map((item) => item.ref.current);\n                if (focusIntent === \"last\") candidateNodes.reverse();\n                else if (focusIntent === \"prev\" || focusIntent === \"next\") {\n                  if (focusIntent === \"prev\") candidateNodes.reverse();\n                  const currentIndex = candidateNodes.indexOf(event.currentTarget);\n                  candidateNodes = context.loop ? wrapArray(candidateNodes, currentIndex + 1) : candidateNodes.slice(currentIndex + 1);\n                }\n                setTimeout(() => focusFirst(candidateNodes));\n              }\n            })\n          }\n        )\n      }\n    );\n  }\n);\nRovingFocusGroupItem.displayName = ITEM_NAME;\nvar MAP_KEY_TO_FOCUS_INTENT = {\n  ArrowLeft: \"prev\",\n  ArrowUp: \"prev\",\n  ArrowRight: \"next\",\n  ArrowDown: \"next\",\n  PageUp: \"first\",\n  Home: \"first\",\n  PageDown: \"last\",\n  End: \"last\"\n};\nfunction getDirectionAwareKey(key, dir) {\n  if (dir !== \"rtl\") return key;\n  return key === \"ArrowLeft\" ? \"ArrowRight\" : key === \"ArrowRight\" ? \"ArrowLeft\" : key;\n}\nfunction getFocusIntent(event, orientation, dir) {\n  const key = getDirectionAwareKey(event.key, dir);\n  if (orientation === \"vertical\" && [\"ArrowLeft\", \"ArrowRight\"].includes(key)) return void 0;\n  if (orientation === \"horizontal\" && [\"ArrowUp\", \"ArrowDown\"].includes(key)) return void 0;\n  return MAP_KEY_TO_FOCUS_INTENT[key];\n}\nfunction focusFirst(candidates, preventScroll = false) {\n  const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;\n  for (const candidate of candidates) {\n    if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;\n    candidate.focus({ preventScroll });\n    if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;\n  }\n}\nfunction wrapArray(array, startIndex) {\n  return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\nvar Root = RovingFocusGroup;\nvar Item = RovingFocusGroupItem;\n\n// node_modules/@radix-ui/react-tabs/dist/index.mjs\nvar import_jsx_runtime2 = __toESM(require_jsx_runtime(), 1);\nvar TABS_NAME = \"Tabs\";\nvar [createTabsContext, createTabsScope] = createContextScope(TABS_NAME, [\n  createRovingFocusGroupScope\n]);\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar [TabsProvider, useTabsContext] = createTabsContext(TABS_NAME);\nvar Tabs = React2.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeTabs,\n      value: valueProp,\n      onValueChange,\n      defaultValue,\n      orientation = \"horizontal\",\n      dir,\n      activationMode = \"automatic\",\n      ...tabsProps\n    } = props;\n    const direction = useDirection(dir);\n    const [value, setValue] = useControllableState({\n      prop: valueProp,\n      onChange: onValueChange,\n      defaultProp: defaultValue\n    });\n    return (0, import_jsx_runtime2.jsx)(\n      TabsProvider,\n      {\n        scope: __scopeTabs,\n        baseId: useId(),\n        value,\n        onValueChange: setValue,\n        orientation,\n        dir: direction,\n        activationMode,\n        children: (0, import_jsx_runtime2.jsx)(\n          Primitive.div,\n          {\n            dir: direction,\n            \"data-orientation\": orientation,\n            ...tabsProps,\n            ref: forwardedRef\n          }\n        )\n      }\n    );\n  }\n);\nTabs.displayName = TABS_NAME;\nvar TAB_LIST_NAME = \"TabsList\";\nvar TabsList = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, loop = true, ...listProps } = props;\n    const context = useTabsContext(TAB_LIST_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    return (0, import_jsx_runtime2.jsx)(\n      Root,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        orientation: context.orientation,\n        dir: context.dir,\n        loop,\n        children: (0, import_jsx_runtime2.jsx)(\n          Primitive.div,\n          {\n            role: \"tablist\",\n            \"aria-orientation\": context.orientation,\n            ...listProps,\n            ref: forwardedRef\n          }\n        )\n      }\n    );\n  }\n);\nTabsList.displayName = TAB_LIST_NAME;\nvar TRIGGER_NAME = \"TabsTrigger\";\nvar TabsTrigger = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, value, disabled = false, ...triggerProps } = props;\n    const context = useTabsContext(TRIGGER_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    return (0, import_jsx_runtime2.jsx)(\n      Item,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        focusable: !disabled,\n        active: isSelected,\n        children: (0, import_jsx_runtime2.jsx)(\n          Primitive.button,\n          {\n            type: \"button\",\n            role: \"tab\",\n            \"aria-selected\": isSelected,\n            \"aria-controls\": contentId,\n            \"data-state\": isSelected ? \"active\" : \"inactive\",\n            \"data-disabled\": disabled ? \"\" : void 0,\n            disabled,\n            id: triggerId,\n            ...triggerProps,\n            ref: forwardedRef,\n            onMouseDown: composeEventHandlers(props.onMouseDown, (event) => {\n              if (!disabled && event.button === 0 && event.ctrlKey === false) {\n                context.onValueChange(value);\n              } else {\n                event.preventDefault();\n              }\n            }),\n            onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n              if ([\" \", \"Enter\"].includes(event.key)) context.onValueChange(value);\n            }),\n            onFocus: composeEventHandlers(props.onFocus, () => {\n              const isAutomaticActivation = context.activationMode !== \"manual\";\n              if (!isSelected && !disabled && isAutomaticActivation) {\n                context.onValueChange(value);\n              }\n            })\n          }\n        )\n      }\n    );\n  }\n);\nTabsTrigger.displayName = TRIGGER_NAME;\nvar CONTENT_NAME = \"TabsContent\";\nvar TabsContent = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, value, forceMount, children, ...contentProps } = props;\n    const context = useTabsContext(CONTENT_NAME, __scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    const isMountAnimationPreventedRef = React2.useRef(isSelected);\n    React2.useEffect(() => {\n      const rAF = requestAnimationFrame(() => isMountAnimationPreventedRef.current = false);\n      return () => cancelAnimationFrame(rAF);\n    }, []);\n    return (0, import_jsx_runtime2.jsx)(Presence, { present: forceMount || isSelected, children: ({ present }) => (0, import_jsx_runtime2.jsx)(\n      Primitive.div,\n      {\n        \"data-state\": isSelected ? \"active\" : \"inactive\",\n        \"data-orientation\": context.orientation,\n        role: \"tabpanel\",\n        \"aria-labelledby\": triggerId,\n        hidden: !present,\n        id: contentId,\n        tabIndex: 0,\n        ...contentProps,\n        ref: forwardedRef,\n        style: {\n          ...props.style,\n          animationDuration: isMountAnimationPreventedRef.current ? \"0s\" : void 0\n        },\n        children: present && children\n      }\n    ) });\n  }\n);\nTabsContent.displayName = CONTENT_NAME;\nfunction makeTriggerId(baseId, value) {\n  return `${baseId}-trigger-${value}`;\n}\nfunction makeContentId(baseId, value) {\n  return `${baseId}-content-${value}`;\n}\nvar Root2 = Tabs;\nvar List = TabsList;\nvar Trigger = TabsTrigger;\nvar Content = TabsContent;\nexport {\n  Content,\n  List,\n  Root2 as Root,\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n  Trigger,\n  createTabsScope\n};\n//# sourceMappingURL=@radix-ui_react-tabs.js.map\n","size_bytes":15184},"replit.md":{"content":"# ZimFeast - Food Delivery Platform\n\n## Overview\nZimFeast is a full-stack food delivery platform for Zimbabwe, built with React/Vite frontend and Django/Channels backend. The application supports multiple user roles: customers, restaurants, drivers, and administrators.\n\n## Tech Stack\n\n### Frontend\n- **Framework**: React 18 with TypeScript\n- **Build Tool**: Vite 5\n- **UI Components**: Radix UI with Tailwind CSS\n- **State Management**: TanStack Query (React Query)\n- **Routing**: React Router DOM\n- **Maps**: Google Maps API integration\n\n### Backend\n- **Framework**: Django 4.2 with Django REST Framework\n- **WebSocket**: Django Channels with Daphne ASGI server\n- **Database**: SQLite (development) - migrate to PostgreSQL for production\n- **Authentication**: Custom JWT implementation\n- **Real-time**: WebSocket support for live order updates and driver tracking\n\n## Project Structure\n\n```\n.\nâ”œâ”€â”€ src/                    # React frontend source\nâ”‚   â”œâ”€â”€ components/        # Reusable UI components\nâ”‚   â”œâ”€â”€ pages/            # Page components for different user roles\nâ”‚   â”œâ”€â”€ hooks/            # Custom React hooks\nâ”‚   â””â”€â”€ lib/              # Utility functions\nâ”œâ”€â”€ ZimFeast/             # Django backend\nâ”‚   â”œâ”€â”€ accounts/         # User authentication\nâ”‚   â”œâ”€â”€ restaurants/      # Restaurant management\nâ”‚   â”œâ”€â”€ orders/          # Order processing\nâ”‚   â”œâ”€â”€ drivers/         # Driver assignment\nâ”‚   â””â”€â”€ payments/        # Payment integration (Paynow)\nâ”œâ”€â”€ shared/              # Shared utilities between frontend/backend\nâ””â”€â”€ node_modules/        # NPM dependencies\n```\n\n## Environment Setup\n\n### Required Environment Variables\nThe following environment variables are configured in `ZimFeast/.env`:\n- `SECRET_KEY`: Django secret key\n- `GOOGLE_API_KEY`: Google Maps API key\n- `SENDGRID_API_KEY`: SendGrid email service\n- `PAYNOW_*`: Paynow payment gateway credentials\n- `REDIS_URL`: Redis for WebSocket channels (optional in development)\n\n## Development\n\n### Running the Application\nTwo workflows are configured and running automatically:\n1. **Frontend**: Runs on port 5000 using `npm run dev`\n2. **Backend**: Runs on port 8000 using Daphne ASGI server\n\n### Database Migrations\n```bash\ncd ZimFeast\npython manage.py migrate\npython manage.py createsuperuser  # Create admin account\n```\n\n### Key Features\n- Multi-role authentication (Customer, Restaurant, Driver, Admin)\n- Real-time order tracking with WebSocket\n- Google Maps integration for delivery tracking\n- Restaurant menu management\n- Payment processing via Paynow\n- Driver assignment algorithm\n- Live order status updates\n\n## User Roles\n\n1. **Customer**: Browse restaurants, place orders, track deliveries\n2. **Restaurant**: Manage menu items, process orders, view analytics\n3. **Driver**: Accept deliveries, update delivery status, track earnings\n4. **Admin**: Manage all restaurants and drivers, view system analytics\n\n## API Backend\nThe Django backend exposes REST API endpoints at:\n- `/api/accounts/` - User authentication and profiles\n- `/api/restaurants/` - Restaurant and menu management\n- `/api/orders/` - Order processing\n- `/api/drivers/` - Driver management\n- `/api/payments/` - Payment processing\n\nWebSocket connections are available for:\n- Live order updates\n- Driver location tracking\n- Real-time notifications\n\n## Notes\n- Frontend uses localhost to communicate with backend (both run in same environment)\n- SQLite is used for development; production should use PostgreSQL\n- Redis is optional in development but required in production for WebSocket support\n- The project includes demo data for testing\n\n## Recent Changes\n- Successfully configured for Replit environment\n- Fixed Python dependencies and installed all required packages\n- Configured Vite to allow all hosts for Replit proxy\n- Set up Django CORS to accept all origins in development\n- Fixed Django ASGI import order for Channels\n- Created workflows for both frontend and backend servers\n- **Made menu item images mandatory**: Updated both frontend and backend to require image upload when adding menu items\n  - Frontend now includes image preview functionality\n  - Backend enforces image field requirement\n  - Migration applied to update database schema\n- **Added External API management**: Restaurants can now add external API integrations\n  - Added \"External APIs\" button in restaurant dashboard with modern gradient styling\n  - Created ExternalAPIDialog component with form validation\n  - Supports multiple API categories (Menu API, Meal Data, Categories, Inventory, Analytics, Custom)\n  - Securely stores API URLs and optional API keys\n  - Connected to backend endpoint for API management\n- **Cleaned up frontend demo data and integrated real backend**:\n  - Created 10 real restaurants in database with 30 menu items (3 per restaurant)\n  - All restaurants have external API integrations with category \"get_menu\"\n  - Removed all demo/mock data from CustomerApp, CartComponent, and DeliveryHistory\n  - Fixed API calls to use real backend endpoints with proper authentication\n  - Fixed pagination to work with full cursor URLs\n  - Updated cart system to include restaurant location data for order creation\n","size_bytes":5228},"ZimFeast/restaurants/migrations/0004_alter_menuitem_item_image.py":{"content":"# Generated by Django 4.2.25 on 2025-10-20 09:38\n\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('restaurants', '0003_categorytype_and_more'),\n    ]\n\n    operations = [\n        migrations.AlterField(\n            model_name='menuitem',\n            name='item_image',\n            field=models.ImageField(default='menu_items/placeholder.jpg', upload_to='menu_items/'),\n        ),\n    ]\n","size_bytes":449},"src/pages/restaurant-components/ExternalAPIDialog.tsx":{"content":"import { useState } from \"react\";\nimport { useForm, SubmitHandler } from \"react-hook-form\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormMessage,\n  FormDescription,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\ninterface ExternalAPIFormValues {\n  category: string;\n  api_url: string;\n  api_key: string;\n}\n\ninterface ExternalAPIDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  restaurantId: string;\n}\n\nexport default function ExternalAPIDialog({\n  isOpen,\n  onClose,\n  restaurantId,\n}: ExternalAPIDialogProps) {\n  const { toast } = useToast();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const form = useForm<ExternalAPIFormValues>({\n    defaultValues: {\n      category: \"\",\n      api_url: \"\",\n      api_key: \"\",\n    },\n  });\n\n  const handleSubmit: SubmitHandler<ExternalAPIFormValues> = async (data) => {\n    setIsSubmitting(true);\n    try {\n      const token = localStorage.getItem(\"token\");\n      const response = await fetch(\n        `http://127.0.0.1:8000/api/restaurants/${restaurantId}/external-apis/`,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n          body: JSON.stringify(data),\n        }\n      );\n\n      if (!response.ok) {\n        const error = await response.json();\n        console.error(\"Error adding external API:\", error);\n        toast({\n          title: \"Error\",\n          description: error.detail || \"Failed to add external API\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      const result = await response.json();\n      console.log(\"External API added successfully:\", result);\n      toast({\n        title: \"Success\",\n        description: \"External API added successfully!\",\n      });\n      form.reset();\n      onClose();\n    } catch (err) {\n      console.error(err);\n      toast({\n        title: \"Error\",\n        description: \"An unexpected error occurred.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[550px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <i className=\"fas fa-plug text-primary\"></i>\n            Add External API Integration\n          </DialogTitle>\n          <DialogDescription>\n            Connect external APIs to your restaurant for enhanced functionality\n            like menu synchronization and data management.\n          </DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form\n            onSubmit={form.handleSubmit(handleSubmit)}\n            className=\"space-y-5\"\n          >\n            {/* Category Field */}\n            <FormField\n              control={form.control}\n              name=\"category\"\n              rules={{ required: \"Category is required\" }}\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>API Category</FormLabel>\n                  <FormControl>\n                    <Select\n                      value={field.value}\n                      onValueChange={field.onChange}\n                    >\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select API category\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"menu_api\">Menu API</SelectItem>\n                        <SelectItem value=\"meal_data\">Meal Data</SelectItem>\n                        <SelectItem value=\"categories\">Categories</SelectItem>\n                        <SelectItem value=\"inventory\">Inventory</SelectItem>\n                        <SelectItem value=\"analytics\">Analytics</SelectItem>\n                        <SelectItem value=\"custom\">Custom</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </FormControl>\n                  <FormDescription>\n                    Choose the type of integration you want to add\n                  </FormDescription>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            {/* API URL Field */}\n            <FormField\n              control={form.control}\n              name=\"api_url\"\n              rules={{\n                required: \"API URL is required\",\n                pattern: {\n                  value: /^https?:\\/\\/.+/,\n                  message: \"Please enter a valid URL (starting with http:// or https://)\",\n                },\n              }}\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>API URL</FormLabel>\n                  <FormControl>\n                    <Input\n                      {...field}\n                      placeholder=\"https://api.example.com/v1/...\"\n                      type=\"url\"\n                    />\n                  </FormControl>\n                  <FormDescription>\n                    The endpoint URL for your external API\n                  </FormDescription>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            {/* API Key Field */}\n            <FormField\n              control={form.control}\n              name=\"api_key\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>API Key (Optional)</FormLabel>\n                  <FormControl>\n                    <Input\n                      {...field}\n                      placeholder=\"Enter your API key\"\n                      type=\"password\"\n                    />\n                  </FormControl>\n                  <FormDescription>\n                    Your API authentication key (if required)\n                  </FormDescription>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            {/* Submit Button */}\n            <div className=\"flex justify-end gap-3 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                disabled={isSubmitting}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={isSubmitting}>\n                {isSubmitting ? (\n                  <>\n                    <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                    Adding...\n                  </>\n                ) : (\n                  <>\n                    <i className=\"fas fa-plus mr-2\"></i>\n                    Add API\n                  </>\n                )}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":7146},"ZimFeast/restaurants/migrations/0005_restaurant_profile_image_alter_menuitem_item_image.py":{"content":"# Generated by Django 4.2.25 on 2025-10-20 09:58\n\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('restaurants', '0004_alter_menuitem_item_image'),\n    ]\n\n    operations = [\n        migrations.AddField(\n            model_name='restaurant',\n            name='profile_image',\n            field=models.ImageField(blank=True, null=True, upload_to='restaurant_profiles/'),\n        ),\n        migrations.AlterField(\n            model_name='menuitem',\n            name='item_image',\n            field=models.ImageField(upload_to='menu_items/'),\n        ),\n    ]\n","size_bytes":620},"ZimFeast/populate_restaurants.py":{"content":"import os\nimport django\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"ZimFeast.settings\")\ndjango.setup()\n\nfrom restaurants.models import Restaurant, MenuItem, CuisineType, CategoryType, RestaurantExternalAPI\nfrom accounts.models import CustomUser\nfrom django.core.files import File\nfrom django.core.files.uploadedfile import SimpleUploadedFile\nimport urllib.request\nfrom decimal import Decimal\n\ndef create_restaurants():\n    print(\"Creating cuisine and category types...\")\n    \n    cuisines_data = [\"African\", \"Asian\", \"American\", \"Italian\", \"Mexican\", \"Fast Food\", \"Healthy\", \"Desserts\", \"Vegetarian\", \"Seafood\"]\n    categories_data = [\"Burgers\", \"Pizza\", \"Chicken\", \"Salads\", \"Sides\", \"Desserts\", \"Drinks\", \"Breakfast\", \"Sandwiches\", \"Pasta\"]\n    \n    cuisines = {}\n    for cuisine_name in cuisines_data:\n        cuisine, _ = CuisineType.objects.get_or_create(name=cuisine_name)\n        cuisines[cuisine_name] = cuisine\n    \n    categories = {}\n    for category_name in categories_data:\n        category, _ = CategoryType.objects.get_or_create(name=category_name)\n        categories[category_name] = category\n    \n    print(\"Deleting existing restaurants and demo owners...\")\n    Restaurant.objects.all().delete()\n    CustomUser.objects.filter(email__startswith=\"restaurant\").delete()\n    \n    restaurants_data = [\n        {\n            \"name\": \"KFC Zimbabwe\",\n            \"description\": \"World-famous fried chicken with signature taste\",\n            \"cuisines\": [\"Fast Food\", \"American\"],\n            \"lat\": -17.8252,\n            \"lng\": 31.0335,\n            \"address\": \"Sam Levy's Village, Borrowdale, Harare\",\n            \"min_order\": 5.00,\n            \"est_time\": \"20-30 mins\",\n            \"menu\": [\n                {\"name\": \"Original Recipe Bucket\", \"price\": 25.99, \"category\": \"Chicken\", \"desc\": \"12 pieces of our signature fried chicken\"},\n                {\"name\": \"Zinger Burger Meal\", \"price\": 8.99, \"category\": \"Burgers\", \"desc\": \"Spicy chicken fillet burger with fries and drink\"},\n                {\"name\": \"Coleslaw\", \"price\": 2.50, \"category\": \"Sides\", \"desc\": \"Fresh and creamy coleslaw\"}\n            ]\n        },\n        {\n            \"name\": \"Nando's Harare\",\n            \"description\": \"Peri-Peri chicken grilled to perfection\",\n            \"cuisines\": [\"African\", \"Fast Food\"],\n            \"lat\": -17.8292,\n            \"lng\": 31.0522,\n            \"address\": \"Arundel Village, Harare\",\n            \"min_order\": 7.00,\n            \"est_time\": \"25-35 mins\",\n            \"menu\": [\n                {\"name\": \"Full Chicken Peri-Peri\", \"price\": 18.50, \"category\": \"Chicken\", \"desc\": \"Whole chicken with your choice of peri-peri spice\"},\n                {\"name\": \"Chicken Wrap\", \"price\": 7.99, \"category\": \"Sandwiches\", \"desc\": \"Grilled chicken strips wrapped with fresh veggies\"},\n                {\"name\": \"Portuguese Roll\", \"price\": 1.50, \"category\": \"Sides\", \"desc\": \"Soft Portuguese-style bread roll\"}\n            ]\n        },\n        {\n            \"name\": \"Pizza Inn\",\n            \"description\": \"Premium pizzas with fresh toppings\",\n            \"cuisines\": [\"Italian\", \"Fast Food\"],\n            \"lat\": -17.8310,\n            \"lng\": 31.0450,\n            \"address\": \"Newlands Shopping Center, Harare\",\n            \"min_order\": 10.00,\n            \"est_time\": \"30-40 mins\",\n            \"menu\": [\n                {\"name\": \"Meat Lovers Pizza\", \"price\": 14.99, \"category\": \"Pizza\", \"desc\": \"Loaded with beef, sausage, bacon and pepperoni\"},\n                {\"name\": \"Margherita Pizza\", \"price\": 9.99, \"category\": \"Pizza\", \"desc\": \"Classic tomato sauce, mozzarella and fresh basil\"},\n                {\"name\": \"Garlic Bread\", \"price\": 3.50, \"category\": \"Sides\", \"desc\": \"Toasted bread with garlic butter\"}\n            ]\n        },\n        {\n            \"name\": \"Ocean Basket\",\n            \"description\": \"Fresh seafood and Mediterranean cuisine\",\n            \"cuisines\": [\"Seafood\", \"Healthy\"],\n            \"lat\": -17.8200,\n            \"lng\": 31.0290,\n            \"address\": \"Sam Levy's Village, Borrowdale, Harare\",\n            \"min_order\": 12.00,\n            \"est_time\": \"35-45 mins\",\n            \"menu\": [\n                {\"name\": \"Grilled Calamari\", \"price\": 16.99, \"category\": \"Seafood\", \"desc\": \"Tender calamari rings grilled with lemon butter\"},\n                {\"name\": \"Fish and Chips\", \"price\": 12.99, \"category\": \"Seafood\", \"desc\": \"Battered fish fillet with golden fries\"},\n                {\"name\": \"Greek Salad\", \"price\": 6.99, \"category\": \"Salads\", \"desc\": \"Fresh salad with feta, olives and cucumbers\"}\n            ]\n        },\n        {\n            \"name\": \"Chicken Inn\",\n            \"description\": \"Southern fried chicken and more\",\n            \"cuisines\": [\"Fast Food\", \"African\"],\n            \"lat\": -17.8350,\n            \"lng\": 31.0380,\n            \"address\": \"Avondale Shopping Centre, Harare\",\n            \"min_order\": 5.00,\n            \"est_time\": \"20-30 mins\",\n            \"menu\": [\n                {\"name\": \"Chicken Pieces Meal\", \"price\": 7.99, \"category\": \"Chicken\", \"desc\": \"4 pieces of crispy fried chicken with chips\"},\n                {\"name\": \"Chicken Burger\", \"price\": 4.99, \"category\": \"Burgers\", \"desc\": \"Fried chicken patty with lettuce and mayo\"},\n                {\"name\": \"Sadza and Chicken\", \"price\": 8.50, \"category\": \"African\", \"desc\": \"Traditional sadza with chicken stew\"}\n            ]\n        },\n        {\n            \"name\": \"Steers\",\n            \"description\": \"Flame-grilled burgers and ribs\",\n            \"cuisines\": [\"Fast Food\", \"American\"],\n            \"lat\": -17.8180,\n            \"lng\": 31.0470,\n            \"address\": \"Eastgate Mall, Harare\",\n            \"min_order\": 6.00,\n            \"est_time\": \"25-30 mins\",\n            \"menu\": [\n                {\"name\": \"King Steer Burger\", \"price\": 9.99, \"category\": \"Burgers\", \"desc\": \"Double beef patty with cheese, bacon and special sauce\"},\n                {\"name\": \"Chicken Burger Combo\", \"price\": 7.99, \"category\": \"Burgers\", \"desc\": \"Grilled chicken burger with chips and drink\"},\n                {\"name\": \"Chips & Cheese\", \"price\": 3.99, \"category\": \"Sides\", \"desc\": \"Crispy fries topped with melted cheese\"}\n            ]\n        },\n        {\n            \"name\": \"Amanzi Restaurant\",\n            \"description\": \"Authentic African cuisine and hospitality\",\n            \"cuisines\": [\"African\", \"Vegetarian\"],\n            \"lat\": -17.8330,\n            \"lng\": 31.0550,\n            \"address\": \"Borrowdale Road, Harare\",\n            \"min_order\": 8.00,\n            \"est_time\": \"30-40 mins\",\n            \"menu\": [\n                {\"name\": \"Nyama Choma Platter\", \"price\": 19.99, \"category\": \"African\", \"desc\": \"Grilled meat selection with sadza and relish\"},\n                {\"name\": \"Vegetable Curry\", \"price\": 9.99, \"category\": \"Vegetarian\", \"desc\": \"Mixed vegetables in aromatic curry sauce\"},\n                {\"name\": \"Madora (Mopane Worms)\", \"price\": 6.50, \"category\": \"African\", \"desc\": \"Traditional protein-rich delicacy\"}\n            ]\n        },\n        {\n            \"name\": \"Gava's Restaurant\",\n            \"description\": \"Traditional Zimbabwean dishes\",\n            \"cuisines\": [\"African\"],\n            \"lat\": -17.8400,\n            \"lng\": 31.0320,\n            \"address\": \"Robert Mugabe Road, Harare\",\n            \"min_order\": 7.00,\n            \"est_time\": \"30-35 mins\",\n            \"menu\": [\n                {\"name\": \"Sadza ne Huku\", \"price\": 8.99, \"category\": \"African\", \"desc\": \"Sadza with chicken in peanut butter sauce\"},\n                {\"name\": \"Oxtail Stew\", \"price\": 15.99, \"category\": \"African\", \"desc\": \"Slow-cooked oxtail in rich gravy\"},\n                {\"name\": \"Chakalaka\", \"price\": 3.50, \"category\": \"Sides\", \"desc\": \"Spicy vegetable relish\"}\n            ]\n        },\n        {\n            \"name\": \"Pariah State\",\n            \"description\": \"Trendy burgers and craft beers\",\n            \"cuisines\": [\"American\", \"Fast Food\"],\n            \"lat\": -17.8270,\n            \"lng\": 31.0500,\n            \"address\": \"Fife Avenue, Harare\",\n            \"min_order\": 10.00,\n            \"est_time\": \"25-35 mins\",\n            \"menu\": [\n                {\"name\": \"Pariah Burger\", \"price\": 11.99, \"category\": \"Burgers\", \"desc\": \"Gourmet beef burger with caramelized onions and bacon\"},\n                {\"name\": \"Loaded Fries\", \"price\": 6.99, \"category\": \"Sides\", \"desc\": \"Fries topped with cheese, bacon and sour cream\"},\n                {\"name\": \"Chicken Wings\", \"price\": 8.99, \"category\": \"Chicken\", \"desc\": \"Spicy buffalo wings with ranch dip\"}\n            ]\n        },\n        {\n            \"name\": \"The Smokehouse\",\n            \"description\": \"BBQ meats and smoky flavors\",\n            \"cuisines\": [\"American\", \"Fast Food\"],\n            \"lat\": -17.8150,\n            \"lng\": 31.0410,\n            \"address\": \"Borrowdale Village, Harare\",\n            \"min_order\": 12.00,\n            \"est_time\": \"35-45 mins\",\n            \"menu\": [\n                {\"name\": \"BBQ Ribs Platter\", \"price\": 22.99, \"category\": \"American\", \"desc\": \"Slow-smoked ribs with BBQ sauce and coleslaw\"},\n                {\"name\": \"Pulled Pork Sandwich\", \"price\": 10.99, \"category\": \"Sandwiches\", \"desc\": \"Tender pulled pork on toasted bun\"},\n                {\"name\": \"Mac and Cheese\", \"price\": 4.99, \"category\": \"Sides\", \"desc\": \"Creamy macaroni and cheese\"}\n            ]\n        }\n    ]\n    \n    print(\"Creating 10 restaurants with menu items...\")\n    \n    for idx, rest_data in enumerate(restaurants_data, 1):\n        print(f\"\\nCreating restaurant {idx}/10: {rest_data['name']}...\")\n        \n        owner = CustomUser.objects.create(\n            email=f\"restaurant{idx}@zimfeast.com\",\n            phone_number=f\"+26377123456{idx}\",\n            role=\"restaurant\",\n            first_name=rest_data['name'].split()[0],\n            is_staff=False\n        )\n        owner.set_password(\"demo12345\")\n        owner.save()\n        \n        restaurant = Restaurant.objects.create(\n            owner=owner,\n            name=rest_data['name'],\n            description=rest_data['description'],\n            full_address=rest_data['address'],\n            lat=rest_data['lat'],\n            lng=rest_data['lng'],\n            minimum_order_price=Decimal(str(rest_data['min_order'])),\n            est_delivery_time=rest_data['est_time'],\n            phone_number=f\"+26377123456{idx}\"\n        )\n        \n        for cuisine_name in rest_data['cuisines']:\n            restaurant.cuisines.add(cuisines[cuisine_name])\n        \n        print(f\"  Creating external API 'get_menu'...\")\n        RestaurantExternalAPI.objects.create(\n            restaurant=restaurant,\n            category=\"get_menu\",\n            api_url=\"https://kfc-chickens.p.rapidapi.com/chickens/2\",\n            api_key=\"\"\n        )\n        \n        print(f\"  Creating {len(rest_data['menu'])} menu items...\")\n        for menu_item_data in rest_data['menu']:\n            menu_item = MenuItem.objects.create(\n                restaurant=restaurant,\n                name=menu_item_data['name'],\n                price=Decimal(str(menu_item_data['price'])),\n                description=menu_item_data['desc'],\n                prep_time=15,\n                available=True\n            )\n            \n            if menu_item_data['category'] in categories:\n                menu_item.category.add(categories[menu_item_data['category']])\n        \n        print(f\"  âœ“ Restaurant '{rest_data['name']}' created successfully!\")\n    \n    print(f\"\\nâœ… Successfully created {len(restaurants_data)} restaurants with menus and external APIs!\")\n    print(\"\\nSummary:\")\n    print(f\"  - Total Restaurants: {Restaurant.objects.count()}\")\n    print(f\"  - Total Menu Items: {MenuItem.objects.count()}\")\n    print(f\"  - Total External APIs: {RestaurantExternalAPI.objects.count()}\")\n\nif __name__ == \"__main__\":\n    create_restaurants()\n","size_bytes":11742}},"version":2}